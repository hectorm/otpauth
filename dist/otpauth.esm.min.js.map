{"version":3,"file":"otpauth.esm.min.js","sources":["../node_modules/@noble/hashes/utils.js","../node_modules/@noble/hashes/hmac.js","../node_modules/@noble/hashes/_md.js","../node_modules/@noble/hashes/legacy.js","../node_modules/@noble/hashes/_u64.js","../node_modules/@noble/hashes/sha2.js","../node_modules/@noble/hashes/sha3.js","../src/internal/global-scope.js","../src/internal/crypto/hmac-digest.js","../src/internal/encoding/base32.js","../src/internal/encoding/hex.js","../src/internal/encoding/latin1.js","../src/internal/encoding/utf8.js","../src/secret.js","../src/internal/crypto/random-bytes.js","../src/hotp.js","../src/internal/encoding/uint.js","../src/internal/crypto/timing-safe-equal.js","../src/totp.js","../src/uri.js","../src/version.js"],"sourcesContent":["/**\n * Utilities for hex, bytes, CSPRNG.\n * @module\n */\n/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */\n/** Checks if something is Uint8Array. Be careful: nodejs Buffer will return true. */\nexport function isBytes(a) {\n    return a instanceof Uint8Array || (ArrayBuffer.isView(a) && a.constructor.name === 'Uint8Array');\n}\n/** Asserts something is positive integer. */\nexport function anumber(n, title = '') {\n    if (!Number.isSafeInteger(n) || n < 0) {\n        const prefix = title && `\"${title}\" `;\n        throw new Error(`${prefix}expected integer >= 0, got ${n}`);\n    }\n}\n/** Asserts something is Uint8Array. */\nexport function abytes(value, length, title = '') {\n    const bytes = isBytes(value);\n    const len = value?.length;\n    const needsLen = length !== undefined;\n    if (!bytes || (needsLen && len !== length)) {\n        const prefix = title && `\"${title}\" `;\n        const ofLen = needsLen ? ` of length ${length}` : '';\n        const got = bytes ? `length=${len}` : `type=${typeof value}`;\n        throw new Error(prefix + 'expected Uint8Array' + ofLen + ', got ' + got);\n    }\n    return value;\n}\n/** Asserts something is hash */\nexport function ahash(h) {\n    if (typeof h !== 'function' || typeof h.create !== 'function')\n        throw new Error('Hash must wrapped by utils.createHasher');\n    anumber(h.outputLen);\n    anumber(h.blockLen);\n}\n/** Asserts a hash instance has not been destroyed / finished */\nexport function aexists(instance, checkFinished = true) {\n    if (instance.destroyed)\n        throw new Error('Hash instance has been destroyed');\n    if (checkFinished && instance.finished)\n        throw new Error('Hash#digest() has already been called');\n}\n/** Asserts output is properly-sized byte array */\nexport function aoutput(out, instance) {\n    abytes(out, undefined, 'digestInto() output');\n    const min = instance.outputLen;\n    if (out.length < min) {\n        throw new Error('\"digestInto() output\" expected to be of length >=' + min);\n    }\n}\n/** Cast u8 / u16 / u32 to u8. */\nexport function u8(arr) {\n    return new Uint8Array(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** Cast u8 / u16 / u32 to u32. */\nexport function u32(arr) {\n    return new Uint32Array(arr.buffer, arr.byteOffset, Math.floor(arr.byteLength / 4));\n}\n/** Zeroize a byte array. Warning: JS provides no guarantees. */\nexport function clean(...arrays) {\n    for (let i = 0; i < arrays.length; i++) {\n        arrays[i].fill(0);\n    }\n}\n/** Create DataView of an array for easy byte-level manipulation. */\nexport function createView(arr) {\n    return new DataView(arr.buffer, arr.byteOffset, arr.byteLength);\n}\n/** The rotate right (circular right shift) operation for uint32 */\nexport function rotr(word, shift) {\n    return (word << (32 - shift)) | (word >>> shift);\n}\n/** The rotate left (circular left shift) operation for uint32 */\nexport function rotl(word, shift) {\n    return (word << shift) | ((word >>> (32 - shift)) >>> 0);\n}\n/** Is current platform little-endian? Most are. Big-Endian platform: IBM */\nexport const isLE = /* @__PURE__ */ (() => new Uint8Array(new Uint32Array([0x11223344]).buffer)[0] === 0x44)();\n/** The byte swap operation for uint32 */\nexport function byteSwap(word) {\n    return (((word << 24) & 0xff000000) |\n        ((word << 8) & 0xff0000) |\n        ((word >>> 8) & 0xff00) |\n        ((word >>> 24) & 0xff));\n}\n/** Conditionally byte swap if on a big-endian platform */\nexport const swap8IfBE = isLE\n    ? (n) => n\n    : (n) => byteSwap(n);\n/** In place byte swap for Uint32Array */\nexport function byteSwap32(arr) {\n    for (let i = 0; i < arr.length; i++) {\n        arr[i] = byteSwap(arr[i]);\n    }\n    return arr;\n}\nexport const swap32IfBE = isLE\n    ? (u) => u\n    : byteSwap32;\n// Built-in hex conversion https://caniuse.com/mdn-javascript_builtins_uint8array_fromhex\nconst hasHexBuiltin = /* @__PURE__ */ (() => \n// @ts-ignore\ntypeof Uint8Array.from([]).toHex === 'function' && typeof Uint8Array.fromHex === 'function')();\n// Array where index 0xf0 (240) is mapped to string 'f0'\nconst hexes = /* @__PURE__ */ Array.from({ length: 256 }, (_, i) => i.toString(16).padStart(2, '0'));\n/**\n * Convert byte array to hex string. Uses built-in function, when available.\n * @example bytesToHex(Uint8Array.from([0xca, 0xfe, 0x01, 0x23])) // 'cafe0123'\n */\nexport function bytesToHex(bytes) {\n    abytes(bytes);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return bytes.toHex();\n    // pre-caching improves the speed 6x\n    let hex = '';\n    for (let i = 0; i < bytes.length; i++) {\n        hex += hexes[bytes[i]];\n    }\n    return hex;\n}\n// We use optimized technique to convert hex string to byte array\nconst asciis = { _0: 48, _9: 57, A: 65, F: 70, a: 97, f: 102 };\nfunction asciiToBase16(ch) {\n    if (ch >= asciis._0 && ch <= asciis._9)\n        return ch - asciis._0; // '2' => 50-48\n    if (ch >= asciis.A && ch <= asciis.F)\n        return ch - (asciis.A - 10); // 'B' => 66-(65-10)\n    if (ch >= asciis.a && ch <= asciis.f)\n        return ch - (asciis.a - 10); // 'b' => 98-(97-10)\n    return;\n}\n/**\n * Convert hex string to byte array. Uses built-in function, when available.\n * @example hexToBytes('cafe0123') // Uint8Array.from([0xca, 0xfe, 0x01, 0x23])\n */\nexport function hexToBytes(hex) {\n    if (typeof hex !== 'string')\n        throw new Error('hex string expected, got ' + typeof hex);\n    // @ts-ignore\n    if (hasHexBuiltin)\n        return Uint8Array.fromHex(hex);\n    const hl = hex.length;\n    const al = hl / 2;\n    if (hl % 2)\n        throw new Error('hex string expected, got unpadded hex of length ' + hl);\n    const array = new Uint8Array(al);\n    for (let ai = 0, hi = 0; ai < al; ai++, hi += 2) {\n        const n1 = asciiToBase16(hex.charCodeAt(hi));\n        const n2 = asciiToBase16(hex.charCodeAt(hi + 1));\n        if (n1 === undefined || n2 === undefined) {\n            const char = hex[hi] + hex[hi + 1];\n            throw new Error('hex string expected, got non-hex character \"' + char + '\" at index ' + hi);\n        }\n        array[ai] = n1 * 16 + n2; // multiply first octet, e.g. 'a3' => 10*16+3 => 160 + 3 => 163\n    }\n    return array;\n}\n/**\n * There is no setImmediate in browser and setTimeout is slow.\n * Call of async fn will return Promise, which will be fullfiled only on\n * next scheduler queue processing step and this is exactly what we need.\n */\nexport const nextTick = async () => { };\n/** Returns control to thread each 'tick' ms to avoid blocking. */\nexport async function asyncLoop(iters, tick, cb) {\n    let ts = Date.now();\n    for (let i = 0; i < iters; i++) {\n        cb(i);\n        // Date.now() is not monotonic, so in case if clock goes backwards we return return control too\n        const diff = Date.now() - ts;\n        if (diff >= 0 && diff < tick)\n            continue;\n        await nextTick();\n        ts += diff;\n    }\n}\n/**\n * Converts string to bytes using UTF8 encoding.\n * Built-in doesn't validate input to be string: we do the check.\n * @example utf8ToBytes('abc') // Uint8Array.from([97, 98, 99])\n */\nexport function utf8ToBytes(str) {\n    if (typeof str !== 'string')\n        throw new Error('string expected');\n    return new Uint8Array(new TextEncoder().encode(str)); // https://bugzil.la/1681809\n}\n/**\n * Helper for KDFs: consumes uint8array or string.\n * When string is passed, does utf8 decoding, using TextDecoder.\n */\nexport function kdfInputToBytes(data, errorTitle = '') {\n    if (typeof data === 'string')\n        return utf8ToBytes(data);\n    return abytes(data, undefined, errorTitle);\n}\n/** Copies several Uint8Arrays into one. */\nexport function concatBytes(...arrays) {\n    let sum = 0;\n    for (let i = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        abytes(a);\n        sum += a.length;\n    }\n    const res = new Uint8Array(sum);\n    for (let i = 0, pad = 0; i < arrays.length; i++) {\n        const a = arrays[i];\n        res.set(a, pad);\n        pad += a.length;\n    }\n    return res;\n}\n/** Merges default options and passed options. */\nexport function checkOpts(defaults, opts) {\n    if (opts !== undefined && {}.toString.call(opts) !== '[object Object]')\n        throw new Error('options must be object or undefined');\n    const merged = Object.assign(defaults, opts);\n    return merged;\n}\n/** Creates function with outputLen, blockLen, create properties from a class constructor. */\nexport function createHasher(hashCons, info = {}) {\n    const hashC = (msg, opts) => hashCons(opts).update(msg).digest();\n    const tmp = hashCons(undefined);\n    hashC.outputLen = tmp.outputLen;\n    hashC.blockLen = tmp.blockLen;\n    hashC.create = (opts) => hashCons(opts);\n    Object.assign(hashC, info);\n    return Object.freeze(hashC);\n}\n/** Cryptographically secure PRNG. Uses internal OS-level `crypto.getRandomValues`. */\nexport function randomBytes(bytesLength = 32) {\n    const cr = typeof globalThis === 'object' ? globalThis.crypto : null;\n    if (typeof cr?.getRandomValues !== 'function')\n        throw new Error('crypto.getRandomValues must be defined');\n    return cr.getRandomValues(new Uint8Array(bytesLength));\n}\n/** Creates OID opts for NIST hashes, with prefix 06 09 60 86 48 01 65 03 04 02. */\nexport const oidNist = (suffix) => ({\n    oid: Uint8Array.from([0x06, 0x09, 0x60, 0x86, 0x48, 0x01, 0x65, 0x03, 0x04, 0x02, suffix]),\n});\n//# sourceMappingURL=utils.js.map","/**\n * HMAC: RFC2104 message authentication code.\n * @module\n */\nimport { abytes, aexists, ahash, clean } from \"./utils.js\";\n/** Internal class for HMAC. */\nexport class _HMAC {\n    oHash;\n    iHash;\n    blockLen;\n    outputLen;\n    finished = false;\n    destroyed = false;\n    constructor(hash, key) {\n        ahash(hash);\n        abytes(key, undefined, 'key');\n        this.iHash = hash.create();\n        if (typeof this.iHash.update !== 'function')\n            throw new Error('Expected instance of class which extends utils.Hash');\n        this.blockLen = this.iHash.blockLen;\n        this.outputLen = this.iHash.outputLen;\n        const blockLen = this.blockLen;\n        const pad = new Uint8Array(blockLen);\n        // blockLen can be bigger than outputLen\n        pad.set(key.length > blockLen ? hash.create().update(key).digest() : key);\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36;\n        this.iHash.update(pad);\n        // By doing update (processing of first block) of outer hash here we can re-use it between multiple calls via clone\n        this.oHash = hash.create();\n        // Undo internal XOR && apply outer XOR\n        for (let i = 0; i < pad.length; i++)\n            pad[i] ^= 0x36 ^ 0x5c;\n        this.oHash.update(pad);\n        clean(pad);\n    }\n    update(buf) {\n        aexists(this);\n        this.iHash.update(buf);\n        return this;\n    }\n    digestInto(out) {\n        aexists(this);\n        abytes(out, this.outputLen, 'output');\n        this.finished = true;\n        this.iHash.digestInto(out);\n        this.oHash.update(out);\n        this.oHash.digestInto(out);\n        this.destroy();\n    }\n    digest() {\n        const out = new Uint8Array(this.oHash.outputLen);\n        this.digestInto(out);\n        return out;\n    }\n    _cloneInto(to) {\n        // Create new instance without calling constructor since key already in state and we don't know it.\n        to ||= Object.create(Object.getPrototypeOf(this), {});\n        const { oHash, iHash, finished, destroyed, blockLen, outputLen } = this;\n        to = to;\n        to.finished = finished;\n        to.destroyed = destroyed;\n        to.blockLen = blockLen;\n        to.outputLen = outputLen;\n        to.oHash = oHash._cloneInto(to.oHash);\n        to.iHash = iHash._cloneInto(to.iHash);\n        return to;\n    }\n    clone() {\n        return this._cloneInto();\n    }\n    destroy() {\n        this.destroyed = true;\n        this.oHash.destroy();\n        this.iHash.destroy();\n    }\n}\n/**\n * HMAC: RFC2104 message authentication code.\n * @param hash - function that would be used e.g. sha256\n * @param key - message key\n * @param message - message data\n * @example\n * import { hmac } from '@noble/hashes/hmac';\n * import { sha256 } from '@noble/hashes/sha2';\n * const mac1 = hmac(sha256, 'key', 'message');\n */\nexport const hmac = (hash, key, message) => new _HMAC(hash, key).update(message).digest();\nhmac.create = (hash, key) => new _HMAC(hash, key);\n//# sourceMappingURL=hmac.js.map","/**\n * Internal Merkle-Damgard hash utils.\n * @module\n */\nimport { abytes, aexists, aoutput, clean, createView } from \"./utils.js\";\n/** Choice: a ? b : c */\nexport function Chi(a, b, c) {\n    return (a & b) ^ (~a & c);\n}\n/** Majority function, true if any two inputs is true. */\nexport function Maj(a, b, c) {\n    return (a & b) ^ (a & c) ^ (b & c);\n}\n/**\n * Merkle-Damgard hash construction base class.\n * Could be used to create MD5, RIPEMD, SHA1, SHA2.\n */\nexport class HashMD {\n    blockLen;\n    outputLen;\n    padOffset;\n    isLE;\n    // For partial updates less than block size\n    buffer;\n    view;\n    finished = false;\n    length = 0;\n    pos = 0;\n    destroyed = false;\n    constructor(blockLen, outputLen, padOffset, isLE) {\n        this.blockLen = blockLen;\n        this.outputLen = outputLen;\n        this.padOffset = padOffset;\n        this.isLE = isLE;\n        this.buffer = new Uint8Array(blockLen);\n        this.view = createView(this.buffer);\n    }\n    update(data) {\n        aexists(this);\n        abytes(data);\n        const { view, buffer, blockLen } = this;\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            // Fast path: we have at least one block in input, cast it to view and process\n            if (take === blockLen) {\n                const dataView = createView(data);\n                for (; blockLen <= len - pos; pos += blockLen)\n                    this.process(dataView, pos);\n                continue;\n            }\n            buffer.set(data.subarray(pos, pos + take), this.pos);\n            this.pos += take;\n            pos += take;\n            if (this.pos === blockLen) {\n                this.process(view, 0);\n                this.pos = 0;\n            }\n        }\n        this.length += data.length;\n        this.roundClean();\n        return this;\n    }\n    digestInto(out) {\n        aexists(this);\n        aoutput(out, this);\n        this.finished = true;\n        // Padding\n        // We can avoid allocation of buffer for padding completely if it\n        // was previously not allocated here. But it won't change performance.\n        const { buffer, view, blockLen, isLE } = this;\n        let { pos } = this;\n        // append the bit '1' to the message\n        buffer[pos++] = 0b10000000;\n        clean(this.buffer.subarray(pos));\n        // we have less than padOffset left in buffer, so we cannot put length in\n        // current block, need process it and pad again\n        if (this.padOffset > blockLen - pos) {\n            this.process(view, 0);\n            pos = 0;\n        }\n        // Pad until full block byte with zeros\n        for (let i = pos; i < blockLen; i++)\n            buffer[i] = 0;\n        // Note: sha512 requires length to be 128bit integer, but length in JS will overflow before that\n        // You need to write around 2 exabytes (u64_max / 8 / (1024**6)) for this to happen.\n        // So we just write lowest 64 bits of that value.\n        view.setBigUint64(blockLen - 8, BigInt(this.length * 8), isLE);\n        this.process(view, 0);\n        const oview = createView(out);\n        const len = this.outputLen;\n        // NOTE: we do division by 4 later, which must be fused in single op with modulo by JIT\n        if (len % 4)\n            throw new Error('_sha2: outputLen must be aligned to 32bit');\n        const outLen = len / 4;\n        const state = this.get();\n        if (outLen > state.length)\n            throw new Error('_sha2: outputLen bigger than state');\n        for (let i = 0; i < outLen; i++)\n            oview.setUint32(4 * i, state[i], isLE);\n    }\n    digest() {\n        const { buffer, outputLen } = this;\n        this.digestInto(buffer);\n        const res = buffer.slice(0, outputLen);\n        this.destroy();\n        return res;\n    }\n    _cloneInto(to) {\n        to ||= new this.constructor();\n        to.set(...this.get());\n        const { blockLen, buffer, length, finished, destroyed, pos } = this;\n        to.destroyed = destroyed;\n        to.finished = finished;\n        to.length = length;\n        to.pos = pos;\n        if (length % blockLen)\n            to.buffer.set(buffer);\n        return to;\n    }\n    clone() {\n        return this._cloneInto();\n    }\n}\n/**\n * Initial SHA-2 state: fractional parts of square roots of first 16 primes 2..53.\n * Check out `test/misc/sha2-gen-iv.js` for recomputation guide.\n */\n/** Initial SHA256 state. Bits 0..32 of frac part of sqrt of primes 2..19 */\nexport const SHA256_IV = /* @__PURE__ */ Uint32Array.from([\n    0x6a09e667, 0xbb67ae85, 0x3c6ef372, 0xa54ff53a, 0x510e527f, 0x9b05688c, 0x1f83d9ab, 0x5be0cd19,\n]);\n/** Initial SHA224 state. Bits 32..64 of frac part of sqrt of primes 23..53 */\nexport const SHA224_IV = /* @__PURE__ */ Uint32Array.from([\n    0xc1059ed8, 0x367cd507, 0x3070dd17, 0xf70e5939, 0xffc00b31, 0x68581511, 0x64f98fa7, 0xbefa4fa4,\n]);\n/** Initial SHA384 state. Bits 0..64 of frac part of sqrt of primes 23..53 */\nexport const SHA384_IV = /* @__PURE__ */ Uint32Array.from([\n    0xcbbb9d5d, 0xc1059ed8, 0x629a292a, 0x367cd507, 0x9159015a, 0x3070dd17, 0x152fecd8, 0xf70e5939,\n    0x67332667, 0xffc00b31, 0x8eb44a87, 0x68581511, 0xdb0c2e0d, 0x64f98fa7, 0x47b5481d, 0xbefa4fa4,\n]);\n/** Initial SHA512 state. Bits 0..64 of frac part of sqrt of primes 2..19 */\nexport const SHA512_IV = /* @__PURE__ */ Uint32Array.from([\n    0x6a09e667, 0xf3bcc908, 0xbb67ae85, 0x84caa73b, 0x3c6ef372, 0xfe94f82b, 0xa54ff53a, 0x5f1d36f1,\n    0x510e527f, 0xade682d1, 0x9b05688c, 0x2b3e6c1f, 0x1f83d9ab, 0xfb41bd6b, 0x5be0cd19, 0x137e2179,\n]);\n//# sourceMappingURL=_md.js.map","/**\n\nSHA1 (RFC 3174), MD5 (RFC 1321) and RIPEMD160 (RFC 2286) legacy, weak hash functions.\nDon't use them in a new protocol. What \"weak\" means:\n\n- Collisions can be made with 2^18 effort in MD5, 2^60 in SHA1, 2^80 in RIPEMD160.\n- No practical pre-image attacks (only theoretical, 2^123.4)\n- HMAC seems kinda ok: https://www.rfc-editor.org/rfc/rfc6151\n * @module\n */\nimport { Chi, HashMD, Maj } from \"./_md.js\";\nimport { clean, createHasher, rotl } from \"./utils.js\";\n/** Initial SHA1 state */\nconst SHA1_IV = /* @__PURE__ */ Uint32Array.from([\n    0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0,\n]);\n// Reusable temporary buffer\nconst SHA1_W = /* @__PURE__ */ new Uint32Array(80);\n/** Internal SHA1 legacy hash class. */\nexport class _SHA1 extends HashMD {\n    A = SHA1_IV[0] | 0;\n    B = SHA1_IV[1] | 0;\n    C = SHA1_IV[2] | 0;\n    D = SHA1_IV[3] | 0;\n    E = SHA1_IV[4] | 0;\n    constructor() {\n        super(64, 20, 8, false);\n    }\n    get() {\n        const { A, B, C, D, E } = this;\n        return [A, B, C, D, E];\n    }\n    set(A, B, C, D, E) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA1_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 80; i++)\n            SHA1_W[i] = rotl(SHA1_W[i - 3] ^ SHA1_W[i - 8] ^ SHA1_W[i - 14] ^ SHA1_W[i - 16], 1);\n        // Compression function main loop, 80 rounds\n        let { A, B, C, D, E } = this;\n        for (let i = 0; i < 80; i++) {\n            let F, K;\n            if (i < 20) {\n                F = Chi(B, C, D);\n                K = 0x5a827999;\n            }\n            else if (i < 40) {\n                F = B ^ C ^ D;\n                K = 0x6ed9eba1;\n            }\n            else if (i < 60) {\n                F = Maj(B, C, D);\n                K = 0x8f1bbcdc;\n            }\n            else {\n                F = B ^ C ^ D;\n                K = 0xca62c1d6;\n            }\n            const T = (rotl(A, 5) + F + E + K + SHA1_W[i]) | 0;\n            E = D;\n            D = C;\n            C = rotl(B, 30);\n            B = A;\n            A = T;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        this.set(A, B, C, D, E);\n    }\n    roundClean() {\n        clean(SHA1_W);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0);\n        clean(this.buffer);\n    }\n}\n/** SHA1 (RFC 3174) legacy hash function. It was cryptographically broken. */\nexport const sha1 = /* @__PURE__ */ createHasher(() => new _SHA1());\n/** Per-round constants */\nconst p32 = /* @__PURE__ */ Math.pow(2, 32);\nconst K = /* @__PURE__ */ Array.from({ length: 64 }, (_, i) => Math.floor(p32 * Math.abs(Math.sin(i + 1))));\n/** md5 initial state: same as sha1, but 4 u32 instead of 5. */\nconst MD5_IV = /* @__PURE__ */ SHA1_IV.slice(0, 4);\n// Reusable temporary buffer\nconst MD5_W = /* @__PURE__ */ new Uint32Array(16);\n/** Internal MD5 legacy hash class. */\nexport class _MD5 extends HashMD {\n    A = MD5_IV[0] | 0;\n    B = MD5_IV[1] | 0;\n    C = MD5_IV[2] | 0;\n    D = MD5_IV[3] | 0;\n    constructor() {\n        super(64, 16, 8, true);\n    }\n    get() {\n        const { A, B, C, D } = this;\n        return [A, B, C, D];\n    }\n    set(A, B, C, D) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            MD5_W[i] = view.getUint32(offset, true);\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D } = this;\n        for (let i = 0; i < 64; i++) {\n            let F, g, s;\n            if (i < 16) {\n                F = Chi(B, C, D);\n                g = i;\n                s = [7, 12, 17, 22];\n            }\n            else if (i < 32) {\n                F = Chi(D, B, C);\n                g = (5 * i + 1) % 16;\n                s = [5, 9, 14, 20];\n            }\n            else if (i < 48) {\n                F = B ^ C ^ D;\n                g = (3 * i + 5) % 16;\n                s = [4, 11, 16, 23];\n            }\n            else {\n                F = C ^ (B | ~D);\n                g = (7 * i) % 16;\n                s = [6, 10, 15, 21];\n            }\n            F = F + A + K[i] + MD5_W[g];\n            A = D;\n            D = C;\n            C = B;\n            B = B + rotl(F, s[i % 4]);\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        this.set(A, B, C, D);\n    }\n    roundClean() {\n        clean(MD5_W);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0);\n        clean(this.buffer);\n    }\n}\n/**\n * MD5 (RFC 1321) legacy hash function. It was cryptographically broken.\n * MD5 architecture is similar to SHA1, with some differences:\n * - Reduced output length: 16 bytes (128 bit) instead of 20\n * - 64 rounds, instead of 80\n * - Little-endian: could be faster, but will require more code\n * - Non-linear index selection: huge speed-up for unroll\n * - Per round constants: more memory accesses, additional speed-up for unroll\n */\nexport const md5 = /* @__PURE__ */ createHasher(() => new _MD5());\n// RIPEMD-160\nconst Rho160 = /* @__PURE__ */ Uint8Array.from([\n    7, 4, 13, 1, 10, 6, 15, 3, 12, 0, 9, 5, 2, 14, 11, 8,\n]);\nconst Id160 = /* @__PURE__ */ (() => Uint8Array.from(new Array(16).fill(0).map((_, i) => i)))();\nconst Pi160 = /* @__PURE__ */ (() => Id160.map((i) => (9 * i + 5) % 16))();\nconst idxLR = /* @__PURE__ */ (() => {\n    const L = [Id160];\n    const R = [Pi160];\n    const res = [L, R];\n    for (let i = 0; i < 4; i++)\n        for (let j of res)\n            j.push(j[i].map((k) => Rho160[k]));\n    return res;\n})();\nconst idxL = /* @__PURE__ */ (() => idxLR[0])();\nconst idxR = /* @__PURE__ */ (() => idxLR[1])();\n// const [idxL, idxR] = idxLR;\nconst shifts160 = /* @__PURE__ */ [\n    [11, 14, 15, 12, 5, 8, 7, 9, 11, 13, 14, 15, 6, 7, 9, 8],\n    [12, 13, 11, 15, 6, 9, 9, 7, 12, 15, 11, 13, 7, 8, 7, 7],\n    [13, 15, 14, 11, 7, 7, 6, 8, 13, 14, 13, 12, 5, 5, 6, 9],\n    [14, 11, 12, 14, 8, 6, 5, 5, 15, 12, 15, 14, 9, 9, 8, 6],\n    [15, 12, 13, 13, 9, 5, 8, 6, 14, 11, 12, 11, 8, 6, 5, 5],\n].map((i) => Uint8Array.from(i));\nconst shiftsL160 = /* @__PURE__ */ idxL.map((idx, i) => idx.map((j) => shifts160[i][j]));\nconst shiftsR160 = /* @__PURE__ */ idxR.map((idx, i) => idx.map((j) => shifts160[i][j]));\nconst Kl160 = /* @__PURE__ */ Uint32Array.from([\n    0x00000000, 0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xa953fd4e,\n]);\nconst Kr160 = /* @__PURE__ */ Uint32Array.from([\n    0x50a28be6, 0x5c4dd124, 0x6d703ef3, 0x7a6d76e9, 0x00000000,\n]);\n// It's called f() in spec.\nfunction ripemd_f(group, x, y, z) {\n    if (group === 0)\n        return x ^ y ^ z;\n    if (group === 1)\n        return (x & y) | (~x & z);\n    if (group === 2)\n        return (x | ~y) ^ z;\n    if (group === 3)\n        return (x & z) | (y & ~z);\n    return x ^ (y | ~z);\n}\n// Reusable temporary buffer\nconst BUF_160 = /* @__PURE__ */ new Uint32Array(16);\nexport class _RIPEMD160 extends HashMD {\n    h0 = 0x67452301 | 0;\n    h1 = 0xefcdab89 | 0;\n    h2 = 0x98badcfe | 0;\n    h3 = 0x10325476 | 0;\n    h4 = 0xc3d2e1f0 | 0;\n    constructor() {\n        super(64, 20, 8, true);\n    }\n    get() {\n        const { h0, h1, h2, h3, h4 } = this;\n        return [h0, h1, h2, h3, h4];\n    }\n    set(h0, h1, h2, h3, h4) {\n        this.h0 = h0 | 0;\n        this.h1 = h1 | 0;\n        this.h2 = h2 | 0;\n        this.h3 = h3 | 0;\n        this.h4 = h4 | 0;\n    }\n    process(view, offset) {\n        for (let i = 0; i < 16; i++, offset += 4)\n            BUF_160[i] = view.getUint32(offset, true);\n        // prettier-ignore\n        let al = this.h0 | 0, ar = al, bl = this.h1 | 0, br = bl, cl = this.h2 | 0, cr = cl, dl = this.h3 | 0, dr = dl, el = this.h4 | 0, er = el;\n        // Instead of iterating 0 to 80, we split it into 5 groups\n        // And use the groups in constants, functions, etc. Much simpler\n        for (let group = 0; group < 5; group++) {\n            const rGroup = 4 - group;\n            const hbl = Kl160[group], hbr = Kr160[group]; // prettier-ignore\n            const rl = idxL[group], rr = idxR[group]; // prettier-ignore\n            const sl = shiftsL160[group], sr = shiftsR160[group]; // prettier-ignore\n            for (let i = 0; i < 16; i++) {\n                const tl = (rotl(al + ripemd_f(group, bl, cl, dl) + BUF_160[rl[i]] + hbl, sl[i]) + el) | 0;\n                al = el, el = dl, dl = rotl(cl, 10) | 0, cl = bl, bl = tl; // prettier-ignore\n            }\n            // 2 loops are 10% faster\n            for (let i = 0; i < 16; i++) {\n                const tr = (rotl(ar + ripemd_f(rGroup, br, cr, dr) + BUF_160[rr[i]] + hbr, sr[i]) + er) | 0;\n                ar = er, er = dr, dr = rotl(cr, 10) | 0, cr = br, br = tr; // prettier-ignore\n            }\n        }\n        // Add the compressed chunk to the current hash value\n        this.set((this.h1 + cl + dr) | 0, (this.h2 + dl + er) | 0, (this.h3 + el + ar) | 0, (this.h4 + al + br) | 0, (this.h0 + bl + cr) | 0);\n    }\n    roundClean() {\n        clean(BUF_160);\n    }\n    destroy() {\n        this.destroyed = true;\n        clean(this.buffer);\n        this.set(0, 0, 0, 0, 0);\n    }\n}\n/**\n * RIPEMD-160 - a legacy hash function from 1990s.\n * * https://homes.esat.kuleuven.be/~bosselae/ripemd160.html\n * * https://homes.esat.kuleuven.be/~bosselae/ripemd160/pdf/AB-9601/AB-9601.pdf\n */\nexport const ripemd160 = /* @__PURE__ */ createHasher(() => new _RIPEMD160());\n//# sourceMappingURL=legacy.js.map","/**\n * Internal helpers for u64. BigUint64Array is too slow as per 2025, so we implement it using Uint32Array.\n * @todo re-check https://issues.chromium.org/issues/42212588\n * @module\n */\nconst U32_MASK64 = /* @__PURE__ */ BigInt(2 ** 32 - 1);\nconst _32n = /* @__PURE__ */ BigInt(32);\nfunction fromBig(n, le = false) {\n    if (le)\n        return { h: Number(n & U32_MASK64), l: Number((n >> _32n) & U32_MASK64) };\n    return { h: Number((n >> _32n) & U32_MASK64) | 0, l: Number(n & U32_MASK64) | 0 };\n}\nfunction split(lst, le = false) {\n    const len = lst.length;\n    let Ah = new Uint32Array(len);\n    let Al = new Uint32Array(len);\n    for (let i = 0; i < len; i++) {\n        const { h, l } = fromBig(lst[i], le);\n        [Ah[i], Al[i]] = [h, l];\n    }\n    return [Ah, Al];\n}\nconst toBig = (h, l) => (BigInt(h >>> 0) << _32n) | BigInt(l >>> 0);\n// for Shift in [0, 32)\nconst shrSH = (h, _l, s) => h >>> s;\nconst shrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in [1, 32)\nconst rotrSH = (h, l, s) => (h >>> s) | (l << (32 - s));\nconst rotrSL = (h, l, s) => (h << (32 - s)) | (l >>> s);\n// Right rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotrBH = (h, l, s) => (h << (64 - s)) | (l >>> (s - 32));\nconst rotrBL = (h, l, s) => (h >>> (s - 32)) | (l << (64 - s));\n// Right rotate for shift===32 (just swaps l&h)\nconst rotr32H = (_h, l) => l;\nconst rotr32L = (h, _l) => h;\n// Left rotate for Shift in [1, 32)\nconst rotlSH = (h, l, s) => (h << s) | (l >>> (32 - s));\nconst rotlSL = (h, l, s) => (l << s) | (h >>> (32 - s));\n// Left rotate for Shift in (32, 64), NOTE: 32 is special case.\nconst rotlBH = (h, l, s) => (l << (s - 32)) | (h >>> (64 - s));\nconst rotlBL = (h, l, s) => (h << (s - 32)) | (l >>> (64 - s));\n// JS uses 32-bit signed integers for bitwise operations which means we cannot\n// simple take carry out of low bit sum by shift, we need to use division.\nfunction add(Ah, Al, Bh, Bl) {\n    const l = (Al >>> 0) + (Bl >>> 0);\n    return { h: (Ah + Bh + ((l / 2 ** 32) | 0)) | 0, l: l | 0 };\n}\n// Addition with more than 2 elements\nconst add3L = (Al, Bl, Cl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0);\nconst add3H = (low, Ah, Bh, Ch) => (Ah + Bh + Ch + ((low / 2 ** 32) | 0)) | 0;\nconst add4L = (Al, Bl, Cl, Dl) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0);\nconst add4H = (low, Ah, Bh, Ch, Dh) => (Ah + Bh + Ch + Dh + ((low / 2 ** 32) | 0)) | 0;\nconst add5L = (Al, Bl, Cl, Dl, El) => (Al >>> 0) + (Bl >>> 0) + (Cl >>> 0) + (Dl >>> 0) + (El >>> 0);\nconst add5H = (low, Ah, Bh, Ch, Dh, Eh) => (Ah + Bh + Ch + Dh + Eh + ((low / 2 ** 32) | 0)) | 0;\n// prettier-ignore\nexport { add, add3H, add3L, add4H, add4L, add5H, add5L, fromBig, rotlBH, rotlBL, rotlSH, rotlSL, rotr32H, rotr32L, rotrBH, rotrBL, rotrSH, rotrSL, shrSH, shrSL, split, toBig };\n// prettier-ignore\nconst u64 = {\n    fromBig, split, toBig,\n    shrSH, shrSL,\n    rotrSH, rotrSL, rotrBH, rotrBL,\n    rotr32H, rotr32L,\n    rotlSH, rotlSL, rotlBH, rotlBL,\n    add, add3L, add3H, add4L, add4H, add5H, add5L,\n};\nexport default u64;\n//# sourceMappingURL=_u64.js.map","/**\n * SHA2 hash function. A.k.a. sha256, sha384, sha512, sha512_224, sha512_256.\n * SHA256 is the fastest hash implementable in JS, even faster than Blake3.\n * Check out [RFC 4634](https://www.rfc-editor.org/rfc/rfc4634) and\n * [FIPS 180-4](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.180-4.pdf).\n * @module\n */\nimport { Chi, HashMD, Maj, SHA224_IV, SHA256_IV, SHA384_IV, SHA512_IV } from \"./_md.js\";\nimport * as u64 from \"./_u64.js\";\nimport { clean, createHasher, oidNist, rotr } from \"./utils.js\";\n/**\n * Round constants:\n * First 32 bits of fractional parts of the cube roots of the first 64 primes 2..311)\n */\n// prettier-ignore\nconst SHA256_K = /* @__PURE__ */ Uint32Array.from([\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2\n]);\n/** Reusable temporary buffer. \"W\" comes straight from spec. */\nconst SHA256_W = /* @__PURE__ */ new Uint32Array(64);\n/** Internal 32-byte base SHA2 hash class. */\nclass SHA2_32B extends HashMD {\n    constructor(outputLen) {\n        super(64, outputLen, 8, false);\n    }\n    get() {\n        const { A, B, C, D, E, F, G, H } = this;\n        return [A, B, C, D, E, F, G, H];\n    }\n    // prettier-ignore\n    set(A, B, C, D, E, F, G, H) {\n        this.A = A | 0;\n        this.B = B | 0;\n        this.C = C | 0;\n        this.D = D | 0;\n        this.E = E | 0;\n        this.F = F | 0;\n        this.G = G | 0;\n        this.H = H | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 48 words w[16..63] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4)\n            SHA256_W[i] = view.getUint32(offset, false);\n        for (let i = 16; i < 64; i++) {\n            const W15 = SHA256_W[i - 15];\n            const W2 = SHA256_W[i - 2];\n            const s0 = rotr(W15, 7) ^ rotr(W15, 18) ^ (W15 >>> 3);\n            const s1 = rotr(W2, 17) ^ rotr(W2, 19) ^ (W2 >>> 10);\n            SHA256_W[i] = (s1 + SHA256_W[i - 7] + s0 + SHA256_W[i - 16]) | 0;\n        }\n        // Compression function main loop, 64 rounds\n        let { A, B, C, D, E, F, G, H } = this;\n        for (let i = 0; i < 64; i++) {\n            const sigma1 = rotr(E, 6) ^ rotr(E, 11) ^ rotr(E, 25);\n            const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const sigma0 = rotr(A, 2) ^ rotr(A, 13) ^ rotr(A, 22);\n            const T2 = (sigma0 + Maj(A, B, C)) | 0;\n            H = G;\n            G = F;\n            F = E;\n            E = (D + T1) | 0;\n            D = C;\n            C = B;\n            B = A;\n            A = (T1 + T2) | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        A = (A + this.A) | 0;\n        B = (B + this.B) | 0;\n        C = (C + this.C) | 0;\n        D = (D + this.D) | 0;\n        E = (E + this.E) | 0;\n        F = (F + this.F) | 0;\n        G = (G + this.G) | 0;\n        H = (H + this.H) | 0;\n        this.set(A, B, C, D, E, F, G, H);\n    }\n    roundClean() {\n        clean(SHA256_W);\n    }\n    destroy() {\n        this.set(0, 0, 0, 0, 0, 0, 0, 0);\n        clean(this.buffer);\n    }\n}\n/** Internal SHA2-256 hash class. */\nexport class _SHA256 extends SHA2_32B {\n    // We cannot use array here since array allows indexing by variable\n    // which means optimizer/compiler cannot use registers.\n    A = SHA256_IV[0] | 0;\n    B = SHA256_IV[1] | 0;\n    C = SHA256_IV[2] | 0;\n    D = SHA256_IV[3] | 0;\n    E = SHA256_IV[4] | 0;\n    F = SHA256_IV[5] | 0;\n    G = SHA256_IV[6] | 0;\n    H = SHA256_IV[7] | 0;\n    constructor() {\n        super(32);\n    }\n}\n/** Internal SHA2-224 hash class. */\nexport class _SHA224 extends SHA2_32B {\n    A = SHA224_IV[0] | 0;\n    B = SHA224_IV[1] | 0;\n    C = SHA224_IV[2] | 0;\n    D = SHA224_IV[3] | 0;\n    E = SHA224_IV[4] | 0;\n    F = SHA224_IV[5] | 0;\n    G = SHA224_IV[6] | 0;\n    H = SHA224_IV[7] | 0;\n    constructor() {\n        super(28);\n    }\n}\n// SHA2-512 is slower than sha256 in js because u64 operations are slow.\n// Round contants\n// First 32 bits of the fractional parts of the cube roots of the first 80 primes 2..409\n// prettier-ignore\nconst K512 = /* @__PURE__ */ (() => u64.split([\n    '0x428a2f98d728ae22', '0x7137449123ef65cd', '0xb5c0fbcfec4d3b2f', '0xe9b5dba58189dbbc',\n    '0x3956c25bf348b538', '0x59f111f1b605d019', '0x923f82a4af194f9b', '0xab1c5ed5da6d8118',\n    '0xd807aa98a3030242', '0x12835b0145706fbe', '0x243185be4ee4b28c', '0x550c7dc3d5ffb4e2',\n    '0x72be5d74f27b896f', '0x80deb1fe3b1696b1', '0x9bdc06a725c71235', '0xc19bf174cf692694',\n    '0xe49b69c19ef14ad2', '0xefbe4786384f25e3', '0x0fc19dc68b8cd5b5', '0x240ca1cc77ac9c65',\n    '0x2de92c6f592b0275', '0x4a7484aa6ea6e483', '0x5cb0a9dcbd41fbd4', '0x76f988da831153b5',\n    '0x983e5152ee66dfab', '0xa831c66d2db43210', '0xb00327c898fb213f', '0xbf597fc7beef0ee4',\n    '0xc6e00bf33da88fc2', '0xd5a79147930aa725', '0x06ca6351e003826f', '0x142929670a0e6e70',\n    '0x27b70a8546d22ffc', '0x2e1b21385c26c926', '0x4d2c6dfc5ac42aed', '0x53380d139d95b3df',\n    '0x650a73548baf63de', '0x766a0abb3c77b2a8', '0x81c2c92e47edaee6', '0x92722c851482353b',\n    '0xa2bfe8a14cf10364', '0xa81a664bbc423001', '0xc24b8b70d0f89791', '0xc76c51a30654be30',\n    '0xd192e819d6ef5218', '0xd69906245565a910', '0xf40e35855771202a', '0x106aa07032bbd1b8',\n    '0x19a4c116b8d2d0c8', '0x1e376c085141ab53', '0x2748774cdf8eeb99', '0x34b0bcb5e19b48a8',\n    '0x391c0cb3c5c95a63', '0x4ed8aa4ae3418acb', '0x5b9cca4f7763e373', '0x682e6ff3d6b2b8a3',\n    '0x748f82ee5defb2fc', '0x78a5636f43172f60', '0x84c87814a1f0ab72', '0x8cc702081a6439ec',\n    '0x90befffa23631e28', '0xa4506cebde82bde9', '0xbef9a3f7b2c67915', '0xc67178f2e372532b',\n    '0xca273eceea26619c', '0xd186b8c721c0c207', '0xeada7dd6cde0eb1e', '0xf57d4f7fee6ed178',\n    '0x06f067aa72176fba', '0x0a637dc5a2c898a6', '0x113f9804bef90dae', '0x1b710b35131c471b',\n    '0x28db77f523047d84', '0x32caab7b40c72493', '0x3c9ebe0a15c9bebc', '0x431d67c49c100d4c',\n    '0x4cc5d4becb3e42b6', '0x597f299cfc657e2a', '0x5fcb6fab3ad6faec', '0x6c44198c4a475817'\n].map(n => BigInt(n))))();\nconst SHA512_Kh = /* @__PURE__ */ (() => K512[0])();\nconst SHA512_Kl = /* @__PURE__ */ (() => K512[1])();\n// Reusable temporary buffers\nconst SHA512_W_H = /* @__PURE__ */ new Uint32Array(80);\nconst SHA512_W_L = /* @__PURE__ */ new Uint32Array(80);\n/** Internal 64-byte base SHA2 hash class. */\nclass SHA2_64B extends HashMD {\n    constructor(outputLen) {\n        super(128, outputLen, 16, false);\n    }\n    // prettier-ignore\n    get() {\n        const { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        return [Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl];\n    }\n    // prettier-ignore\n    set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl) {\n        this.Ah = Ah | 0;\n        this.Al = Al | 0;\n        this.Bh = Bh | 0;\n        this.Bl = Bl | 0;\n        this.Ch = Ch | 0;\n        this.Cl = Cl | 0;\n        this.Dh = Dh | 0;\n        this.Dl = Dl | 0;\n        this.Eh = Eh | 0;\n        this.El = El | 0;\n        this.Fh = Fh | 0;\n        this.Fl = Fl | 0;\n        this.Gh = Gh | 0;\n        this.Gl = Gl | 0;\n        this.Hh = Hh | 0;\n        this.Hl = Hl | 0;\n    }\n    process(view, offset) {\n        // Extend the first 16 words into the remaining 64 words w[16..79] of the message schedule array\n        for (let i = 0; i < 16; i++, offset += 4) {\n            SHA512_W_H[i] = view.getUint32(offset);\n            SHA512_W_L[i] = view.getUint32((offset += 4));\n        }\n        for (let i = 16; i < 80; i++) {\n            // s0 := (w[i-15] rightrotate 1) xor (w[i-15] rightrotate 8) xor (w[i-15] rightshift 7)\n            const W15h = SHA512_W_H[i - 15] | 0;\n            const W15l = SHA512_W_L[i - 15] | 0;\n            const s0h = u64.rotrSH(W15h, W15l, 1) ^ u64.rotrSH(W15h, W15l, 8) ^ u64.shrSH(W15h, W15l, 7);\n            const s0l = u64.rotrSL(W15h, W15l, 1) ^ u64.rotrSL(W15h, W15l, 8) ^ u64.shrSL(W15h, W15l, 7);\n            // s1 := (w[i-2] rightrotate 19) xor (w[i-2] rightrotate 61) xor (w[i-2] rightshift 6)\n            const W2h = SHA512_W_H[i - 2] | 0;\n            const W2l = SHA512_W_L[i - 2] | 0;\n            const s1h = u64.rotrSH(W2h, W2l, 19) ^ u64.rotrBH(W2h, W2l, 61) ^ u64.shrSH(W2h, W2l, 6);\n            const s1l = u64.rotrSL(W2h, W2l, 19) ^ u64.rotrBL(W2h, W2l, 61) ^ u64.shrSL(W2h, W2l, 6);\n            // SHA256_W[i] = s0 + s1 + SHA256_W[i - 7] + SHA256_W[i - 16];\n            const SUMl = u64.add4L(s0l, s1l, SHA512_W_L[i - 7], SHA512_W_L[i - 16]);\n            const SUMh = u64.add4H(SUMl, s0h, s1h, SHA512_W_H[i - 7], SHA512_W_H[i - 16]);\n            SHA512_W_H[i] = SUMh | 0;\n            SHA512_W_L[i] = SUMl | 0;\n        }\n        let { Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl } = this;\n        // Compression function main loop, 80 rounds\n        for (let i = 0; i < 80; i++) {\n            // S1 := (e rightrotate 14) xor (e rightrotate 18) xor (e rightrotate 41)\n            const sigma1h = u64.rotrSH(Eh, El, 14) ^ u64.rotrSH(Eh, El, 18) ^ u64.rotrBH(Eh, El, 41);\n            const sigma1l = u64.rotrSL(Eh, El, 14) ^ u64.rotrSL(Eh, El, 18) ^ u64.rotrBL(Eh, El, 41);\n            //const T1 = (H + sigma1 + Chi(E, F, G) + SHA256_K[i] + SHA256_W[i]) | 0;\n            const CHIh = (Eh & Fh) ^ (~Eh & Gh);\n            const CHIl = (El & Fl) ^ (~El & Gl);\n            // T1 = H + sigma1 + Chi(E, F, G) + SHA512_K[i] + SHA512_W[i]\n            // prettier-ignore\n            const T1ll = u64.add5L(Hl, sigma1l, CHIl, SHA512_Kl[i], SHA512_W_L[i]);\n            const T1h = u64.add5H(T1ll, Hh, sigma1h, CHIh, SHA512_Kh[i], SHA512_W_H[i]);\n            const T1l = T1ll | 0;\n            // S0 := (a rightrotate 28) xor (a rightrotate 34) xor (a rightrotate 39)\n            const sigma0h = u64.rotrSH(Ah, Al, 28) ^ u64.rotrBH(Ah, Al, 34) ^ u64.rotrBH(Ah, Al, 39);\n            const sigma0l = u64.rotrSL(Ah, Al, 28) ^ u64.rotrBL(Ah, Al, 34) ^ u64.rotrBL(Ah, Al, 39);\n            const MAJh = (Ah & Bh) ^ (Ah & Ch) ^ (Bh & Ch);\n            const MAJl = (Al & Bl) ^ (Al & Cl) ^ (Bl & Cl);\n            Hh = Gh | 0;\n            Hl = Gl | 0;\n            Gh = Fh | 0;\n            Gl = Fl | 0;\n            Fh = Eh | 0;\n            Fl = El | 0;\n            ({ h: Eh, l: El } = u64.add(Dh | 0, Dl | 0, T1h | 0, T1l | 0));\n            Dh = Ch | 0;\n            Dl = Cl | 0;\n            Ch = Bh | 0;\n            Cl = Bl | 0;\n            Bh = Ah | 0;\n            Bl = Al | 0;\n            const All = u64.add3L(T1l, sigma0l, MAJl);\n            Ah = u64.add3H(All, T1h, sigma0h, MAJh);\n            Al = All | 0;\n        }\n        // Add the compressed chunk to the current hash value\n        ({ h: Ah, l: Al } = u64.add(this.Ah | 0, this.Al | 0, Ah | 0, Al | 0));\n        ({ h: Bh, l: Bl } = u64.add(this.Bh | 0, this.Bl | 0, Bh | 0, Bl | 0));\n        ({ h: Ch, l: Cl } = u64.add(this.Ch | 0, this.Cl | 0, Ch | 0, Cl | 0));\n        ({ h: Dh, l: Dl } = u64.add(this.Dh | 0, this.Dl | 0, Dh | 0, Dl | 0));\n        ({ h: Eh, l: El } = u64.add(this.Eh | 0, this.El | 0, Eh | 0, El | 0));\n        ({ h: Fh, l: Fl } = u64.add(this.Fh | 0, this.Fl | 0, Fh | 0, Fl | 0));\n        ({ h: Gh, l: Gl } = u64.add(this.Gh | 0, this.Gl | 0, Gh | 0, Gl | 0));\n        ({ h: Hh, l: Hl } = u64.add(this.Hh | 0, this.Hl | 0, Hh | 0, Hl | 0));\n        this.set(Ah, Al, Bh, Bl, Ch, Cl, Dh, Dl, Eh, El, Fh, Fl, Gh, Gl, Hh, Hl);\n    }\n    roundClean() {\n        clean(SHA512_W_H, SHA512_W_L);\n    }\n    destroy() {\n        clean(this.buffer);\n        this.set(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0);\n    }\n}\n/** Internal SHA2-512 hash class. */\nexport class _SHA512 extends SHA2_64B {\n    Ah = SHA512_IV[0] | 0;\n    Al = SHA512_IV[1] | 0;\n    Bh = SHA512_IV[2] | 0;\n    Bl = SHA512_IV[3] | 0;\n    Ch = SHA512_IV[4] | 0;\n    Cl = SHA512_IV[5] | 0;\n    Dh = SHA512_IV[6] | 0;\n    Dl = SHA512_IV[7] | 0;\n    Eh = SHA512_IV[8] | 0;\n    El = SHA512_IV[9] | 0;\n    Fh = SHA512_IV[10] | 0;\n    Fl = SHA512_IV[11] | 0;\n    Gh = SHA512_IV[12] | 0;\n    Gl = SHA512_IV[13] | 0;\n    Hh = SHA512_IV[14] | 0;\n    Hl = SHA512_IV[15] | 0;\n    constructor() {\n        super(64);\n    }\n}\n/** Internal SHA2-384 hash class. */\nexport class _SHA384 extends SHA2_64B {\n    Ah = SHA384_IV[0] | 0;\n    Al = SHA384_IV[1] | 0;\n    Bh = SHA384_IV[2] | 0;\n    Bl = SHA384_IV[3] | 0;\n    Ch = SHA384_IV[4] | 0;\n    Cl = SHA384_IV[5] | 0;\n    Dh = SHA384_IV[6] | 0;\n    Dl = SHA384_IV[7] | 0;\n    Eh = SHA384_IV[8] | 0;\n    El = SHA384_IV[9] | 0;\n    Fh = SHA384_IV[10] | 0;\n    Fl = SHA384_IV[11] | 0;\n    Gh = SHA384_IV[12] | 0;\n    Gl = SHA384_IV[13] | 0;\n    Hh = SHA384_IV[14] | 0;\n    Hl = SHA384_IV[15] | 0;\n    constructor() {\n        super(48);\n    }\n}\n/**\n * Truncated SHA512/256 and SHA512/224.\n * SHA512_IV is XORed with 0xa5a5a5a5a5a5a5a5, then used as \"intermediary\" IV of SHA512/t.\n * Then t hashes string to produce result IV.\n * See `test/misc/sha2-gen-iv.js`.\n */\n/** SHA512/224 IV */\nconst T224_IV = /* @__PURE__ */ Uint32Array.from([\n    0x8c3d37c8, 0x19544da2, 0x73e19966, 0x89dcd4d6, 0x1dfab7ae, 0x32ff9c82, 0x679dd514, 0x582f9fcf,\n    0x0f6d2b69, 0x7bd44da8, 0x77e36f73, 0x04c48942, 0x3f9d85a8, 0x6a1d36c8, 0x1112e6ad, 0x91d692a1,\n]);\n/** SHA512/256 IV */\nconst T256_IV = /* @__PURE__ */ Uint32Array.from([\n    0x22312194, 0xfc2bf72c, 0x9f555fa3, 0xc84c64c2, 0x2393b86b, 0x6f53b151, 0x96387719, 0x5940eabd,\n    0x96283ee2, 0xa88effe3, 0xbe5e1e25, 0x53863992, 0x2b0199fc, 0x2c85b8aa, 0x0eb72ddc, 0x81c52ca2,\n]);\n/** Internal SHA2-512/224 hash class. */\nexport class _SHA512_224 extends SHA2_64B {\n    Ah = T224_IV[0] | 0;\n    Al = T224_IV[1] | 0;\n    Bh = T224_IV[2] | 0;\n    Bl = T224_IV[3] | 0;\n    Ch = T224_IV[4] | 0;\n    Cl = T224_IV[5] | 0;\n    Dh = T224_IV[6] | 0;\n    Dl = T224_IV[7] | 0;\n    Eh = T224_IV[8] | 0;\n    El = T224_IV[9] | 0;\n    Fh = T224_IV[10] | 0;\n    Fl = T224_IV[11] | 0;\n    Gh = T224_IV[12] | 0;\n    Gl = T224_IV[13] | 0;\n    Hh = T224_IV[14] | 0;\n    Hl = T224_IV[15] | 0;\n    constructor() {\n        super(28);\n    }\n}\n/** Internal SHA2-512/256 hash class. */\nexport class _SHA512_256 extends SHA2_64B {\n    Ah = T256_IV[0] | 0;\n    Al = T256_IV[1] | 0;\n    Bh = T256_IV[2] | 0;\n    Bl = T256_IV[3] | 0;\n    Ch = T256_IV[4] | 0;\n    Cl = T256_IV[5] | 0;\n    Dh = T256_IV[6] | 0;\n    Dl = T256_IV[7] | 0;\n    Eh = T256_IV[8] | 0;\n    El = T256_IV[9] | 0;\n    Fh = T256_IV[10] | 0;\n    Fl = T256_IV[11] | 0;\n    Gh = T256_IV[12] | 0;\n    Gl = T256_IV[13] | 0;\n    Hh = T256_IV[14] | 0;\n    Hl = T256_IV[15] | 0;\n    constructor() {\n        super(32);\n    }\n}\n/**\n * SHA2-256 hash function from RFC 4634. In JS it's the fastest: even faster than Blake3. Some info:\n *\n * - Trying 2^128 hashes would get 50% chance of collision, using birthday attack.\n * - BTC network is doing 2^70 hashes/sec (2^95 hashes/year) as per 2025.\n * - Each sha256 hash is executing 2^18 bit operations.\n * - Good 2024 ASICs can do 200Th/sec with 3500 watts of power, corresponding to 2^36 hashes/joule.\n */\nexport const sha256 = /* @__PURE__ */ createHasher(() => new _SHA256(), \n/* @__PURE__ */ oidNist(0x01));\n/** SHA2-224 hash function from RFC 4634 */\nexport const sha224 = /* @__PURE__ */ createHasher(() => new _SHA224(), \n/* @__PURE__ */ oidNist(0x04));\n/** SHA2-512 hash function from RFC 4634. */\nexport const sha512 = /* @__PURE__ */ createHasher(() => new _SHA512(), \n/* @__PURE__ */ oidNist(0x03));\n/** SHA2-384 hash function from RFC 4634. */\nexport const sha384 = /* @__PURE__ */ createHasher(() => new _SHA384(), \n/* @__PURE__ */ oidNist(0x02));\n/**\n * SHA2-512/256 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_256 = /* @__PURE__ */ createHasher(() => new _SHA512_256(), \n/* @__PURE__ */ oidNist(0x06));\n/**\n * SHA2-512/224 \"truncated\" hash function, with improved resistance to length extension attacks.\n * See the paper on [truncated SHA512](https://eprint.iacr.org/2010/548.pdf).\n */\nexport const sha512_224 = /* @__PURE__ */ createHasher(() => new _SHA512_224(), \n/* @__PURE__ */ oidNist(0x05));\n//# sourceMappingURL=sha2.js.map","/**\n * SHA3 (keccak) hash function, based on a new \"Sponge function\" design.\n * Different from older hashes, the internal state is bigger than output size.\n *\n * Check out [FIPS-202](https://nvlpubs.nist.gov/nistpubs/FIPS/NIST.FIPS.202.pdf),\n * [Website](https://keccak.team/keccak.html),\n * [the differences between SHA-3 and Keccak](https://crypto.stackexchange.com/questions/15727/what-are-the-key-differences-between-the-draft-sha-3-standard-and-the-keccak-sub).\n *\n * Check out `sha3-addons` module for cSHAKE, k12, and others.\n * @module\n */\nimport { rotlBH, rotlBL, rotlSH, rotlSL, split } from \"./_u64.js\";\n// prettier-ignore\nimport { abytes, aexists, anumber, aoutput, clean, createHasher, oidNist, swap32IfBE, u32 } from \"./utils.js\";\n// No __PURE__ annotations in sha3 header:\n// EVERYTHING is in fact used on every export.\n// Various per round constants calculations\nconst _0n = BigInt(0);\nconst _1n = BigInt(1);\nconst _2n = BigInt(2);\nconst _7n = BigInt(7);\nconst _256n = BigInt(256);\nconst _0x71n = BigInt(0x71);\nconst SHA3_PI = [];\nconst SHA3_ROTL = [];\nconst _SHA3_IOTA = []; // no pure annotation: var is always used\nfor (let round = 0, R = _1n, x = 1, y = 0; round < 24; round++) {\n    // Pi\n    [x, y] = [y, (2 * x + 3 * y) % 5];\n    SHA3_PI.push(2 * (5 * y + x));\n    // Rotational\n    SHA3_ROTL.push((((round + 1) * (round + 2)) / 2) % 64);\n    // Iota\n    let t = _0n;\n    for (let j = 0; j < 7; j++) {\n        R = ((R << _1n) ^ ((R >> _7n) * _0x71n)) % _256n;\n        if (R & _2n)\n            t ^= _1n << ((_1n << BigInt(j)) - _1n);\n    }\n    _SHA3_IOTA.push(t);\n}\nconst IOTAS = split(_SHA3_IOTA, true);\nconst SHA3_IOTA_H = IOTAS[0];\nconst SHA3_IOTA_L = IOTAS[1];\n// Left rotation (without 0, 32, 64)\nconst rotlH = (h, l, s) => (s > 32 ? rotlBH(h, l, s) : rotlSH(h, l, s));\nconst rotlL = (h, l, s) => (s > 32 ? rotlBL(h, l, s) : rotlSL(h, l, s));\n/** `keccakf1600` internal function, additionally allows to adjust round count. */\nexport function keccakP(s, rounds = 24) {\n    const B = new Uint32Array(5 * 2);\n    // NOTE: all indices are x2 since we store state as u32 instead of u64 (bigints to slow in js)\n    for (let round = 24 - rounds; round < 24; round++) {\n        // Theta \n        for (let x = 0; x < 10; x++)\n            B[x] = s[x] ^ s[x + 10] ^ s[x + 20] ^ s[x + 30] ^ s[x + 40];\n        for (let x = 0; x < 10; x += 2) {\n            const idx1 = (x + 8) % 10;\n            const idx0 = (x + 2) % 10;\n            const B0 = B[idx0];\n            const B1 = B[idx0 + 1];\n            const Th = rotlH(B0, B1, 1) ^ B[idx1];\n            const Tl = rotlL(B0, B1, 1) ^ B[idx1 + 1];\n            for (let y = 0; y < 50; y += 10) {\n                s[x + y] ^= Th;\n                s[x + y + 1] ^= Tl;\n            }\n        }\n        // Rho () and Pi ()\n        let curH = s[2];\n        let curL = s[3];\n        for (let t = 0; t < 24; t++) {\n            const shift = SHA3_ROTL[t];\n            const Th = rotlH(curH, curL, shift);\n            const Tl = rotlL(curH, curL, shift);\n            const PI = SHA3_PI[t];\n            curH = s[PI];\n            curL = s[PI + 1];\n            s[PI] = Th;\n            s[PI + 1] = Tl;\n        }\n        // Chi ()\n        for (let y = 0; y < 50; y += 10) {\n            for (let x = 0; x < 10; x++)\n                B[x] = s[y + x];\n            for (let x = 0; x < 10; x++)\n                s[y + x] ^= ~B[(x + 2) % 10] & B[(x + 4) % 10];\n        }\n        // Iota ()\n        s[0] ^= SHA3_IOTA_H[round];\n        s[1] ^= SHA3_IOTA_L[round];\n    }\n    clean(B);\n}\n/** Keccak sponge function. */\nexport class Keccak {\n    state;\n    pos = 0;\n    posOut = 0;\n    finished = false;\n    state32;\n    destroyed = false;\n    blockLen;\n    suffix;\n    outputLen;\n    enableXOF = false;\n    rounds;\n    // NOTE: we accept arguments in bytes instead of bits here.\n    constructor(blockLen, suffix, outputLen, enableXOF = false, rounds = 24) {\n        this.blockLen = blockLen;\n        this.suffix = suffix;\n        this.outputLen = outputLen;\n        this.enableXOF = enableXOF;\n        this.rounds = rounds;\n        // Can be passed from user as dkLen\n        anumber(outputLen, 'outputLen');\n        // 1600 = 5x5 matrix of 64bit.  1600 bits === 200 bytes\n        // 0 < blockLen < 200\n        if (!(0 < blockLen && blockLen < 200))\n            throw new Error('only keccak-f1600 function is supported');\n        this.state = new Uint8Array(200);\n        this.state32 = u32(this.state);\n    }\n    clone() {\n        return this._cloneInto();\n    }\n    keccak() {\n        swap32IfBE(this.state32);\n        keccakP(this.state32, this.rounds);\n        swap32IfBE(this.state32);\n        this.posOut = 0;\n        this.pos = 0;\n    }\n    update(data) {\n        aexists(this);\n        abytes(data);\n        const { blockLen, state } = this;\n        const len = data.length;\n        for (let pos = 0; pos < len;) {\n            const take = Math.min(blockLen - this.pos, len - pos);\n            for (let i = 0; i < take; i++)\n                state[this.pos++] ^= data[pos++];\n            if (this.pos === blockLen)\n                this.keccak();\n        }\n        return this;\n    }\n    finish() {\n        if (this.finished)\n            return;\n        this.finished = true;\n        const { state, suffix, pos, blockLen } = this;\n        // Do the padding\n        state[pos] ^= suffix;\n        if ((suffix & 0x80) !== 0 && pos === blockLen - 1)\n            this.keccak();\n        state[blockLen - 1] ^= 0x80;\n        this.keccak();\n    }\n    writeInto(out) {\n        aexists(this, false);\n        abytes(out);\n        this.finish();\n        const bufferOut = this.state;\n        const { blockLen } = this;\n        for (let pos = 0, len = out.length; pos < len;) {\n            if (this.posOut >= blockLen)\n                this.keccak();\n            const take = Math.min(blockLen - this.posOut, len - pos);\n            out.set(bufferOut.subarray(this.posOut, this.posOut + take), pos);\n            this.posOut += take;\n            pos += take;\n        }\n        return out;\n    }\n    xofInto(out) {\n        // Sha3/Keccak usage with XOF is probably mistake, only SHAKE instances can do XOF\n        if (!this.enableXOF)\n            throw new Error('XOF is not possible for this instance');\n        return this.writeInto(out);\n    }\n    xof(bytes) {\n        anumber(bytes);\n        return this.xofInto(new Uint8Array(bytes));\n    }\n    digestInto(out) {\n        aoutput(out, this);\n        if (this.finished)\n            throw new Error('digest() was already called');\n        this.writeInto(out);\n        this.destroy();\n        return out;\n    }\n    digest() {\n        return this.digestInto(new Uint8Array(this.outputLen));\n    }\n    destroy() {\n        this.destroyed = true;\n        clean(this.state);\n    }\n    _cloneInto(to) {\n        const { blockLen, suffix, outputLen, rounds, enableXOF } = this;\n        to ||= new Keccak(blockLen, suffix, outputLen, enableXOF, rounds);\n        to.state32.set(this.state32);\n        to.pos = this.pos;\n        to.posOut = this.posOut;\n        to.finished = this.finished;\n        to.rounds = rounds;\n        // Suffix can change in cSHAKE\n        to.suffix = suffix;\n        to.outputLen = outputLen;\n        to.enableXOF = enableXOF;\n        to.destroyed = this.destroyed;\n        return to;\n    }\n}\nconst genKeccak = (suffix, blockLen, outputLen, info = {}) => createHasher(() => new Keccak(blockLen, suffix, outputLen), info);\n/** SHA3-224 hash function. */\nexport const sha3_224 = /* @__PURE__ */ genKeccak(0x06, 144, 28, \n/* @__PURE__ */ oidNist(0x07));\n/** SHA3-256 hash function. Different from keccak-256. */\nexport const sha3_256 = /* @__PURE__ */ genKeccak(0x06, 136, 32, \n/* @__PURE__ */ oidNist(0x08));\n/** SHA3-384 hash function. */\nexport const sha3_384 = /* @__PURE__ */ genKeccak(0x06, 104, 48, \n/* @__PURE__ */ oidNist(0x09));\n/** SHA3-512 hash function. */\nexport const sha3_512 = /* @__PURE__ */ genKeccak(0x06, 72, 64, \n/* @__PURE__ */ oidNist(0x0a));\n/** keccak-224 hash function. */\nexport const keccak_224 = /* @__PURE__ */ genKeccak(0x01, 144, 28);\n/** keccak-256 hash function. Different from SHA3-256. */\nexport const keccak_256 = /* @__PURE__ */ genKeccak(0x01, 136, 32);\n/** keccak-384 hash function. */\nexport const keccak_384 = /* @__PURE__ */ genKeccak(0x01, 104, 48);\n/** keccak-512 hash function. */\nexport const keccak_512 = /* @__PURE__ */ genKeccak(0x01, 72, 64);\nconst genShake = (suffix, blockLen, outputLen, info = {}) => createHasher((opts = {}) => new Keccak(blockLen, suffix, opts.dkLen === undefined ? outputLen : opts.dkLen, true), info);\n/** SHAKE128 XOF with 128-bit security. */\nexport const shake128 = \n/* @__PURE__ */\ngenShake(0x1f, 168, 16, /* @__PURE__ */ oidNist(0x0b));\n/** SHAKE256 XOF with 256-bit security. */\nexport const shake256 = \n/* @__PURE__ */\ngenShake(0x1f, 136, 32, /* @__PURE__ */ oidNist(0x0c));\n/** SHAKE128 XOF with 256-bit output (NIST version). */\nexport const shake128_32 = \n/* @__PURE__ */\ngenShake(0x1f, 168, 32, /* @__PURE__ */ oidNist(0x0b));\n/** SHAKE256 XOF with 512-bit output (NIST version). */\nexport const shake256_64 = \n/* @__PURE__ */\ngenShake(0x1f, 136, 64, /* @__PURE__ */ oidNist(0x0c));\n//# sourceMappingURL=sha3.js.map","/**\n * \"globalThis\" ponyfill.\n * @see [A horrifying globalThis polyfill in universal JavaScript](https://mathiasbynens.be/notes/globalthis)\n * @type {Object.<string, *>}\n */\nconst globalScope = (() => {\n  if (typeof globalThis === \"object\") return globalThis;\n  else {\n    Object.defineProperty(Object.prototype, \"__GLOBALTHIS__\", {\n      get() {\n        return this;\n      },\n      configurable: true,\n    });\n    try {\n      // @ts-expect-error\n      // eslint-disable-next-line no-undef\n      if (typeof __GLOBALTHIS__ !== \"undefined\") return __GLOBALTHIS__;\n    } finally {\n      // @ts-expect-error\n      delete Object.prototype.__GLOBALTHIS__;\n    }\n  }\n\n  // Still unable to determine \"globalThis\", fall back to a naive method.\n  if (typeof self !== \"undefined\") return self;\n  else if (typeof window !== \"undefined\") return window;\n  else if (typeof global !== \"undefined\") return global;\n\n  return undefined;\n})();\n\nexport { globalScope };\n","import * as crypto from \"node:crypto\";\nimport { hmac } from \"@noble/hashes/hmac.js\";\nimport { sha1 } from \"@noble/hashes/legacy.js\";\nimport { sha224, sha256, sha384, sha512 } from \"@noble/hashes/sha2.js\";\nimport { sha3_224, sha3_256, sha3_384, sha3_512 } from \"@noble/hashes/sha3.js\";\nimport { globalScope } from \"../global-scope.js\";\n\n/**\n * @noble/hashes hash functions.\n * @type {Object.<string, sha1|sha224|sha256|sha384|sha512|sha3_224|sha3_256|sha3_384|sha3_512>}\n */\nconst nobleHashes = {\n  SHA1: sha1,\n  SHA224: sha224,\n  SHA256: sha256,\n  SHA384: sha384,\n  SHA512: sha512,\n  \"SHA3-224\": sha3_224,\n  \"SHA3-256\": sha3_256,\n  \"SHA3-384\": sha3_384,\n  \"SHA3-512\": sha3_512,\n};\n\n/**\n * Canonicalizes a hash algorithm name.\n * @param {string} algorithm Hash algorithm name.\n * @returns {\"SHA1\"|\"SHA224\"|\"SHA256\"|\"SHA384\"|\"SHA512\"|\"SHA3-224\"|\"SHA3-256\"|\"SHA3-384\"|\"SHA3-512\"} Canonicalized hash algorithm name.\n */\nconst canonicalizeAlgorithm = (algorithm) => {\n  switch (true) {\n    case /^(?:SHA-?1|SSL3-SHA1)$/i.test(algorithm):\n      return \"SHA1\";\n    case /^SHA(?:2?-)?224$/i.test(algorithm):\n      return \"SHA224\";\n    case /^SHA(?:2?-)?256$/i.test(algorithm):\n      return \"SHA256\";\n    case /^SHA(?:2?-)?384$/i.test(algorithm):\n      return \"SHA384\";\n    case /^SHA(?:2?-)?512$/i.test(algorithm):\n      return \"SHA512\";\n    case /^SHA3-224$/i.test(algorithm):\n      return \"SHA3-224\";\n    case /^SHA3-256$/i.test(algorithm):\n      return \"SHA3-256\";\n    case /^SHA3-384$/i.test(algorithm):\n      return \"SHA3-384\";\n    case /^SHA3-512$/i.test(algorithm):\n      return \"SHA3-512\";\n    default:\n      throw new TypeError(`Unknown hash algorithm: ${algorithm}`);\n  }\n};\n\n/**\n * Calculates an HMAC digest.\n * @param {string} algorithm Algorithm.\n * @param {Uint8Array} key Key.\n * @param {Uint8Array} message Message.\n * @returns {Uint8Array} Digest.\n */\nconst hmacDigest = (algorithm, key, message) => {\n  if (crypto?.createHmac) {\n    const hmac = crypto.createHmac(algorithm, globalScope.Buffer.from(key));\n    hmac.update(globalScope.Buffer.from(message));\n    return hmac.digest();\n  } else if (hmac) {\n    const hash = nobleHashes[algorithm] ?? nobleHashes[canonicalizeAlgorithm(algorithm)];\n    return hmac(hash, key, message);\n  } else {\n    throw new Error(\"Missing HMAC function\");\n  }\n};\n\nexport { canonicalizeAlgorithm, hmacDigest };\n","/**\n * RFC 4648 base32 alphabet without pad.\n * @type {string}\n */\nconst ALPHABET = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567\";\n\n/**\n * Converts a base32 string to an Uint8Array (RFC 4648).\n * @see [LinusU/base32-decode](https://github.com/LinusU/base32-decode)\n * @param {string} str Base32 string.\n * @returns {Uint8Array} Uint8Array.\n */\nconst base32Decode = (str) => {\n  // Remove spaces (although they are not allowed by the spec, some issuers add them for readability).\n  str = str.replace(/ /g, \"\");\n\n  // Canonicalize to all upper case and remove padding if it exists.\n  let end = str.length;\n  while (str[end - 1] === \"=\") --end;\n  str = (end < str.length ? str.substring(0, end) : str).toUpperCase();\n\n  const buf = new ArrayBuffer(((str.length * 5) / 8) | 0);\n  const arr = new Uint8Array(buf);\n  let bits = 0;\n  let value = 0;\n  let index = 0;\n\n  for (let i = 0; i < str.length; i++) {\n    const idx = ALPHABET.indexOf(str[i]);\n    if (idx === -1) throw new TypeError(`Invalid character found: ${str[i]}`);\n\n    value = (value << 5) | idx;\n    bits += 5;\n\n    if (bits >= 8) {\n      bits -= 8;\n      arr[index++] = value >>> bits;\n    }\n  }\n\n  return arr;\n};\n\n/**\n * Converts an Uint8Array to a base32 string (RFC 4648).\n * @see [LinusU/base32-encode](https://github.com/LinusU/base32-encode)\n * @param {Uint8Array} arr Uint8Array.\n * @returns {string} Base32 string.\n */\nconst base32Encode = (arr) => {\n  let bits = 0;\n  let value = 0;\n  let str = \"\";\n\n  for (let i = 0; i < arr.length; i++) {\n    value = (value << 8) | arr[i];\n    bits += 8;\n\n    while (bits >= 5) {\n      str += ALPHABET[(value >>> (bits - 5)) & 31];\n      bits -= 5;\n    }\n  }\n\n  if (bits > 0) {\n    str += ALPHABET[(value << (5 - bits)) & 31];\n  }\n\n  return str;\n};\n\nexport { base32Decode, base32Encode };\n","/**\n * Converts a hexadecimal string to an Uint8Array.\n * @param {string} str Hexadecimal string.\n * @returns {Uint8Array} Uint8Array.\n */\nconst hexDecode = (str) => {\n  // Remove spaces (although they are not allowed by the spec, some issuers add them for readability).\n  str = str.replace(/ /g, \"\");\n\n  const buf = new ArrayBuffer(str.length / 2);\n  const arr = new Uint8Array(buf);\n\n  for (let i = 0; i < str.length; i += 2) {\n    arr[i / 2] = parseInt(str.substring(i, i + 2), 16);\n  }\n\n  return arr;\n};\n\n/**\n * Converts an Uint8Array to a hexadecimal string.\n * @param {Uint8Array} arr Uint8Array.\n * @returns {string} Hexadecimal string.\n */\nconst hexEncode = (arr) => {\n  let str = \"\";\n\n  for (let i = 0; i < arr.length; i++) {\n    const hex = arr[i].toString(16);\n    if (hex.length === 1) str += \"0\";\n    str += hex;\n  }\n\n  return str.toUpperCase();\n};\n\nexport { hexDecode, hexEncode };\n","/**\n * Converts a Latin-1 string to an Uint8Array.\n * @param {string} str Latin-1 string.\n * @returns {Uint8Array} Uint8Array.\n */\nconst latin1Decode = (str) => {\n  const buf = new ArrayBuffer(str.length);\n  const arr = new Uint8Array(buf);\n\n  for (let i = 0; i < str.length; i++) {\n    arr[i] = str.charCodeAt(i) & 0xff;\n  }\n\n  return arr;\n};\n\n/**\n * Converts an Uint8Array to a Latin-1 string.\n * @param {Uint8Array} arr Uint8Array.\n * @returns {string} Latin-1 string.\n */\nconst latin1Encode = (arr) => {\n  let str = \"\";\n\n  for (let i = 0; i < arr.length; i++) {\n    str += String.fromCharCode(arr[i]);\n  }\n\n  return str;\n};\n\nexport { latin1Decode, latin1Encode };\n","import { globalScope } from \"../global-scope.js\";\n\n/**\n * TextEncoder instance.\n * @type {TextEncoder|null}\n */\nconst ENCODER = globalScope.TextEncoder ? new globalScope.TextEncoder() : null;\n\n/**\n * TextDecoder instance.\n * @type {TextDecoder|null}\n */\nconst DECODER = globalScope.TextDecoder ? new globalScope.TextDecoder() : null;\n\n/**\n * Converts an UTF-8 string to an Uint8Array.\n * @param {string} str String.\n * @returns {Uint8Array} Uint8Array.\n */\nconst utf8Decode = (str) => {\n  if (!ENCODER) {\n    throw new Error(\"Encoding API not available\");\n  }\n\n  return ENCODER.encode(str);\n};\n\n/**\n * Converts an Uint8Array to an UTF-8 string.\n * @param {Uint8Array} arr Uint8Array.\n * @returns {string} String.\n */\nconst utf8Encode = (arr) => {\n  if (!DECODER) {\n    throw new Error(\"Encoding API not available\");\n  }\n\n  return DECODER.decode(arr);\n};\n\nexport { utf8Decode, utf8Encode };\n","import { base32Decode, base32Encode } from \"./internal/encoding/base32.js\";\nimport { hexDecode, hexEncode } from \"./internal/encoding/hex.js\";\nimport { latin1Decode, latin1Encode } from \"./internal/encoding/latin1.js\";\nimport { utf8Decode, utf8Encode } from \"./internal/encoding/utf8.js\";\nimport { randomBytes } from \"./internal/crypto/random-bytes.js\";\n\n/**\n * OTP secret key.\n */\nclass Secret {\n  /**\n   * Creates a secret key object.\n   * @param {Object} [config] Configuration options.\n   * @param {ArrayBufferLike} [config.buffer] Secret key buffer.\n   * @param {number} [config.size=20] Number of random bytes to generate, ignored if 'buffer' is provided.\n   */\n  constructor({ buffer, size = 20 } = {}) {\n    /**\n     * Secret key.\n     * @type {Uint8Array}\n     * @readonly\n     */\n    this.bytes = typeof buffer === \"undefined\" ? randomBytes(size) : new Uint8Array(buffer);\n\n    // Prevent the \"bytes\" property from being modified.\n    Object.defineProperty(this, \"bytes\", {\n      enumerable: true,\n      writable: false,\n      configurable: false,\n      value: this.bytes,\n    });\n  }\n\n  /**\n   * Converts a Latin-1 string to a Secret object.\n   * @param {string} str Latin-1 string.\n   * @returns {Secret} Secret object.\n   */\n  static fromLatin1(str) {\n    return new Secret({ buffer: latin1Decode(str).buffer });\n  }\n\n  /**\n   * Converts an UTF-8 string to a Secret object.\n   * @param {string} str UTF-8 string.\n   * @returns {Secret} Secret object.\n   */\n  static fromUTF8(str) {\n    return new Secret({ buffer: utf8Decode(str).buffer });\n  }\n\n  /**\n   * Converts a base32 string to a Secret object.\n   * @param {string} str Base32 string.\n   * @returns {Secret} Secret object.\n   */\n  static fromBase32(str) {\n    return new Secret({ buffer: base32Decode(str).buffer });\n  }\n\n  /**\n   * Converts a hexadecimal string to a Secret object.\n   * @param {string} str Hexadecimal string.\n   * @returns {Secret} Secret object.\n   */\n  static fromHex(str) {\n    return new Secret({ buffer: hexDecode(str).buffer });\n  }\n\n  /**\n   * Secret key buffer.\n   * @deprecated For backward compatibility, the \"bytes\" property should be used instead.\n   * @type {ArrayBufferLike}\n   */\n  get buffer() {\n    return this.bytes.buffer;\n  }\n\n  /**\n   * Latin-1 string representation of secret key.\n   * @type {string}\n   */\n  get latin1() {\n    Object.defineProperty(this, \"latin1\", {\n      enumerable: true,\n      writable: false,\n      configurable: false,\n      value: latin1Encode(this.bytes),\n    });\n\n    return this.latin1;\n  }\n\n  /**\n   * UTF-8 string representation of secret key.\n   * @type {string}\n   */\n  get utf8() {\n    Object.defineProperty(this, \"utf8\", {\n      enumerable: true,\n      writable: false,\n      configurable: false,\n      value: utf8Encode(this.bytes),\n    });\n\n    return this.utf8;\n  }\n\n  /**\n   * Base32 string representation of secret key.\n   * @type {string}\n   */\n  get base32() {\n    Object.defineProperty(this, \"base32\", {\n      enumerable: true,\n      writable: false,\n      configurable: false,\n      value: base32Encode(this.bytes),\n    });\n\n    return this.base32;\n  }\n\n  /**\n   * Hexadecimal string representation of secret key.\n   * @type {string}\n   */\n  get hex() {\n    Object.defineProperty(this, \"hex\", {\n      enumerable: true,\n      writable: false,\n      configurable: false,\n      value: hexEncode(this.bytes),\n    });\n\n    return this.hex;\n  }\n}\n\nexport { Secret };\n","import * as crypto from \"node:crypto\";\n\nimport { globalScope } from \"../global-scope.js\";\n\n/**\n * Returns random bytes.\n * @param {number} size Size.\n * @returns {Uint8Array} Random bytes.\n */\nconst randomBytes = (size) => {\n  if (crypto?.randomBytes) {\n    return crypto.randomBytes(size);\n  } else if (globalScope.crypto?.getRandomValues) {\n    return globalScope.crypto.getRandomValues(new Uint8Array(size));\n  } else {\n    throw new Error(\"Cryptography API not available\");\n  }\n};\n\nexport { randomBytes };\n","import { uintDecode } from \"./internal/encoding/uint.js\";\nimport { canonicalizeAlgorithm, hmacDigest } from \"./internal/crypto/hmac-digest.js\";\nimport { Secret } from \"./secret.js\";\nimport { timingSafeEqual } from \"./internal/crypto/timing-safe-equal.js\";\n\n/**\n * HOTP: An HMAC-based One-time Password Algorithm.\n * @see [RFC 4226](https://datatracker.ietf.org/doc/html/rfc4226)\n */\nclass HOTP {\n  /**\n   * Default configuration.\n   * @type {{\n   *   issuer: string,\n   *   label: string,\n   *   issuerInLabel: boolean,\n   *   algorithm: string,\n   *   digits: number,\n   *   counter: number\n   *   window: number\n   * }}\n   */\n  static get defaults() {\n    return {\n      issuer: \"\",\n      label: \"OTPAuth\",\n      issuerInLabel: true,\n      algorithm: \"SHA1\",\n      digits: 6,\n      counter: 0,\n      window: 1,\n    };\n  }\n\n  /**\n   * Creates an HOTP object.\n   * @param {Object} [config] Configuration options.\n   * @param {string} [config.issuer=''] Account provider.\n   * @param {string} [config.label='OTPAuth'] Account label.\n   * @param {boolean} [config.issuerInLabel=true] Include issuer prefix in label.\n   * @param {Secret|string} [config.secret=Secret] Secret key.\n   * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n   * @param {number} [config.digits=6] Token length.\n   * @param {number} [config.counter=0] Initial counter value.\n   * @param {(algorithm: string, key: Uint8Array, message: Uint8Array) => Uint8Array} [config.hmac] Custom HMAC function.\n   */\n  constructor({\n    issuer = HOTP.defaults.issuer,\n    label = HOTP.defaults.label,\n    issuerInLabel = HOTP.defaults.issuerInLabel,\n    secret = new Secret(),\n    algorithm = HOTP.defaults.algorithm,\n    digits = HOTP.defaults.digits,\n    counter = HOTP.defaults.counter,\n    hmac,\n  } = {}) {\n    /**\n     * Account provider.\n     * @type {string}\n     */\n    this.issuer = issuer;\n    /**\n     * Account label.\n     * @type {string}\n     */\n    this.label = label;\n    /**\n     * Include issuer prefix in label.\n     * @type {boolean}\n     */\n    this.issuerInLabel = issuerInLabel;\n    /**\n     * Secret key.\n     * @type {Secret}\n     */\n    this.secret = typeof secret === \"string\" ? Secret.fromBase32(secret) : secret;\n    /**\n     * HMAC hashing algorithm.\n     * @type {string}\n     */\n    this.algorithm = hmac ? algorithm : canonicalizeAlgorithm(algorithm);\n    /**\n     * Token length.\n     * @type {number}\n     */\n    this.digits = digits;\n    /**\n     * Initial counter value.\n     * @type {number}\n     */\n    this.counter = counter;\n    /**\n     * Custom HMAC function.\n     * @type {((algorithm: string, key: Uint8Array, message: Uint8Array) => Uint8Array)|undefined}\n     */\n    this.hmac = hmac;\n  }\n\n  /**\n   * Generates an HOTP token.\n   * @param {Object} config Configuration options.\n   * @param {Secret} config.secret Secret key.\n   * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n   * @param {number} [config.digits=6] Token length.\n   * @param {number} [config.counter=0] Counter value.\n   * @param {(algorithm: string, key: Uint8Array, message: Uint8Array) => Uint8Array} [config.hmac] Custom HMAC function.\n   * @returns {string} Token.\n   */\n  static generate({\n    secret,\n    algorithm = HOTP.defaults.algorithm,\n    digits = HOTP.defaults.digits,\n    counter = HOTP.defaults.counter,\n    hmac = hmacDigest,\n  }) {\n    const message = uintDecode(counter);\n    const digest = hmac(algorithm, secret.bytes, message);\n    if (!digest?.byteLength || digest.byteLength < 19) {\n      throw new TypeError(\"Return value must be at least 19 bytes\");\n    }\n    const offset = digest[digest.byteLength - 1] & 15;\n    const otp =\n      (((digest[offset] & 127) << 24) |\n        ((digest[offset + 1] & 255) << 16) |\n        ((digest[offset + 2] & 255) << 8) |\n        (digest[offset + 3] & 255)) %\n      10 ** digits;\n\n    return otp.toString().padStart(digits, \"0\");\n  }\n\n  /**\n   * Generates an HOTP token.\n   * @param {Object} [config] Configuration options.\n   * @param {number} [config.counter=this.counter++] Counter value.\n   * @returns {string} Token.\n   */\n  generate({ counter = this.counter++ } = {}) {\n    return HOTP.generate({\n      secret: this.secret,\n      algorithm: this.algorithm,\n      digits: this.digits,\n      counter,\n      hmac: this.hmac,\n    });\n  }\n\n  /**\n   * Validates an HOTP token.\n   * @param {Object} config Configuration options.\n   * @param {string} config.token Token value.\n   * @param {Secret} config.secret Secret key.\n   * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n   * @param {number} [config.digits=6] Token length.\n   * @param {number} [config.counter=0] Counter value.\n   * @param {number} [config.window=1] Window of counter values to test.\n   * @param {(algorithm: string, key: Uint8Array, message: Uint8Array) => Uint8Array} [config.hmac] Custom HMAC function.\n   * @returns {number|null} Token delta or null if it is not found in the search window, in which case it should be considered invalid.\n   */\n  static validate({\n    token,\n    secret,\n    algorithm,\n    digits = HOTP.defaults.digits,\n    counter = HOTP.defaults.counter,\n    window = HOTP.defaults.window,\n    hmac = hmacDigest,\n  }) {\n    // Return early if the token length does not match the digit number.\n    if (token.length !== digits) return null;\n\n    let delta = null;\n\n    const check = (/** @type {number} */ i) => {\n      const generatedToken = HOTP.generate({\n        secret,\n        algorithm,\n        digits,\n        counter: i,\n        hmac,\n      });\n      if (timingSafeEqual(token, generatedToken)) {\n        delta = i - counter;\n      }\n    };\n\n    check(counter);\n    for (let i = 1; i <= window && delta === null; ++i) {\n      check(counter - i);\n      if (delta !== null) break;\n      check(counter + i);\n      if (delta !== null) break;\n    }\n\n    return delta;\n  }\n\n  /**\n   * Validates an HOTP token.\n   * @param {Object} config Configuration options.\n   * @param {string} config.token Token value.\n   * @param {number} [config.counter=this.counter] Counter value.\n   * @param {number} [config.window=1] Window of counter values to test.\n   * @returns {number|null} Token delta or null if it is not found in the search window, in which case it should be considered invalid.\n   */\n  validate({ token, counter = this.counter, window }) {\n    return HOTP.validate({\n      token,\n      secret: this.secret,\n      algorithm: this.algorithm,\n      digits: this.digits,\n      counter,\n      window,\n      hmac: this.hmac,\n    });\n  }\n\n  /**\n   * Returns a Google Authenticator key URI.\n   * @returns {string} URI.\n   */\n  toString() {\n    const e = encodeURIComponent;\n    return (\n      \"otpauth://hotp/\" +\n      `${\n        this.issuer.length > 0\n          ? this.issuerInLabel\n            ? `${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&`\n            : `${e(this.label)}?issuer=${e(this.issuer)}&`\n          : `${e(this.label)}?`\n      }` +\n      `secret=${e(this.secret.base32)}&` +\n      `algorithm=${e(this.algorithm)}&` +\n      `digits=${e(this.digits)}&` +\n      `counter=${e(this.counter)}`\n    );\n  }\n}\n\nexport { HOTP };\n","/**\n * Converts an integer to an Uint8Array.\n * @param {number} num Integer.\n * @returns {Uint8Array} Uint8Array.\n */\nconst uintDecode = (num) => {\n  const buf = new ArrayBuffer(8);\n  const arr = new Uint8Array(buf);\n  let acc = num;\n\n  for (let i = 7; i >= 0; i--) {\n    if (acc === 0) break;\n    arr[i] = acc & 255;\n    acc -= arr[i];\n    acc /= 256;\n  }\n\n  return arr;\n};\n\n/**\n * Converts an Uint8Array to an integer.\n * @param {Uint8Array} arr Uint8Array.\n * @returns {number} Integer.\n */\nconst uintEncode = (arr) => {\n  let num = 0;\n\n  for (let i = 0; i < arr.length; i++) {\n    num *= 256;\n    num += arr[i];\n  }\n\n  return num;\n};\n\nexport { uintDecode, uintEncode };\n","import * as crypto from \"node:crypto\";\n\nimport { globalScope } from \"../global-scope.js\";\n\n/**\n * Returns true if a is equal to b, without leaking timing information that would allow an attacker to guess one of the values.\n * @param {string} a String a.\n * @param {string} b String b.\n * @returns {boolean} Equality result.\n */\nconst timingSafeEqual = (a, b) => {\n  if (crypto?.timingSafeEqual) {\n    return crypto.timingSafeEqual(globalScope.Buffer.from(a), globalScope.Buffer.from(b));\n  } else {\n    if (a.length !== b.length) {\n      throw new TypeError(\"Input strings must have the same length\");\n    }\n    let i = -1;\n    let out = 0;\n    while (++i < a.length) {\n      out |= a.charCodeAt(i) ^ b.charCodeAt(i);\n    }\n    return out === 0;\n  }\n};\n\nexport { timingSafeEqual };\n","import { canonicalizeAlgorithm } from \"./internal/crypto/hmac-digest.js\";\nimport { HOTP } from \"./hotp.js\";\nimport { Secret } from \"./secret.js\";\n\n/**\n * TOTP: Time-Based One-Time Password Algorithm.\n * @see [RFC 6238](https://datatracker.ietf.org/doc/html/rfc6238)\n */\nclass TOTP {\n  /**\n   * Default configuration.\n   * @type {{\n   *   issuer: string,\n   *   label: string,\n   *   issuerInLabel: boolean,\n   *   algorithm: string,\n   *   digits: number,\n   *   period: number\n   *   window: number\n   * }}\n   */\n  static get defaults() {\n    return {\n      issuer: \"\",\n      label: \"OTPAuth\",\n      issuerInLabel: true,\n      algorithm: \"SHA1\",\n      digits: 6,\n      period: 30,\n      window: 1,\n    };\n  }\n\n  /**\n   * Creates a TOTP object.\n   * @param {Object} [config] Configuration options.\n   * @param {string} [config.issuer=''] Account provider.\n   * @param {string} [config.label='OTPAuth'] Account label.\n   * @param {boolean} [config.issuerInLabel=true] Include issuer prefix in label.\n   * @param {Secret|string} [config.secret=Secret] Secret key.\n   * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n   * @param {number} [config.digits=6] Token length.\n   * @param {number} [config.period=30] Token time-step duration.\n   * @param {(algorithm: string, key: Uint8Array, message: Uint8Array) => Uint8Array} [config.hmac] Custom HMAC function.\n   */\n  constructor({\n    issuer = TOTP.defaults.issuer,\n    label = TOTP.defaults.label,\n    issuerInLabel = TOTP.defaults.issuerInLabel,\n    secret = new Secret(),\n    algorithm = TOTP.defaults.algorithm,\n    digits = TOTP.defaults.digits,\n    period = TOTP.defaults.period,\n    hmac,\n  } = {}) {\n    /**\n     * Account provider.\n     * @type {string}\n     */\n    this.issuer = issuer;\n    /**\n     * Account label.\n     * @type {string}\n     */\n    this.label = label;\n    /**\n     * Include issuer prefix in label.\n     * @type {boolean}\n     */\n    this.issuerInLabel = issuerInLabel;\n    /**\n     * Secret key.\n     * @type {Secret}\n     */\n    this.secret = typeof secret === \"string\" ? Secret.fromBase32(secret) : secret;\n    /**\n     * HMAC hashing algorithm.\n     * @type {string}\n     */\n    this.algorithm = hmac ? algorithm : canonicalizeAlgorithm(algorithm);\n    /**\n     * Token length.\n     * @type {number}\n     */\n    this.digits = digits;\n    /**\n     * Token time-step duration.\n     * @type {number}\n     */\n    this.period = period;\n    /**\n     * Custom HMAC function.\n     * @type {((algorithm: string, key: Uint8Array, message: Uint8Array) => Uint8Array)|undefined}\n     */\n    this.hmac = hmac;\n  }\n\n  /**\n   * Calculates the counter. i.e. the number of periods since timestamp 0.\n   * @param {Object} [config] Configuration options.\n   * @param {number} [config.period=30] Token time-step duration.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @returns {number} Counter.\n   */\n  static counter({ period = TOTP.defaults.period, timestamp = Date.now() } = {}) {\n    return Math.floor(timestamp / 1000 / period);\n  }\n\n  /**\n   * Calculates the counter. i.e. the number of periods since timestamp 0.\n   * @param {Object} [config] Configuration options.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @returns {number} Counter.\n   */\n  counter({ timestamp = Date.now() } = {}) {\n    return TOTP.counter({\n      period: this.period,\n      timestamp,\n    });\n  }\n\n  /**\n   * Calculates the remaining time in milliseconds until the next token is generated.\n   * @param {Object} [config] Configuration options.\n   * @param {number} [config.period=30] Token time-step duration.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @returns {number} counter.\n   */\n  static remaining({ period = TOTP.defaults.period, timestamp = Date.now() } = {}) {\n    return period * 1000 - (timestamp % (period * 1000));\n  }\n\n  /**\n   * Calculates the remaining time in milliseconds until the next token is generated.\n   * @param {Object} [config] Configuration options.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @returns {number} counter.\n   */\n  remaining({ timestamp = Date.now() } = {}) {\n    return TOTP.remaining({\n      period: this.period,\n      timestamp,\n    });\n  }\n\n  /**\n   * Generates a TOTP token.\n   * @param {Object} config Configuration options.\n   * @param {Secret} config.secret Secret key.\n   * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n   * @param {number} [config.digits=6] Token length.\n   * @param {number} [config.period=30] Token time-step duration.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @param {(algorithm: string, key: Uint8Array, message: Uint8Array) => Uint8Array} [config.hmac] Custom HMAC function.\n   * @returns {string} Token.\n   */\n  static generate({ secret, algorithm, digits, period = TOTP.defaults.period, timestamp = Date.now(), hmac }) {\n    return HOTP.generate({\n      secret,\n      algorithm,\n      digits,\n      counter: TOTP.counter({ period, timestamp }),\n      hmac,\n    });\n  }\n\n  /**\n   * Generates a TOTP token.\n   * @param {Object} [config] Configuration options.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @returns {string} Token.\n   */\n  generate({ timestamp = Date.now() } = {}) {\n    return TOTP.generate({\n      secret: this.secret,\n      algorithm: this.algorithm,\n      digits: this.digits,\n      period: this.period,\n      timestamp,\n      hmac: this.hmac,\n    });\n  }\n\n  /**\n   * Validates a TOTP token.\n   * @param {Object} config Configuration options.\n   * @param {string} config.token Token value.\n   * @param {Secret} config.secret Secret key.\n   * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n   * @param {number} [config.digits=6] Token length.\n   * @param {number} [config.period=30] Token time-step duration.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @param {number} [config.window=1] Window of counter values to test.\n   * @param {(algorithm: string, key: Uint8Array, message: Uint8Array) => Uint8Array} [config.hmac] Custom HMAC function.\n   * @returns {number|null} Token delta or null if it is not found in the search window, in which case it should be considered invalid.\n   */\n  static validate({\n    token,\n    secret,\n    algorithm,\n    digits,\n    period = TOTP.defaults.period,\n    timestamp = Date.now(),\n    window,\n    hmac,\n  }) {\n    return HOTP.validate({\n      token,\n      secret,\n      algorithm,\n      digits,\n      counter: TOTP.counter({ period, timestamp }),\n      window,\n      hmac,\n    });\n  }\n\n  /**\n   * Validates a TOTP token.\n   * @param {Object} config Configuration options.\n   * @param {string} config.token Token value.\n   * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n   * @param {number} [config.window=1] Window of counter values to test.\n   * @returns {number|null} Token delta or null if it is not found in the search window, in which case it should be considered invalid.\n   */\n  validate({ token, timestamp, window }) {\n    return TOTP.validate({\n      token,\n      secret: this.secret,\n      algorithm: this.algorithm,\n      digits: this.digits,\n      period: this.period,\n      timestamp,\n      window,\n      hmac: this.hmac,\n    });\n  }\n\n  /**\n   * Returns a Google Authenticator key URI.\n   * @returns {string} URI.\n   */\n  toString() {\n    const e = encodeURIComponent;\n    return (\n      \"otpauth://totp/\" +\n      `${\n        this.issuer.length > 0\n          ? this.issuerInLabel\n            ? `${e(this.issuer)}:${e(this.label)}?issuer=${e(this.issuer)}&`\n            : `${e(this.label)}?issuer=${e(this.issuer)}&`\n          : `${e(this.label)}?`\n      }` +\n      `secret=${e(this.secret.base32)}&` +\n      `algorithm=${e(this.algorithm)}&` +\n      `digits=${e(this.digits)}&` +\n      `period=${e(this.period)}`\n    );\n  }\n}\n\nexport { TOTP };\n","import { HOTP } from \"./hotp.js\";\nimport { TOTP } from \"./totp.js\";\n\n/**\n * Key URI regex (otpauth://TYPE/[ISSUER:]LABEL?PARAMETERS).\n * @type {RegExp}\n */\nconst OTPURI_REGEX = /^otpauth:\\/\\/([ht]otp)\\/(.+)\\?([A-Z0-9.~_-]+=[^?&]*(?:&[A-Z0-9.~_-]+=[^?&]*)*)$/i;\n\n/**\n * RFC 4648 base32 alphabet with pad.\n * @type {RegExp}\n */\nconst SECRET_REGEX = /^[2-7A-Z]+=*$/i;\n\n/**\n * Regex for supported algorithms in built-in HMAC function.\n * @type {RegExp}\n */\nconst ALGORITHM_REGEX = /^SHA(?:1|224|256|384|512|3-224|3-256|3-384|3-512)$/i;\n\n/**\n * Regex for custom algorithms in user-defined HMAC function.\n * @type {RegExp}\n */\nconst ALGORITHM_CUSTOM_REGEX = /^[A-Z0-9]+(?:[_-][A-Z0-9]+)*$/i;\n\n/**\n * Integer regex.\n * @type {RegExp}\n */\nconst INTEGER_REGEX = /^[+-]?\\d+$/;\n\n/**\n * Positive integer regex.\n * @type {RegExp}\n */\nconst POSITIVE_INTEGER_REGEX = /^\\+?[1-9]\\d*$/;\n\n/**\n * HOTP/TOTP object/string conversion.\n * @see [Key URI Format](https://github.com/google/google-authenticator/wiki/Key-Uri-Format)\n */\nclass URI {\n  /**\n   * Parses a Google Authenticator key URI and returns an HOTP/TOTP object.\n   * @param {string} uri Google Authenticator Key URI.\n   * @param {Object} [config] Configuration options.\n   * @param {(algorithm: string, key: Uint8Array, message: Uint8Array) => Uint8Array} [config.hmac] Custom HMAC function.\n   * @returns {HOTP|TOTP} HOTP/TOTP object.\n   */\n  static parse(uri, { hmac } = {}) {\n    let uriGroups;\n\n    try {\n      uriGroups = uri.match(OTPURI_REGEX);\n      // eslint-disable-next-line no-unused-vars\n    } catch (_) {\n      /* Handled below */\n    }\n\n    if (!Array.isArray(uriGroups)) {\n      throw new URIError(\"Invalid URI format\");\n    }\n\n    // Extract URI groups.\n    const uriType = uriGroups[1].toLowerCase();\n    const uriLabel = uriGroups[2].split(/(?::|%3A) *(.+)/i, 2).map(decodeURIComponent);\n    /** @type {Object.<string, string>} */\n    const uriParams = uriGroups[3].split(\"&\").reduce((acc, cur) => {\n      const pairArr = cur.split(/=(.*)/, 2).map(decodeURIComponent);\n      const pairKey = pairArr[0].toLowerCase();\n      const pairVal = pairArr[1];\n      /** @type {Object.<string, string>} */\n      const pairAcc = acc;\n\n      pairAcc[pairKey] = pairVal;\n      return pairAcc;\n    }, {});\n\n    // 'OTP' will be instantiated with 'config' argument.\n    let OTP;\n    const config = {};\n\n    if (uriType === \"hotp\") {\n      OTP = HOTP;\n\n      // Counter: required\n      if (typeof uriParams.counter !== \"undefined\" && INTEGER_REGEX.test(uriParams.counter)) {\n        config.counter = parseInt(uriParams.counter, 10);\n      } else {\n        throw new TypeError(\"Missing or invalid 'counter' parameter\");\n      }\n    } else if (uriType === \"totp\") {\n      OTP = TOTP;\n\n      // Period: optional\n      if (typeof uriParams.period !== \"undefined\") {\n        if (POSITIVE_INTEGER_REGEX.test(uriParams.period)) {\n          config.period = parseInt(uriParams.period, 10);\n        } else {\n          throw new TypeError(\"Invalid 'period' parameter\");\n        }\n      }\n    } else {\n      throw new TypeError(\"Unknown OTP type\");\n    }\n\n    // Label: required\n    // Issuer: optional\n    if (typeof uriParams.issuer !== \"undefined\") {\n      config.issuer = uriParams.issuer;\n    }\n    if (uriLabel.length === 2) {\n      config.label = uriLabel[1];\n      if (typeof config.issuer === \"undefined\" || config.issuer === \"\") {\n        config.issuer = uriLabel[0];\n      } else if (uriLabel[0] === \"\") {\n        config.issuerInLabel = false;\n      }\n    } else {\n      config.label = uriLabel[0];\n      if (typeof config.issuer !== \"undefined\" && config.issuer !== \"\") {\n        config.issuerInLabel = false;\n      }\n    }\n\n    // Secret: required\n    if (typeof uriParams.secret !== \"undefined\" && SECRET_REGEX.test(uriParams.secret)) {\n      config.secret = uriParams.secret;\n    } else {\n      throw new TypeError(\"Missing or invalid 'secret' parameter\");\n    }\n\n    // Algorithm: optional\n    if (typeof uriParams.algorithm !== \"undefined\") {\n      if ((hmac ? ALGORITHM_CUSTOM_REGEX : ALGORITHM_REGEX).test(uriParams.algorithm)) {\n        config.algorithm = uriParams.algorithm;\n      } else {\n        throw new TypeError(\"Invalid 'algorithm' parameter\");\n      }\n    }\n\n    // Digits: optional\n    if (typeof uriParams.digits !== \"undefined\") {\n      if (POSITIVE_INTEGER_REGEX.test(uriParams.digits)) {\n        config.digits = parseInt(uriParams.digits, 10);\n      } else {\n        throw new TypeError(\"Invalid 'digits' parameter\");\n      }\n    }\n\n    // HMAC: optional\n    if (typeof hmac !== \"undefined\") {\n      config.hmac = hmac;\n    }\n\n    return new OTP(config);\n  }\n\n  /**\n   * Converts an HOTP/TOTP object to a Google Authenticator key URI.\n   * @param {HOTP|TOTP} otp HOTP/TOTP object.\n   * @returns {string} Google Authenticator Key URI.\n   */\n  static stringify(otp) {\n    if (otp instanceof HOTP || otp instanceof TOTP) {\n      return otp.toString();\n    }\n\n    throw new TypeError(\"Invalid 'HOTP/TOTP' object\");\n  }\n}\n\nexport { URI };\n","/**\n * Library version.\n * @type {string}\n */\nconst version = \"__OTPAUTH_VERSION__\";\n\nexport { version };\n"],"names":["anumber","n","title","Number","isSafeInteger","Error","abytes","value","length","bytes","a","Uint8Array","ArrayBuffer","isView","constructor","name","len","needsLen","undefined","aexists","instance","checkFinished","destroyed","finished","aoutput","out","min","outputLen","clean","arrays","i","fill","createView","arr","DataView","buffer","byteOffset","byteLength","rotr","word","shift","rotl","byteSwap","swap32IfBE","Uint32Array","u","createHasher","hashCons","info","hashC","msg","opts","update","digest","tmp","blockLen","create","Object","assign","freeze","oidNist","suffix","oid","from","_HMAC","buf","this","iHash","digestInto","oHash","destroy","_cloneInto","to","getPrototypeOf","clone","hash","key","h","ahash","pad","set","hmac","message","Chi","b","c","Maj","HashMD","data","view","pos","take","Math","dataView","process","subarray","roundClean","isLE","padOffset","setBigUint64","BigInt","oview","outLen","state","get","setUint32","res","slice","SHA256_IV","SHA224_IV","SHA384_IV","SHA512_IV","SHA1_IV","SHA1_W","_SHA1","A","B","C","D","E","offset","getUint32","F","K","T","super","sha1","U32_MASK64","_32n","fromBig","le","l","split","lst","Ah","Al","shrSH","_l","s","shrSL","rotrSH","rotrSL","rotrBH","rotrBL","add","Bh","Bl","add3L","Cl","add3H","low","Ch","add4L","Dl","add4H","Dh","add5L","El","add5H","Eh","SHA256_K","SHA256_W","SHA2_32B","G","H","W15","W2","s0","s1","T1","T2","_SHA256","_SHA224","K512","u64.split","map","SHA512_Kh","SHA512_Kl","SHA512_W_H","SHA512_W_L","SHA2_64B","Fh","Fl","Gh","Gl","Hh","Hl","W15h","W15l","s0h","u64.rotrSH","u64.shrSH","s0l","u64.rotrSL","u64.shrSL","W2h","W2l","s1h","u64.rotrBH","s1l","u64.rotrBL","SUMl","u64.add4L","SUMh","u64.add4H","sigma1h","sigma1l","CHIh","T1ll","u64.add5L","T1h","u64.add5H","T1l","sigma0h","sigma0l","MAJh","MAJl","u64.add","All","u64.add3L","u64.add3H","_SHA512","_SHA384","sha256","sha224","sha512","sha384","_0n","_1n","_2n","_7n","_256n","_0x71n","SHA3_PI","SHA3_ROTL","_SHA3_IOTA","round","R","x","y","push","t","j","IOTAS","SHA3_IOTA_H","SHA3_IOTA_L","rotlH","rotlBH","rotlSH","rotlL","rotlBL","rotlSL","Keccak","keccak","state32","rounds","idx1","idx0","B0","B1","Th","Tl","curH","curL","PI","keccakP","posOut","finish","writeInto","bufferOut","xofInto","enableXOF","xof","floor","genKeccak","sha3_224","sha3_256","sha3_384","sha3_512","globalScope","globalThis","defineProperty","prototype","configurable","__GLOBALTHIS__","self","window","global","nobleHashes","SHA1","SHA224","SHA256","SHA384","SHA512","canonicalizeAlgorithm","algorithm","test","TypeError","hmacDigest","ALPHABET","base32Decode","str","end","replace","substring","toUpperCase","bits","index","idx","indexOf","base32Encode","hexDecode","parseInt","hexEncode","hex","toString","latin1Decode","charCodeAt","latin1Encode","String","fromCharCode","ENCODER","TextEncoder","DECODER","TextDecoder","utf8Decode","encode","utf8Encode","decode","Secret","fromLatin1","fromUTF8","fromBase32","fromHex","latin1","enumerable","writable","utf8","base32","size","crypto","getRandomValues","randomBytes","HOTP","defaults","issuer","label","issuerInLabel","digits","counter","generate","secret","num","acc","uintDecode","padStart","validate","token","delta","check","generatedToken","timingSafeEqual","e","encodeURIComponent","TOTP","period","timestamp","Date","now","remaining","OTPURI_REGEX","SECRET_REGEX","ALGORITHM_REGEX","ALGORITHM_CUSTOM_REGEX","INTEGER_REGEX","POSITIVE_INTEGER_REGEX","URI","parse","uri","uriGroups","match","_","Array","isArray","URIError","uriType","toLowerCase","uriLabel","decodeURIComponent","uriParams","reduce","cur","pairArr","pairKey","pairVal","pairAcc","OTP","config","stringify","otp","version"],"mappings":";;;;AAWM,SAAUA,EAAQC,EAAWC,EAAgB,IACjD,IAAKC,OAAOC,cAAcH,IAAMA,EAAI,EAElC,MAAM,IAAII,MAAM,GADDH,GAAS,IAAIA,mCAC2BD,IAE3D,CAGM,SAAUK,EAAOC,EAAmBC,EAAiBN,EAAgB,IACzE,MAAMO,GAdgBC,EAcAH,aAbFI,YAAcC,YAAaC,OAAOH,IAA6B,eAAvBA,EAAEI,YAAYC,KADtE,IAAkBL,EAetB,MAAMM,EAAMT,GAAOC,OACbS,OAAsBC,IAAXV,EACjB,IAAKC,GAASQ,GAAaD,IAAQR,EAIjC,MAAM,IAAIH,OAHKH,GAAS,IAAIA,OAGH,uBAFXe,EAAW,cAAcT,IAAW,IAEO,UAD7CC,EAAQ,UAAUO,IAAQ,eAAeT,IAGvD,OAAOA,CACT,CAWM,SAAUY,EAAQC,EAAeC,GAAgB,GACrD,GAAID,EAASE,UAAW,MAAM,IAAIjB,MAAM,oCACxC,GAAIgB,GAAiBD,EAASG,SAAU,MAAM,IAAIlB,MAAM,wCAC1D,CAGM,SAAUmB,EAAQC,EAAUL,GAChCd,EAAOmB,OAAKP,EAAW,uBACvB,MAAMQ,EAAMN,EAASO,UACrB,GAAIF,EAAIjB,OAASkB,EACf,MAAM,IAAIrB,MAAM,oDAAsDqB,EAE1E,CAkBM,SAAUE,KAASC,GACvB,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAOrB,OAAQsB,IACjCD,EAAOC,GAAGC,KAAK,EAEnB,CAGM,SAAUC,EAAWC,GACzB,OAAO,IAAIC,SAASD,EAAIE,OAAQF,EAAIG,WAAYH,EAAII,WACtD,CAGM,SAAUC,EAAKC,EAAcC,GACjC,OAAOD,GAAS,GAAMC,EAAWD,IAASC,CAC5C,CAGM,SAAUC,EAAKF,EAAcC,GACjC,OAAOD,GAASC,EAAUD,IAAU,GAAMC,IAAY,CACxD,CAOM,SAAUE,EAASH,GACvB,OAAOA,GACK,GAAM,WACfA,GAAS,EAAK,SACbA,IAAS,EAAK,MACdA,IAAS,GAAM,GAErB,CAcO,MAAMI,EAzB+B,KACkB,KAA5D,IAAIhC,WAAW,IAAIiC,YAAY,CAAC,YAAaT,QAAQ,GADX,GA0BvCU,GAAmBA,EARlB,SAAqBZ,GACzB,IAAK,IAAIH,EAAI,EAAGA,EAAIG,EAAIzB,OAAQsB,IAC9BG,EAAIH,GAAKY,EAAST,EAAIH,IAExB,OAAOG,CACT,EAqMM,SAAUa,EACdC,EACAC,EAAiB,IAEjB,MAAMC,EAAa,CAACC,EAAiBC,IAAgBJ,EAASI,GAAMC,OAAOF,GAAKG,SAC1EC,EAAMP,OAAS7B,GAKrB,OAJA+B,EAAMtB,UAAY2B,EAAI3B,UACtBsB,EAAMM,SAAWD,EAAIC,SACrBN,EAAMO,OAAUL,GAAgBJ,EAASI,GACzCM,OAAOC,OAAOT,EAAOD,GACdS,OAAOE,OAAOV,EACvB,CAWO,MAAMW,EAAWC,IAAc,CACpCC,IAAKnD,WAAWoD,KAAK,CAAC,EAAM,EAAM,GAAM,IAAM,GAAM,EAAM,IAAM,EAAM,EAAM,EAAMF,MCzU9E,MAAOG,EA6BX,MAAAZ,CAAOa,GAGL,OAFA9C,EAAQ+C,MACRA,KAAKC,MAAMf,OAAOa,GACXC,IACT,CACA,UAAAE,CAAW3C,GACTN,EAAQ+C,MACR5D,EAAOmB,EAAKyC,KAAKvC,UAAW,UAC5BuC,KAAK3C,UAAW,EAChB2C,KAAKC,MAAMC,WAAW3C,GACtByC,KAAKG,MAAMjB,OAAO3B,GAClByC,KAAKG,MAAMD,WAAW3C,GACtByC,KAAKI,SACP,CACA,MAAAjB,GACE,MAAM5B,EAAM,IAAId,WAAWuD,KAAKG,MAAM1C,WAEtC,OADAuC,KAAKE,WAAW3C,GACTA,CACT,CACA,UAAA8C,CAAWC,GAETA,IAAAA,EAAOf,OAAOD,OAAOC,OAAOgB,eAAeP,MAAO,CAAA,IAClD,MAAMG,MAAEA,EAAKF,MAAEA,EAAK5C,SAAEA,EAAQD,UAAEA,EAASiC,SAAEA,EAAQ5B,UAAEA,GAAcuC,KAQnE,OANAM,EAAGjD,SAAWA,EACdiD,EAAGlD,UAAYA,EACfkD,EAAGjB,SAAWA,EACdiB,EAAG7C,UAAYA,EACf6C,EAAGH,MAAQA,EAAME,WAAWC,EAAGH,OAC/BG,EAAGL,MAAQA,EAAMI,WAAWC,EAAGL,OACxBK,CACT,CACA,KAAAE,GACE,OAAOR,KAAKK,YACd,CACA,OAAAD,GACEJ,KAAK5C,WAAY,EACjB4C,KAAKG,MAAMC;AACXJ,KAAKC,MAAMG,SACb,CA5DA,WAAAxD,CAAY6D,EAAaC,GAIvB,QAPMrD,UAAW,OACXD,WAAY,EDoBhB,SAAgBuD,GACpB,GAAiB,mBAANA,GAAwC,mBAAbA,EAAErB,OACtC,MAAM,IAAInD,MAAM,2CAClBL,EAAQ6E,EAAElD,WACV3B,EAAQ6E,EAAEtB,SACZ,CCtBIuB,CAAMH,GACNrE,EAAOsE,OAAK1D,EAAW,OACvBgD,KAAKC,MAAQQ,EAAKnB,SACe,mBAAtBU,KAAKC,MAAMf,OACpB,MAAM,IAAI/C,MAAM,uDAClB6D,KAAKX,SAAWW,KAAKC,MAAMZ,SAC3BW,KAAKvC,UAAYuC,KAAKC,MAAMxC,UAC5B,MAAM4B,EAAWW,KAAKX,SAChBwB,EAAM,IAAIpE,WAAW4C,GAE3BwB,EAAIC,IAAIJ,EAAIpE,OAAS+C,EAAWoB,EAAKnB,SAASJ,OAAOwB,GAAKvB,SAAWuB,GACrE,IAAK,IAAI9C,EAAI,EAAGA,EAAIiD,EAAIvE,OAAQsB,IAAKiD,EAAIjD,IAAM,GAC/CoC,KAAKC,MAAMf,OAAO2B,GAElBb,KAAKG,MAAQM,EAAKnB,SAElB,IAAK,IAAI1B,EAAI,EAAGA,EAAIiD,EAAIvE,OAAQsB,IAAKiD,EAAIjD,IAAM,IAC/CoC,KAAKG,MAAMjB,OAAO2B,GAClBnD,EAAMmD,EACR,EAqDK,MAAME,EAGT,CAACN,EAAaC,EAAiBM,IACjC,IAAIlB,EAAWW,EAAMC,GAAKxB,OAAO8B,GAAS7B,SCrFtC,SAAU8B,EAAIzE,EAAW0E,EAAWC,GACxC,OAAO3E,EAAK0E,GAAO1E,EAAI2E,CACzB,CAGM,SAAUC,EAAI5E,EAAW0E,EAAWC,GACxC,OAAO3E,EAAK0E,EAAM1E,EAAI2E,EAAMD,EAAIC,CAClC,CD+EAJ,EAAKzB,OAAS,CAACmB,EAAaC,IAAoB,IAAIZ,EAAWW,EAAMC,GCzE/D,MAAgBW,EA4BpB,MAAAnC,CAAOoC,GACLrE,EAAQ+C,MACR5D,EAAOkF,GACP,MAAMC,KAAEA,EAAItD,OAAEA,EAAMoB,SAAEA,GAAaW,KAC7BlD,EAAMwE,EAAKhF,OACjB,IAAK,IAAIkF,EAAM,EAAGA,EAAM1E,GAAO,CAC7B,MAAM2E,EAAOC,KAAKlE,IAAI6B,EAAWW,KAAKwB,IAAK1E,EAAM0E,GAEjD,GAAIC,IAASpC,EAAU,CACrB,MAAMsC,EAAW7D,EAAWwD,GAC5B,KAAOjC,GAAYvC,EAAM0E,EAAKA,GAAOnC,EAAUW,KAAK4B,QAAQD,EAAUH,GACtE,QACF,CACAvD,EAAO6C,IAAIQ,EAAKO,SAASL,EAAKA,EAAMC,GAAOzB,KAAKwB,KAChDxB,KAAKwB,KAAOC,EACZD,GAAOC,EACHzB,KAAKwB,MAAQnC,IACfW,KAAK4B,QAAQL,EAAM,GACnBvB,KAAKwB,IAAM,EAEf,CAGA,OAFAxB,KAAK1D,QAAUgF,EAAKhF,OACpB0D,KAAK8B,aACE9B,IACT,CACA,UAAAE,CAAW3C,GACTN,EAAQ+C,MACR1C,EAAQC,EAAKyC,MACbA,KAAK3C,UAAW,EAIhB,MAAMY,OAAEA,EAAMsD,KAAEA,EAAIlC,SAAEA,EAAQ0C,KAAEA,GAAS/B,KACzC,IAAIwB,IAAEA,GAAQxB,KAEd/B,EAAOuD,KAAS,IAChB9D,EAAMsC,KAAK/B,OAAO4D,SAASL,IAGvBxB,KAAKgC,UAAY3C,EAAWmC,IAC9BxB,KAAK4B,QAAQL,EAAM,GACnBC,EAAM,GAGR,IAAK,IAAI5D,EAAI4D,EAAK5D,EAAIyB,EAAUzB,IAAKK,EAAOL,GAAK,EAIjD2D,EAAKU,aAAa5C,EAAW,EAAG6C,OAAqB,EAAdlC,KAAK1D,QAAayF,GACzD/B,KAAK4B,QAAQL,EAAM,GACnB,MAAMY,EAAQrE,EAAWP,GACnBT,EAAMkD,KAAKvC,UAEjB,GAAIX,EAAM,EAAG,MAAM,IAAIX,MAAM,6CAC7B,MAAMiG,EAAStF,EAAM,EACfuF,EAAQrC,KAAKsC,MACnB,GAAIF,EAASC,EAAM/F,OAAQ,MAAM,IAAIH,MAAM,sCAC3C,IAAK,IAAIyB,EAAI,EAAGA,EAAIwE,EAAQxE,IAAKuE,EAAMI,UAAU,EAAI3E,EAAGyE,EAAMzE,GAAImE,EACpE,CACA,MAAA5C,GACE,MAAMlB,OAAEA,EAAMR,UAAEA,GAAcuC,KAC9BA,KAAKE,WAAWjC,GAChB,MAAMuE,EAAMvE,EAAOwE,MAAM,EAAGhF,GAE5B,OADAuC,KAAKI,UACEoC,CACT,CACA,UAAAnC,CAAWC,GACTA,IAAAA,EAAO,IAAKN,KAAKpD,aACjB0D,EAAGQ,OAAOd,KAAKsC,OACf,MAAMjD,SAAEA,EAAQpB,OAAEA,EAAM3B,OAAEA,EAAMe,SAAEA,EAAQD,UAAEA,EAASoE,IAAEA,GAAQxB,KAM/D,OALAM,EAAGlD,UAAYA,EACfkD,EAAGjD,SAAWA,EACdiD,EAAGhE,OAASA,EACZgE,EAAGkB,IAAMA,EACLlF,EAAS+C,GAAUiB,EAAGrC,OAAO6C,IAAI7C,GAC9BqC,CACT,CACA,KAAAE,GACE,OAAOR,KAAKK,YACd;AAvFA,WAAAzD,CAAYyC,EAAkB5B,EAAmBuE,EAAmBD,QAL1D1E,UAAW,OACXf,OAAS,OACTkF,IAAM,OACNpE,WAAY,EAGpB4C,KAAKX,SAAWA,EAChBW,KAAKvC,UAAYA,EACjBuC,KAAKgC,UAAYA,EACjBhC,KAAK+B,KAAOA,EACZ/B,KAAK/B,OAAS,IAAIxB,WAAW4C,GAC7BW,KAAKuB,KAAOzD,EAAWkC,KAAK/B,OAC9B,EAyFK,MAAMyE,EAAyChE,YAAYmB,KAAK,CACrE,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,aAIzE8C,EAAyCjE,YAAYmB,KAAK,CACrE,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,aAIzE+C,EAAyClE,YAAYmB,KAAK,CACrE,WAAY,WAAY,WAAY,UAAY,WAAY,UAAY,UAAY,WACpF,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,aAIzEgD,EAAyCnE,YAAYmB,KAAK,CACrE,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WACpF,WAAY,WAAY,WAAY,UAAY,UAAY,WAAY,WAAY,YC5IhFiD,EAA0BpE,YAAYmB,KAAK,CAC/C,WAAY,WAAY,WAAY,UAAY,aAI5CkD,EAAyB,IAAIrE,YAAY,IAGzC,MAAOsE,UAAc3B,EAUf,GAAAiB,GACR,MAAMW,EAAEA,EAACC,EAAEA,EAACC,EAAEA,EAACC,EAAEA,EAACC,EAAEA,GAAMrD,KAC1B,MAAO,CAACiD,EAAGC,EAAGC,EAAGC,EAAGC,EACtB,CACU,GAAAvC,CAAImC,EAAWC,EAAWC,EAAWC,EAAWC,GACxDrD,KAAKiD,EAAQ,EAAJA,EACTjD,KAAKkD,EAAQ,EAAJA,EACTlD,KAAKmD,EAAQ,EAAJA,EACTnD,KAAKoD,EAAQ,EAAJA,EACTpD,KAAKqD,EAAQ,EAAJA,CACX,CACU,OAAAzB,CAAQL,EAAgB+B,GAChC,IAAK,IAAI1F,EAAI,EAAGA,EAAI,GAAIA,IAAK0F,GAAU,EAAGP,EAAOnF,GAAK2D,EAAKgC,UAAUD,GAAQ,GAC7E,IAAK,IAAI1F,EAAI,GAAIA,EAAI,GAAIA,IACvBmF,EAAOnF,GAAKW,EAAKwE,EAAOnF,EAAI,GAAKmF,EAAOnF,EAAI,GAAKmF,EAAOnF,EAAI,IAAMmF,EAAOnF,EAAI,IAAK,GAEpF,IAAIqF,EAAEA,EAACC,EAAEA,EAACC,EAAEA,EAACC,EAAEA,EAACC,EAAEA,GAAMrD,KACxB,IAAK,IAAIpC,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,IAAI4F,EAAGC,EACH7F,EAAI,IACN4F,EAAIvC,EAAIiC,EAAGC,EAAGC,GACdK,EAAI,YACK7F,EAAI,IACb4F,EAAIN,EAAIC,EAAIC,EACZK,EAAI,YACK7F,EAAI,IACb4F,EAAIpC,EAAI8B,EAAGC,EAAGC,GACdK,EAAI,aAEJD,EAAIN,EAAIC,EAAIC,EACZK,EAAI,YAEN,MAAMC,EAAInF,EAAM0E,EAAG,GAAKO,EAAIH,EAAII,EAAIV,EAAOnF,GAAM,EACjDyF,EAAID,EACJA,EAAID,EACJA,EAAI5E,EAAK2E,EAAG,IACZA,EAAID,EACJA,EAAIS,CACN,CAEAT,EAAIA,EAAKjD,KAAKiD,EAAK,EACnBC,EAAIA,EAAKlD,KAAKkD,EAAK,EACnBC,EAAIA,EAAKnD,KAAKmD,EAAK,EACnBC,EAAIA,EAAKpD,KAAKoD,EAAK,EACnBC,EAAIA,EAAKrD,KAAKqD,EAAK,EACnBrD,KAAKc,IAAImC,EAAGC,EAAGC,EAAGC,EAAGC,EACvB,CACU,UAAAvB,GACRpE,EAAMqF,EACR,CACA,OAAA3C,GACEJ,KAAKc,IAAI,EAAG,EAAG,EAAG,EAAG,GACrBpD,EAAMsC,KAAK/B,OACb,CAxDA,WAAArB,GACE+G,MAAM,GAAI,GAAI,GAAG,GAAO3D,KAPlBiD,EAAiB,EAAbH,EAAQ,GAAO9C,KACnBkD,EAAiB,EAAbJ,EAAQ,GAAO9C,KACnBmD,EAAiB,EAAbL,EAAQ,GAAO9C,KACnBoD,EAAiB,EAAbN,EAAQ,GAAO9C,KACnBqD,EAAiB,EAAbP,EAAQ,EAIpB,EA0DK,MAAMc,EAA8BhF,EAAa,IAAM,IAAIoE,GCpF5Da,EAA6B3B,OAAO,GAAK,GAAK,GAC9C4B,EAAuB5B,OAAO,IAEpC,SAAS6B,EACPhI,EACAiI,GAAK,GAKL,OAAIA,EAAW,CAAErD,EAAG1E,OAAOF,EAAI8H,GAAaI,EAAGhI,OAAQF,GAAK+H,EAAQD,IAC7D,CAAElD,EAAsC,EAAnC1E,OAAQF,GAAK+H,EAAQD,GAAiBI,EAA4B,EAAzBhI,OAAOF,EAAI8H,GAClE,CAEA,SAASK,EAAMC,EAAeH,GAAK,GACjC,MAAMlH,EAAMqH,EAAI7H,OAChB,IAAI8H,EAAK,IAAI1F,YAAY5B,GACrBuH,EAAK,IAAI3F,YAAY5B,GACzB,IAAK,IAAIc,EAAI,EAAGA,EAAId,EAAKc,IAAK,CAC5B,MAAM+C,EAAEA,EAACsD,EAAEA,GAAMF,EAAQI,EAAIvG,GAAIoG,IAChCI,EAAGxG,GAAIyG,EAAGzG,IAAM,CAAC+C,EAAGsD,EACvB,CACA,MAAO,CAACG,EAAIC,EACd;AAIA,MAAMC,EAAQ,CAAC3D,EAAW4D,EAAYC,IAAsB7D,IAAM6D,EAC5DC,EAAQ,CAAC9D,EAAWsD,EAAWO,IAAuB7D,GAAK,GAAM6D,EAAOP,IAAMO,EAE9EE,EAAS,CAAC/D,EAAWsD,EAAWO,IAAuB7D,IAAM6D,EAAMP,GAAK,GAAMO,EAC9EG,EAAS,CAAChE,EAAWsD,EAAWO,IAAuB7D,GAAK,GAAM6D,EAAOP,IAAMO,EAE/EI,EAAS,CAACjE,EAAWsD,EAAWO,IAAsB7D,GAAO,GAAK6D,EAAOP,IAAOO,EAAI,GACpFK,EAAS,CAAClE,EAAWsD,EAAWO,IAAuB7D,IAAO6D,EAAI,GAAQP,GAAM,GAAKO,EAa3F,SAASM,EACPV,EACAC,EACAU,EACAC,GAKA,MAAMf,GAAKI,IAAE,IAAUW,IAAG,GAC1B,MAAO,CAAErE,EAAIyD,EAAKW,GAAMd,EAAK,GAAK,GAAG,GAAS,EAAGA,EAAO,EAAJA,EACtD,CAEA,MAAMgB,EAAQ,CAACZ,EAAYW,EAAYE,KAAwBb,IAAE,IAAWW,IAAE,IAAUE,IAAG,GACrFC,EAAQ,CAACC,EAAahB,EAAYW,EAAYM,IAClDjB,EAAMW,EAAKM,GAAOD,EAAM,GAAK,MAAY,EACrCE,EAAQ,CAACjB,EAAYW,EAAYE,EAAYK,KAAsBlB,QACzDW,IAAE,IAAUE,IAAG,IAAUK,IAAG,GACtCC,EAAQ,CAACJ,EAAahB,EAAYW,EAAYM,EAAYI,IAC9DrB,EAAMW,EAAKM,EAAKI,GAAML,EAAO,GAAK,GAAG,GAAS,EAC1CM,EAAQ,CAACrB,EAAYW,EAAYE,EAAYK,EAAYI,KAC5DtB,IAAE,IAAWW,IAAE,IAAWE,IAAE,IAAWK,IAAE,IAAWI,IAAE,GACnDC,EAAQ,CAACR,EAAahB,EAAYW,EAAYM,EAAYI,EAAYI,IACzEzB,EAAKW,EAAKM,EAAKI,EAAKI,GAAMT,EAAO,GAAK,GAAG,GAAS,EC3D/CU,EAA2BpH,YAAYmB,KAAK,CAChD,WAAY,WAAY,WAAY,WAAY,UAAY,WAAY,WAAY,WACpF,WAAY,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WACpF,WAAY,WAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WACpF,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UAAY,UACpF,UAAY,UAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WACpF,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,UACpF,UAAY,UAAY,UAAY,UAAY,UAAY,WAAY,WAAY,WACpF,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,WAAY,aAIhFkG,EAA2B,IAAIrH,YAAY,IAGjD,MAAesH,UAAwC3E,EAe3C,GAAAiB,GACR,MAAMW,EAAEA,EAACC,EAAEA,EAACC,EAAEA,EAACC,EAAEA,EAACC,EAAEA,EAACG,EAAEA,EAACyC,EAAEA,EAACC,EAAEA,GAAMlG,KACnC,MAAO,CAACiD,EAAGC,EAAGC,EAAGC,EAAGC,EAAGG,EAAGyC,EAAGC,EAC/B,CAEU,GAAApF,CACRmC,EAAWC,EAAWC,EAAWC,EAAWC,EAAWG,EAAWyC,EAAWC,GAE7ElG,KAAKiD,EAAQ,EAAJA,EACTjD,KAAKkD,EAAQ,EAAJA,EACTlD,KAAKmD,EAAQ,EAAJA,EACTnD,KAAKoD,EAAQ,EAAJA,EACTpD,KAAKqD,EAAQ,EAAJA,EACTrD,KAAKwD,EAAQ,EAAJA,EACTxD,KAAKiG,EAAQ,EAAJA,EACTjG,KAAKkG,EAAQ,EAAJA,CACX,CACU,OAAAtE,CAAQL,EAAgB+B,GAEhC,IAAK,IAAI1F,EAAI,EAAGA,EAAI,GAAIA,IAAK0F,GAAU,EAAGyC,EAASnI,GAAK2D,EAAKgC,UAAUD,GAAQ,GAC/E,IAAK,IAAI1F,EAAI,GAAIA,EAAI,GAAIA,IAAK,CAC5B,MAAMuI,EAAMJ,EAASnI,EAAI,IACnBwI,EAAKL,EAASnI,EAAI,GAClByI,EAAKjI,EAAK+H,EAAK,GAAK/H,EAAK+H,EAAK,IAAMA,IAAS,EAC7CG,EAAKlI,EAAKgI,EAAI,IAAMhI,EAAKgI,EAAI,IAAMA,IAAQ,GACjDL,EAASnI,GAAM0I,EAAKP,EAASnI,EAAI,GAAKyI,EAAKN,EAASnI,EAAI,IAAO,CACjE,CAEA,IAAIqF,EAAEA,EAACC,EAAEA,EAACC,EAAEA,EAACC,EAAEA,EAACC,EAAEA,EAACG,EAAEA,EAACyC,EAAEA,EAACC,EAAEA,GAAMlG,KACjC,IAAK,IAAIpC,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,MACM2I,EAAKL,GADI9H,EAAKiF,EAAG,GAAKjF,EAAKiF,EAAG,IAAMjF,EAAKiF,EAAG,KACzBpC,EAAIoC,EAAGG,EAAGyC,GAAKH,EAASlI,GAAKmI,EAASnI,GAAM,EAE/D4I,GADSpI,EAAK6E,EAAG,GAAK7E,EAAK6E,EAAG,IAAM7E,EAAK6E,EAAG,KAC7B7B,EAAI6B,EAAGC,EAAGC,GAAM,EACrC+C,EAAID,EACJA,EAAIzC,EACJA,EAAIH,EACJA,EAAID,EAAKmD,EAAM,EACfnD,EAAID,EACJA,EAAID,EACJA,EAAID,EACJA,EAAIsD,EAAMC,EAAM,CAClB,CAEAvD,EAAIA,EAAKjD,KAAKiD,EAAK,EACnBC,EAAIA,EAAKlD,KAAKkD,EAAK,EACnBC,EAAIA,EAAKnD,KAAKmD,EAAK,EACnBC,EAAIA,EAAKpD,KAAKoD,EAAK,EACnBC,EAAIA,EAAKrD,KAAKqD,EAAK,EACnBG,EAAIA,EAAKxD,KAAKwD,EAAK,EACnByC,EAAIA,EAAKjG,KAAKiG,EAAK,EACnBC,EAAIA,EAAKlG,KAAKkG,EAAK,EACnBlG,KAAKc,IAAImC,EAAGC,EAAGC,EAAGC,EAAGC,EAAGG,EAAGyC,EAAGC,EAChC,CACU,UAAApE,GACRpE,EAAMqI,EACR,CACA,OAAA3F,GACEJ,KAAKc,IAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC9BpD,EAAMsC,KAAK/B,OACb,CA/DA,WAAArB,CAAYa,GACVkG,MAAM,GAAIlG,EAAW,GAAG,EAC1B;AAiEI,MAAOgJ,UAAgBT,EAW3B,WAAApJ,GACE+G,MAAM,IATE3D,KAAAiD,EAA2B,EAAfP,EAAU,GAAO1C,KAC7BkD,EAA2B,EAAfR,EAAU,GAAO1C,KAC7BmD,EAA2B,EAAfT,EAAU,GAAO1C,KAC7BoD,EAA2B,EAAfV,EAAU,GAAO1C,KAC7BqD,EAA2B,EAAfX,EAAU,GAAO1C,KAC7BwD,EAA2B,EAAfd,EAAU,GAAO1C,KAC7BiG,EAA2B,EAAfvD,EAAU,GAAO1C,KAC7BkG,EAA2B,EAAfxD,EAAU,EAGhC,EAII,MAAOgE,UAAgBV,EAS3B,WAAApJ,GACE+G,MAAM,IAAI3D,KATFiD,EAA2B,EAAfN,EAAU,GAAO3C,KAC7BkD,EAA2B,EAAfP,EAAU,QACtBQ,EAA2B,EAAfR,EAAU,GAAO3C,KAC7BoD,EAA2B,EAAfT,EAAU,GAAO3C,KAC7BqD,EAA2B,EAAfV,EAAU,QACtBa,EAA2B,EAAfb,EAAU,GAAO3C,KAC7BiG,EAA2B,EAAftD,EAAU,GAAO3C,KAC7BkG,EAA2B,EAAfvD,EAAU,EAGhC;AAQF,MAAMgE,EAAwB,KAAKC,EAAW,CAC5C,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,qBAClE,qBAAsB,qBAAsB,qBAAsB,sBAClEC,IAAI9K,GAAImG,OAAQnG,KArBY,GAsBxB+K,EAA2B,KAAQH,EAAK,GAAb,GAC3BI,EAA2B,KAAQJ,EAAK,GAAb,GAG3BK,EAA6B,IAAItI,YAAY,IAC7CuI,EAA6B,IAAIvI,YAAY,IAGnD,MAAewI,UAAwC7F,EAyB3C,GAAAiB,GAIR,MAAM8B,GAAEA,EAAEC,GAAEA,EAAEU,GAAEA,EAAEC,GAAEA,EAAEK,GAAEA,EAAEH,GAAEA,EAAEO,GAAEA,EAAEF,GAAEA,EAAEM,GAAEA,EAAEF,GAAEA,EAAEwB,GAAEA,EAAEC,GAAEA,EAAEC,GAAEA,EAAEC,GAAEA,EAAEC,GAAEA,EAAEC,GAAEA,GAAOxH,KAC3E,MAAO,CAACoE,EAAIC,EAAIU,EAAIC,EAAIK,EAAIH,EAAIO,EAAIF,EAAIM,EAAIF,EAAIwB,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EACtE,CAEU,GAAA1G,CACRsD,EAAYC,EAAYU,EAAYC,EAAYK,EAAYH,EAAYO,EAAYF,EACpFM,EAAYF,EAAYwB,EAAYC,EAAYC,EAAYC,EAAYC,EAAYC,GAEpFxH,KAAKoE,GAAU,EAALA,EACVpE,KAAKqE,GAAU,EAALA,EACVrE,KAAK+E,GAAU,EAALA,EACV/E,KAAKgF,GAAU,EAALA,EACVhF,KAAKqF,GAAU,EAALA;AACVrF,KAAKkF,GAAU,EAALA,EACVlF,KAAKyF,GAAU,EAALA,EACVzF,KAAKuF,GAAU,EAALA,EACVvF,KAAK6F,GAAU,EAALA,EACV7F,KAAK2F,GAAU,EAALA,EACV3F,KAAKmH,GAAU,EAALA,EACVnH,KAAKoH,GAAU,EAALA,EACVpH,KAAKqH,GAAU,EAALA,EACVrH,KAAKsH,GAAU,EAALA,EACVtH,KAAKuH,GAAU,EAALA,EACVvH,KAAKwH,GAAU,EAALA,CACZ,CACU,OAAA5F,CAAQL,EAAgB+B,GAEhC,IAAK,IAAI1F,EAAI,EAAGA,EAAI,GAAIA,IAAK0F,GAAU,EACrC0D,EAAWpJ,GAAK2D,EAAKgC,UAAUD,GAC/B2D,EAAWrJ,GAAK2D,EAAKgC,UAAWD,GAAU,GAE5C,IAAK,IAAI1F,EAAI,GAAIA,EAAI,GAAIA,IAAK,CAE5B,MAAM6J,EAA4B,EAArBT,EAAWpJ,EAAI,IACtB8J,EAA4B,EAArBT,EAAWrJ,EAAI,IACtB+J,EAAMC,EAAWH,EAAMC,EAAM,GAAKE,EAAWH,EAAMC,EAAM,GAAKG,EAAUJ,EAAMC,EAAM,GACpFI,EAAMC,EAAWN,EAAMC,EAAM,GAAKK,EAAWN,EAAMC,EAAM,GAAKM,EAAUP,EAAMC,EAAM,GAEpFO,EAA0B,EAApBjB,EAAWpJ,EAAI,GACrBsK,EAA0B,EAApBjB,EAAWrJ,EAAI,GACrBuK,EAAMP,EAAWK,EAAKC,EAAK,IAAME,EAAWH,EAAKC,EAAK,IAAML,EAAUI,EAAKC,EAAK,GAChFG,EAAMN,EAAWE,EAAKC,EAAK,IAAMI,EAAWL,EAAKC,EAAK,IAAMF,EAAUC,EAAKC,EAAK,GAEhFK,EAAOC,EAAUV,EAAKO,EAAKpB,EAAWrJ,EAAI,GAAIqJ,EAAWrJ,EAAI,KAC7D6K,EAAOC,EAAUH,EAAMZ,EAAKQ,EAAKnB,EAAWpJ,EAAI,GAAIoJ,EAAWpJ,EAAI,KACzEoJ,EAAWpJ,GAAY,EAAP6K,EAChBxB,EAAWrJ,GAAY,EAAP2K,CAClB,CACA,IAAInE,GAAEA,EAAEC,GAAEA,EAAEU,GAAEA,EAAEC,GAAEA,EAAEK,GAAEA,EAAEH,GAAEA,EAAEO,GAAEA,EAAEF,GAAEA,EAAEM,GAAEA,EAAEF,GAAEA,EAAEwB,GAAEA,EAAEC,GAAEA,EAAEC,GAAEA,EAAEC,GAAEA,EAAEC,GAAEA,EAAEC,GAAEA,GAAOxH,KAEzE,IAAK,IAAIpC,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAE3B,MAAM+K,EAAUf,EAAW/B,EAAIF,EAAI,IAAMiC,EAAW/B,EAAIF,EAAI,IAAMyC,EAAWvC,EAAIF,EAAI,IAC/EiD,EAAUb,EAAWlC,EAAIF,EAAI,IAAMoC,EAAWlC,EAAIF,EAAI,IAAM2C,EAAWzC,EAAIF,EAAI,IAE/EkD,EAAQhD,EAAKsB,GAAMtB,EAAOwB,EAI1ByB,EAAOC,EAAUvB,EAAIoB,EAHdjD,EAAMyB,GAAQzB,EAAK2B,EAGUP,EAAUnJ,GAAIqJ,EAAWrJ,IAC7DoL,EAAMC,EAAUH,EAAMvB,EAAIoB,EAASE,EAAM/B,EAAUlJ,GAAIoJ,EAAWpJ,IAClEsL,EAAa,EAAPJ,EAENK,EAAUvB,EAAWxD,EAAIC,EAAI,IAAM+D,EAAWhE,EAAIC,EAAI,IAAM+D,EAAWhE,EAAIC,EAAI,IAC/E+E,EAAUrB,EAAW3D,EAAIC,EAAI,IAAMiE,EAAWlE,EAAIC,EAAI,IAAMiE,EAAWlE,EAAIC,EAAI,IAC/EgF,EAAOjF,EAAMW,EAAOX,EAAKiB,EAAON,EAAKM,EACrCiE,EAAQjF,EAAKW,EAAOX,EAAKa,EAAOF,EAAKE,EAC3CqC,EAAU,EAALF,EACLG,EAAU,EAALF,EACLD,EAAU,EAALF,EACLG,EAAU,EAALF,EACLD,EAAU,EAALtB,EACLuB,EAAU,EAALzB,IACFhF,EAAGkF,EAAI5B,EAAG0B,GAAO4D,EAAa,EAAL9D,EAAa,EAALF,EAAc,EAANyD,EAAe,EAANE,IACrDzD,EAAU,EAALJ,EACLE,EAAU,EAALL,EACLG,EAAU,EAALN,EACLG,EAAU,EAALF,EACLD,EAAU,EAALX,EACLY,EAAU,EAALX,EACL,MAAMmF,EAAMC,EAAUP,EAAKE,EAASE,GACpClF,EAAKsF,EAAUF,EAAKR,EAAKG,EAASE,GAClChF,EAAW,EAANmF,CACP,GAEG7I,EAAGyD,EAAIH,EAAGI,GAAOkF,EAAkB,EAAVvJ,KAAKoE,GAAkB,EAAVpE,KAAKqE,GAAa,EAALD,EAAa,EAALC,MAC3D1D,EAAGoE,EAAId,EAAGe,GAAOuE,EAAkB,EAAVvJ,KAAK+E,GAAkB,EAAV/E,KAAKgF,GAAa,EAALD,EAAa,EAALC,MAC3DrE,EAAG0E,EAAIpB,EAAGiB,GAAOqE,EAAkB,EAAVvJ,KAAKqF,GAAkB,EAAVrF,KAAKkF,GAAa,EAALG,EAAa,EAALH,MAC3DvE,EAAG8E,EAAIxB,EAAGsB,GAAOgE,EAAkB,EAAVvJ,KAAKyF,GAAkB,EAAVzF,KAAKuF,GAAa,EAALE,EAAa,EAALF,MAC3D5E,EAAGkF,EAAI5B,EAAG0B,GAAO4D,EAAkB,EAAVvJ,KAAK6F,GAAkB,EAAV7F,KAAK2F,GAAa,EAALE,EAAa,EAALF,MAC3DhF,EAAGwG,EAAIlD,EAAGmD,GAAOmC,EAAkB,EAAVvJ,KAAKmH,GAAkB,EAAVnH,KAAKoH,GAAa,EAALD,EAAa,EAALC,MAC3DzG,EAAG0G,EAAIpD,EAAGqD,GAAOiC,EAAkB,EAAVvJ,KAAKqH,GAAkB,EAAVrH,KAAKsH,GAAa,EAALD,EAAa,EAALC,MAC3D3G,EAAG4G,EAAItD,EAAGuD,GAAO+B,EAAkB,EAAVvJ,KAAKuH,GAAkB,EAAVvH,KAAKwH,GAAa,EAALD,EAAa,EAALC,IAC9DxH,KAAKc,IAAIsD,EAAIC,EAAIU,EAAIC,EAAIK,EAAIH,EAAIO,EAAIF,EAAIM,EAAIF,EAAIwB,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EACvE,CACU,UAAA1F,GACRpE,EAAMsJ,EAAYC,EACpB,CACA,OAAA7G,GACE1C,EAAMsC,KAAK/B,QACX+B,KAAKc,IAAI,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EACxD,CA7GA,WAAAlE,CAAYa,GACVkG,MAAM,IAAKlG,EAAW,IAAI,EAC5B,EA+GI,MAAOkM,UAAgBzC,EAkB3B,WAAAtK,GACE+G,MAAM,IAAI3D,KAlBFoE,GAA4B,EAAfvB,EAAU,GAAO7C,KAC9BqE,GAA4B,EAAfxB,EAAU,GAAO7C,KAC9B+E,GAA4B,EAAflC,EAAU,GAAO7C,KAC9BgF,GAA4B,EAAfnC,EAAU,GAAO7C,KAC9BqF,GAA4B,EAAfxC,EAAU,QACvBqC,GAA4B,EAAfrC,EAAU,GAAO7C,KAC9ByF,GAA4B,EAAf5C,EAAU,GAAO7C,KAC9BuF,GAA4B,EAAf1C,EAAU,GAAO7C,KAC9B6F,GAA4B,EAAfhD,EAAU,GAAO7C,KAC9B2F,GAA4B,EAAf9C,EAAU,QACvBsE,GAA6B,EAAhBtE,EAAU,SACvBuE,GAA6B,EAAhBvE,EAAU,IAAQ7C,KAC/BqH,GAA6B,EAAhBxE,EAAU,IAAQ7C,KAC/BsH,GAA6B,EAAhBzE,EAAU,IAAQ7C,KAC/BuH,GAA6B,EAAhB1E,EAAU,IAAQ7C,KAC/BwH,GAA6B,EAAhB3E,EAAU,GAIjC,EAII,MAAO+G,WAAgB1C,EAkB3B,WAAAtK,GACE+G,MAAM,IAAI3D,KAlBFoE,GAA4B,EAAfxB,EAAU,GAAO5C,KAC9BqE,GAA4B,EAAfzB,EAAU,GAAO5C,KAC9B+E,GAA4B,EAAfnC,EAAU,GAAO5C,KAC9BgF,GAA4B,EAAfpC,EAAU,GAAO5C,KAC9BqF,GAA4B,EAAfzC,EAAU,QACvBsC,GAA4B,EAAftC,EAAU,GAAO5C,KAC9ByF,GAA4B,EAAf7C,EAAU,GAAO5C,KAC9BuF,GAA4B,EAAf3C,EAAU,GAAO5C,KAC9B6F,GAA4B,EAAfjD,EAAU,GAAO5C,KAC9B2F,GAA4B,EAAf/C,EAAU,QACvBuE,GAA6B,EAAhBvE,EAAU,SACvBwE,GAA6B,EAAhBxE,EAAU,IAAQ5C,KAC/BqH,GAA6B,EAAhBzE,EAAU,IAAQ5C,KAC/BsH,GAA6B,EAAhB1E,EAAU,IAAQ5C,KAC/BuH,GAA6B,EAAhB3E,EAAU,IAAQ5C,KAC/BwH,GAA6B,EAAhB5E,EAAU,GAIjC;AA8EK,MAAMiH,GAAyCjL,EACpD,IAAM,IAAI6H,EACM/G,EAAQ,IAGboK,GAAyClL,EACpD,IAAM,IAAI8H,EACMhH,EAAQ,IAIbqK,GAAyCnL,EACpD,IAAM,IAAI+K,EACMjK,EAAQ,IAGbsK,GAAyCpL,EACpD,IAAM,IAAIgL,GACMlK,EAAQ,ICtapBuK,GAAM/H,OAAO,GACbgI,GAAMhI,OAAO,GACbiI,GAAMjI,OAAO,GACbkI,GAAMlI,OAAO,GACbmI,GAAQnI,OAAO,KACfoI,GAASpI,OAAO,KAChBqI,GAAoB,GACpBC,GAAsB,GACtBC,GAAuB,GAC7B,IAAK,IAAIC,EAAQ,EAAGC,EAAIT,GAAKU,EAAI,EAAGC,EAAI,EAAGH,EAAQ,GAAIA,IAAS,EAE7DE,EAAGC,GAAK,CAACA,GAAI,EAAID,EAAI,KAAS,GAC/BL,GAAQO,KAAK,GAAM,EAAGD,EAACD,IAEvBJ,GAAUM,MAAMJ,EAAO,IAAQA,EAAM,GAAS,EAAK,IAEnD,IAAIK,EAAId,GACR,IAAK,IAAIe,EAAI,EAAGA,EAAI,EAAGA,IACrBL,GAAMA,GAAKT,IAASS,GAAKP,IAAOE,IAAWD,GACvCM,EAAIR,KAAKY,GAAKb,KAASA,IAAOhI,OAAO8I,IAAMd,IAEjDO,GAAWK,KAAKC,EAClB,CACA,MAAME,GAAQ/G,EAAMuG,IAAY,GAC1BS,GAAcD,GAAM,GACpBE,GAAcF,GAAM,GAGpBG,GAAQ,CAACzK,EAAWsD,EAAWO,IAAeA,EAAI,GFTzC,EAAC7D,EAAWsD,EAAWO,IAAsBP,GAAOO,EAAI,GAAQ7D,IAAO,GAAK6D,EES9B6G,CAAO1K,EAAGsD,EAAGO,GFZ3D,EAAC7D,EAAWsD,EAAWO,IAAuB7D,GAAK6D,EAAMP,IAAM,GAAMO,EEYL8G,CAAO3K,EAAGsD,EAAGO,GACtF+G,GAAQ,CAAC5K,EAAWsD,EAAWO,IAAeA,EAAI,GFTzC,EAAC7D,EAAWsD,EAAWO,IAAsB7D,GAAO6D,EAAI,GAAQP,IAAM,GAAMO,EES9BgH,CAAO7K,EAAGsD,EAAGO,GFZ3D,EAAC7D,EAAWsD,EAAWO,IAAuBP,GAAKO,EAAM7D,IAAM,GAAM6D,EEYLiH,CAAO9K,EAAGsD,EAAGO,GA+CtF,MAAOkH,GAoCX,KAAAlL,GACE,OAAOR,KAAKK,YACd,CACU,MAAAsL,GACRlN,EAAWuB,KAAK4L,SApFd,SAAkBpH,EAAgBqH,EAAiB,IACvD,MAAM3I,EAAI,IAAIxE,YAAY,IAE1B,IAAK,IAAIgM,EAAQ,GAAKmB,EAAQnB,EAAQ,GAAIA,IAAS,CAEjD,IAAK,IAAIE,EAAI,EAAGA,EAAI,GAAIA,IAAK1H,EAAE0H,GAAKpG,EAAEoG,GAAKpG,EAAEoG,EAAI,IAAMpG,EAAEoG,EAAI,IAAMpG,EAAEoG,EAAI,IAAMpG,EAAEoG,EAAI,IACrF,IAAK,IAAIA,EAAI,EAAGA,EAAI,GAAIA,GAAK,EAAG,CAC9B,MAAMkB,GAAQlB,KAAS,GACjBmB,GAAQnB,KAAS,GACjBoB,EAAK9I,EAAE6I,GACPE,EAAK/I,EAAE6I,EAAO,GACdG,EAAKd,GAAMY,EAAIC,EAAI,GAAK/I,EAAE4I,GAC1BK,EAAKZ,GAAMS,EAAIC,EAAI,GAAK/I,EAAE4I,EAAO,GACvC,IAAK,IAAIjB,EAAI,EAAGA,EAAI,GAAIA,GAAK,GAC3BrG,EAAEoG,EAAIC,IAAMqB,EACZ1H,EAAEoG,EAAIC,EAAI,IAAMsB,CAEpB,CAEA,IAAIC,EAAO5H,EAAE,GACT6H,EAAO7H,EAAE,GACb,IAAK,IAAIuG,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,MAAMzM,EAAQkM,GAAUO,GAClBmB,EAAKd,GAAMgB,EAAMC,EAAM/N,GACvB6N,EAAKZ,GAAMa,EAAMC,EAAM/N,GACvBgO,EAAK/B,GAAQQ,GACnBqB,EAAO5H,EAAE8H,GACTD,EAAO7H,EAAE8H,EAAK,GACd9H,EAAE8H,GAAMJ,EACR1H,EAAE8H,EAAK,GAAKH,CACd,CAEA,IAAK,IAAItB,EAAI,EAAGA,EAAI,GAAIA,GAAK,GAAI,CAC/B,IAAK,IAAID,EAAI,EAAGA,EAAI,GAAIA,IAAK1H,EAAE0H,GAAKpG,EAAEqG,EAAID,GAC1C,IAAK,IAAIA,EAAI,EAAGA,EAAI,GAAIA,IAAKpG,EAAEqG,EAAID,KAAO1H,GAAG0H,EAAC,GAAQ,IAAM1H,GAAG0H,EAAC,GAAQ,GAC1E,CAEApG,EAAE,IAAM0G,GAAYR,GACpBlG,EAAE,IAAM2G,GAAYT,EACtB,CACAhN,EAAMwF,EACR,CA4CIqJ,CAAQvM,KAAK4L,QAAS5L,KAAK6L,QAC3BpN,EAAWuB,KAAK4L,SAChB5L,KAAKwM,OAAS,EACdxM,KAAKwB,IAAM,CACb,CACA,MAAAtC,CAAOoC,GACLrE,EAAQ+C,MACR5D,EAAOkF,GACP,MAAMjC,SAAEA,EAAQgD,MAAEA,GAAUrC,KACtBlD,EAAMwE,EAAKhF,OACjB,IAAK,IAAIkF,EAAM,EAAGA,EAAM1E,GAAO,CAC7B,MAAM2E,EAAOC,KAAKlE,IAAI6B,EAAWW,KAAKwB,IAAK1E,EAAM0E,GACjD,IAAK,IAAI5D,EAAI,EAAGA,EAAI6D,EAAM7D,IAAKyE,EAAMrC,KAAKwB,QAAUF,EAAKE,KACrDxB,KAAKwB,MAAQnC,GAAUW,KAAK2L,QAClC,CACA,OAAO3L,IACT,CACU,MAAAyM,GACR,GAAIzM,KAAK3C,SAAU,OACnB2C,KAAK3C,UAAW,EAChB,MAAMgF,MAAEA,EAAK1C,OAAEA,EAAM6B,IAAEA,EAAGnC,SAAEA,GAAaW,KAEzCqC,EAAMb,IAAQ7B,EACA,IAATA,GAAwB6B,IAAQnC,EAAW,GAAGW,KAAK2L,SACxDtJ,EAAMhD,EAAW,IAAM,IACvBW,KAAK2L,QACP,CACU,SAAAe,CAAUnP,GAClBN,EAAQ+C,MAAM,GACd5D,EAAOmB,GACPyC,KAAKyM,SACL,MAAME,EAAY3M,KAAKqC,OACjBhD,SAAEA,GAAaW,KACrB,IAAK,IAAIwB,EAAM,EAAG1E,EAAMS,EAAIjB,OAAQkF,EAAM1E,GAAO,CAC3CkD,KAAKwM,QAAUnN,GAAUW,KAAK2L,SAClC,MAAMlK,EAAOC,KAAKlE,IAAI6B,EAAWW,KAAKwM,OAAQ1P,EAAM0E,GACpDjE,EAAIuD,IAAI6L,EAAU9K,SAAS7B,KAAKwM,OAAQxM,KAAKwM,OAAS/K,GAAOD,GAC7DxB,KAAKwM,QAAU/K,EACfD,GAAOC,CACT,CACA,OAAOlE,CACT,CACA,OAAAqP,CAAQrP,GAEN,IAAKyC,KAAK6M,UAAW,MAAM,IAAI1Q,MAAM,yCACrC,OAAO6D,KAAK0M,UAAUnP,EACxB,CACA,GAAAuP,CAAIvQ,GAEF,OADAT,EAAQS,GACDyD,KAAK4M,QAAQ,IAAInQ,WAAWF,GACrC;AACA,UAAA2D,CAAW3C,GAET,GADAD,EAAQC,EAAKyC,MACTA,KAAK3C,SAAU,MAAM,IAAIlB,MAAM,+BAGnC,OAFA6D,KAAK0M,UAAUnP,GACfyC,KAAKI,UACE7C,CACT,CACA,MAAA4B,GACE,OAAOa,KAAKE,WAAW,IAAIzD,WAAWuD,KAAKvC,WAC7C,CACA,OAAA2C,GACEJ,KAAK5C,WAAY,EACjBM,EAAMsC,KAAKqC,MACb,CACA,UAAAhC,CAAWC,GACT,MAAMjB,SAAEA,EAAQM,OAAEA,EAAMlC,UAAEA,EAASoO,OAAEA,EAAMgB,UAAEA,GAAc7M,KAY3D,OAXAM,IAAAA,EAAO,IAAIoL,GAAOrM,EAAUM,EAAQlC,EAAWoP,EAAWhB,IAC1DvL,EAAGsL,QAAQ9K,IAAId,KAAK4L,SACpBtL,EAAGkB,IAAMxB,KAAKwB,IACdlB,EAAGkM,OAASxM,KAAKwM,OACjBlM,EAAGjD,SAAW2C,KAAK3C,SACnBiD,EAAGuL,OAASA,EAEZvL,EAAGX,OAASA,EACZW,EAAG7C,UAAYA,EACf6C,EAAGuM,UAAYA,EACfvM,EAAGlD,UAAY4C,KAAK5C,UACbkD,CACT,CAzGA,WAAA1D,CACEyC,EACAM,EACAlC,EACAoP,GAAY,EACZhB,EAAiB,IAWjB,QA7BQrK,IAAM,OACNgL,OAAS,OACTnP,UAAW,OAEXD,WAAY,OAKZyP,WAAY,EAWpB7M,KAAKX,SAAWA,EAChBW,KAAKL,OAASA,EACdK,KAAKvC,UAAYA,EACjBuC,KAAK6M,UAAYA,EACjB7M,KAAK6L,OAASA,EAEd/P,EAAQ2B,EAAW,eAGb,EAAI4B,GAAYA,EAAW,KAC/B,MAAM,IAAIlD,MAAM,2CNtEhB,IAAc4B,EMuEhBiC,KAAKqC,MAAQ,IAAI5F,WAAW,KAC5BuD,KAAK4L,SNxEW7N,EMwEGiC,KAAKqC,MNvEnB,IAAI3D,YAAYX,EAAIE,OAAQF,EAAIG,WAAYwD,KAAKqL,MAAMhP,EAAII,WAAa,IMwE/E,EAwFF,MAAM6O,GAAY,CAACrN,EAAgBN,EAAkB5B,EAAmBqB,EAAiB,CAAA,IACvFF,EAAa,IAAM,IAAI8M,GAAOrM,EAAUM,EAAQlC,GAAYqB,GAGjDmO,GAAkCD,GAC7C,EACA,IACA,GACgBtN,EAAQ,IAGbwN,GAAkCF,GAC7C,EACA,IACA,GACgBtN,EAAQ,IAGbyN,GAAkCH,GAC7C,EACA,IACA,GACgBtN,EAAQ,IAGb0N,GAAkCJ,GAC7C,EACA,GACA,GACgBtN,EAAQ,KC3PpB2N,GAAe,MACnB,GAA0B,iBAAfC,WAAyB,OAAOA,WAEzC/N,OAAOgO,eAAehO,OAAOiO,UAAW,iBAAkB,CACxDlL,GAAAA,GACE,OAAOtC,IACT,EACAyN,cAAc,IAEhB,IAGE,GAA8B,oBAAnBC,eAAgC,OAAOA,cACpD,CAAA,eAESnO,OAAOiO,UAAUE,cAC1B,CAIF,MAAoB,oBAATC,KAA6BA,KACb,oBAAXC,OAA+BA,OACpB,oBAAXC,OAA+BA,YAA1C,CAGP,EAzBqB,GCMfC,GAAc,CAClBC,KAAMnK,EACNoK,OAAQlE,GACRmE,OAAQpE,GACRqE,OAAQlE,GACRmE,OAAQpE,GACR,WAAYkD,GACZ,WAAYC,GACZ,WAAYC,GACZ,WAAYC,IAQRgB,GAAyBC,IAC7B,QAAQ,GACN,IAAK,0BAA0BC,KAAKD,GAClC,MAAO,OACT,IAAK,oBAAoBC,KAAKD,GAC5B,MAAO,SACT,IAAK,oBAAoBC,KAAKD,GAC5B,MAAO,SACT,IAAK,oBAAoBC,KAAKD,GAC5B,MAAO,SACT,IAAK,oBAAoBC,KAAKD,GAC5B,MAAO,SACT,IAAK,cAAcC,KAAKD,GACtB,MAAO,WACT,IAAK,cAAcC,KAAKD,GACtB,MAAO,WACT,IAAK,cAAcC,KAAKD,GACtB,MAAO,WACT,IAAK,cAAcC,KAAKD,GACtB,MAAO,WACT,QACE,MAAM,IAAIE,UAAU,2BAA2BF,OAW/CG,GAAa,CAACH,EAAW3N,EAAKM;AAK3B,GAAID,EAAM,CACf,MAAMN,EAAOqN,GAAYO,IAAcP,GAAYM,GAAsBC,IACzE,OAAOtN,EAAKN,EAAMC,EAAKM,EACzB,CACE,MAAM,IAAI7E,MAAM,0BCjEdsS,GAAW,mCAQXC,GAAgBC,IAKpB,IAAIC,GAHJD,EAAMA,EAAIE,QAAQ,KAAM,KAGVvS,OACd,KAAwB,MAAjBqS,EAAIC,EAAM,MAAcA,EAC/BD,GAAOC,EAAMD,EAAIrS,OAASqS,EAAIG,UAAU,EAAGF,GAAOD,GAAKI,cAEvD,MAAMhP,EAAM,IAAIrD,YAA2B,EAAbiS,EAAIrS,OAAc,EAAK,GAC/CyB,EAAM,IAAItB,WAAWsD,GAC3B,IAAIiP,EAAO,EACP3S,EAAQ,EACR4S,EAAQ,EAEZ,IAAK,IAAIrR,EAAI,EAAGA,EAAI+Q,EAAIrS,OAAQsB,IAAK,CACnC,MAAMsR,EAAMT,GAASU,QAAQR,EAAI/Q,IACjC,QAAIsR,EAAY,MAAM,IAAIX,UAAU,4BAA4BI,EAAI/Q,MAEpEvB,EAASA,GAAS,EAAK6S,EACvBF,GAAQ,EAEJA,GAAQ,IACVA,GAAQ,EACRjR,EAAIkR,KAAW5S,IAAU2S,EAE7B,CAEA,OAAOjR,GASHqR,GAAgBrR,IACpB,IAAIiR,EAAO,EACP3S,EAAQ,EACRsS,EAAM,GAEV,IAAK,IAAI/Q,EAAI,EAAGA,EAAIG,EAAIzB,OAAQsB,IAI9B,IAHAvB,EAAQA,GAAU,EAAK0B,EAAIH,GAC3BoR,GAAQ,EAEDA,GAAQ,GACbL,GAAOF,GAAUpS,IAAW2S,EAAO,EAAM,IACzCA,GAAQ,EAQZ,OAJIA,EAAO,IACTL,GAAOF,GAAUpS,GAAU,EAAI2S,EAAS,KAGnCL,GC/DHU,GAAaV,IAEjBA,EAAMA,EAAIE,QAAQ,KAAM,IAExB,MAAM9O,EAAM,IAAIrD,YAAYiS,EAAIrS,OAAS,GACnCyB,EAAM,IAAItB,WAAWsD,GAE3B,IAAK,IAAInC,EAAI,EAAGA,EAAI+Q,EAAIrS,OAAQsB,GAAK,EACnCG,EAAIH,EAAI,GAAK0R,SAASX,EAAIG,UAAUlR,EAAGA,EAAI,GAAI,IAGjD,OAAOG,GAQHwR,GAAaxR,IACjB,IAAI4Q,EAAM,GAEV,IAAK,IAAI/Q,EAAI,EAAGA,EAAIG,EAAIzB,OAAQsB,IAAK,CACnC,MAAM4R,EAAMzR,EAAIH,GAAG6R,SAAS,IACT,IAAfD,EAAIlT,SAAcqS,GAAO,KAC7BA,GAAOa,CACT,CAEA,OAAOb,EAAII,eC5BPW,GAAgBf,IACpB,MAAM5O,EAAM,IAAIrD,YAAYiS,EAAIrS,QAC1ByB,EAAM,IAAItB,WAAWsD,GAE3B,IAAK,IAAInC,EAAI,EAAGA,EAAI+Q,EAAIrS,OAAQsB,IAC9BG,EAAIH,GAAyB,IAApB+Q,EAAIgB,WAAW/R,GAG1B,OAAOG,GAQH6R,GAAgB7R,IACpB,IAAI4Q,EAAM,GAEV,IAAK,IAAI/Q,EAAI,EAAGA,EAAIG,EAAIzB,OAAQsB,IAC9B+Q,GAAOkB,OAAOC,aAAa/R,EAAIH,IAGjC,OAAO+Q,GCtBHoB,GAAU1C,GAAY2C,YAAc,IAAI3C,GAAY2C,YAAgB,KAMpEC,GAAU5C,GAAY6C,YAAc,IAAI7C,GAAY6C,YAAgB,KAOpEC,GAAcxB,IAClB,IAAKoB,GACH,MAAM,IAAI5T,MAAM,8BAGlB,OAAO4T,GAAQK,OAAOzB,IAQlB0B,GAActS,IAClB,IAAKkS,GACH,MAAM,IAAI9T,MAAM,8BAGlB,OAAO8T,GAAQK,OAAOvS,IC5BxB,MAAMwS,GA6BJ,iBAAOC,CAAW7B,GAChB,OAAO,IAAI4B,GAAO,CAAEtS,OAAQyR,GAAaf,GAAK1Q,QAChD,CAOA,eAAOwS,CAAS9B,GACd,OAAO,IAAI4B,GAAO,CAAEtS,OAAQkS,GAAWxB,GAAK1Q,QAC9C,CAOA,iBAAOyS,CAAW/B,GAChB,OAAO,IAAI4B,GAAO,CAAEtS,OAAQyQ,GAAaC,GAAK1Q,QAChD,CAOA,cAAO0S,CAAQhC,GACb,OAAO,IAAI4B,GAAO,CAAEtS,OAAQoR,GAAUV,GAAK1Q,QAC7C,CAOA,UAAIA,GACF,OAAO+B,KAAKzD,MAAM0B,MACpB,CAMA,UAAI2S,GAQF,OAPArR,OAAOgO,eAAevN,KAAM,SAAU,CACpC6Q,YAAY,EACZC,UAAU,EACVrD,cAAc,EACdpR,MAAOuT,GAAa5P,KAAKzD,SAGpByD,KAAK4Q,MACd,CAMA,QAAIG,GAQF,OAPAxR,OAAOgO,eAAevN,KAAM,OAAQ,CAClC6Q,YAAY,EACZC,UAAU,EACVrD,cAAc,EACdpR,MAAOgU,GAAWrQ,KAAKzD,SAGlByD,KAAK+Q,IACd,CAMA,UAAIC,GAQF,OAPAzR,OAAOgO,eAAevN,KAAM,SAAU,CACpC6Q,YAAY,EACZC,UAAU,EACVrD,cAAc,EACdpR,MAAO+S,GAAapP,KAAKzD,SAGpByD,KAAKgR,MACd,CAMA,OAAIxB;AAQF,OAPAjQ,OAAOgO,eAAevN,KAAM,MAAO,CACjC6Q,YAAY,EACZC,UAAU,EACVrD,cAAc,EACdpR,MAAOkT,GAAUvP,KAAKzD,SAGjByD,KAAKwP,GACd,CAxHA,WAAA5S,EAAYqB,OAAEA,EAAMgT,KAAEA,EAAO,IAAO,CAAA,GAMlCjR,KAAKzD,WAA0B,IAAX0B,ECbJ,CAACgT,IAGZ,GAAI5D,GAAY6D,QAAQC,gBAC7B,OAAO9D,GAAY6D,OAAOC,gBAAgB,IAAI1U,WAAWwU,IAEzD,MAAM,IAAI9U,MAAM,mCDO6BiV,CAAYH,GAAQ,IAAIxU,WAAWwB,GAGhFsB,OAAOgO,eAAevN,KAAM,QAAS,CACnC6Q,YAAY,EACZC,UAAU,EACVrD,cAAc,EACdpR,MAAO2D,KAAKzD,OAEhB,EEtBF,MAAM8U,GAaJ,mBAAWC,GACT,MAAO,CACLC,OAAQ,GACRC,MAAO,UACPC,eAAe,EACfpD,UAAW,OACXqD,OAAQ,EACRC,QAAS,EACT/D,OAAQ,EAEZ,CA4EA,eAAOgE,EAASC,OACdA,EAAMxD,UACNA,EAAYgD,GAAKC,SAASjD,UAASqD,OACnCA,EAASL,GAAKC,SAASI,OAAMC,QAC7BA,EAAUN,GAAKC,SAASK,QAAO5Q,KAC/BA,EAAOyN,KAEP,MAAMxN,EC9GS,CAAC8Q,IAClB,MAAM/R,EAAM,IAAIrD,YAAY,GACtBqB,EAAM,IAAItB,WAAWsD,GAC3B,IAAIgS,EAAMD,EAEV,IAAK,IAAIlU,EAAI,EAAGA,GAAK,GACP,IAARmU,EADkBnU,IAEtBG,EAAIH,GAAW,IAANmU,EACTA,GAAOhU,EAAIH,GACXmU,GAAO,IAGT,OAAOhU,GDkGWiU,CAAWL,GACrBxS,EAAS4B,EAAKsN,EAAWwD,EAAOtV,MAAOyE,GAC7C,IAAK7B,GAAQhB,YAAcgB,EAAOhB,WAAa,GAC7C,MAAM,IAAIoQ,UAAU,0CAEtB,MAAMjL,EAAyC,GAAhCnE,EAAOA,EAAOhB,WAAa,GAQ1C,SANsB,IAAjBgB,EAAOmE,KAAkB,IACH,IAArBnE,EAAOmE,EAAS,KAAa,IACR,IAArBnE,EAAOmE,EAAS,KAAa,EACT,IAArBnE,EAAOmE,EAAS,IACnB,IAAMoO,GAEGjC,WAAWwC,SAASP,EAAQ,IACzC,CAQAE,QAAAA,EAASD,QAAEA,EAAU3R,KAAK2R,WAAc,CAAA,GACtC,OAAON,GAAKO,SAAS,CACnBC,OAAQ7R,KAAK6R,OACbxD,UAAWrO,KAAKqO,UAChBqD,OAAQ1R,KAAK0R,OACbC,UACA5Q,KAAMf,KAAKe,MAEf,CAcA,eAAOmR,EAASC,MACdA,EAAKN,OACLA,EAAMxD,UACNA,EAASqD,OACTA,EAASL,GAAKC,SAASI,OAAMC,QAC7BA,EAAUN,GAAKC,SAASK,QAAO/D,OAC/BA,EAASyD,GAAKC,SAAS1D,OAAM7M,KAC7BA,EAAOyN,KAGP,GAAI2D,EAAM7V,SAAWoV,EAAQ,OAAO,KAEpC,IAAIU,EAAQ,KAEZ,MAAMC,EAA+BzU,IACnC,MAAM0U,EAAiBjB,GAAKO,SAAS,CACnCC,SACAxD,YACAqD,SACAC,QAAS/T,EACTmD,SEzKgB,EAACvE,EAAG0E,KAGnB,CACL,GAAI1E,EAAEF,SAAW4E,EAAE5E,OACjB,MAAM,IAAIiS,UAAU,2CAEtB,IAAI3Q,GAAI,EACJL,EAAM,EACV,OAASK,EAAIpB,EAAEF,QACbiB,GAAOf,EAAEmT,WAAW/R,GAAKsD,EAAEyO,WAAW/R,GAExC,OAAe,IAARL,CACT,GF8JQgV,CAAgBJ,EAAOG,KACzBF,EAAQxU,EAAI+T,IAIhBU,EAAMV,GACN,IAAK,IAAI/T,EAAI,EAAGA,GAAKgQ,GAAoB,OAAVwE,IAC7BC,EAAMV,EAAU/T,GACF,OAAVwU,KACJC,EAAMV,EAAU/T,GACF,OAAVwU,KAJ2CxU,GAOjD,OAAOwU,CACT,CAUAF,QAAAA,EAASC,MAAEA,EAAKR,QAAEA,EAAU3R,KAAK2R,QAAO/D,OAAEA,IACxC,OAAOyD,GAAKa,SAAS,CACnBC,QACAN,OAAQ7R,KAAK6R,OACbxD,UAAWrO,KAAKqO,UAChBqD,OAAQ1R,KAAK0R,OACbC,UACA/D,SACA7M,KAAMf,KAAKe,MAEf,CAMA0O,QAAAA,GACE,MAAM+C,EAAIC;CACV,MACE,mBAEEzS,KAAKuR,OAAOjV,OAAS,EACjB0D,KAAKyR,cACH,GAAGe,EAAExS,KAAKuR,WAAWiB,EAAExS,KAAKwR,iBAAiBgB,EAAExS,KAAKuR,WACpD,GAAGiB,EAAExS,KAAKwR,iBAAiBgB,EAAExS,KAAKuR,WACpC,GAAGiB,EAAExS,KAAKwR,WAEhB,UAAUgB,EAAExS,KAAK6R,OAAOb,WACxB,aAAawB,EAAExS,KAAKqO,cACpB,UAAUmE,EAAExS,KAAK0R,WACjB,WAAWc,EAAExS,KAAK2R,UAEtB,CA/LA,WAAA/U,EAAY2U,OACVA,EAASF,GAAKC,SAASC,OAAMC,MAC7BA,EAAQH,GAAKC,SAASE,MAAKC,cAC3BA,EAAgBJ,GAAKC,SAASG,cAAaI,OAC3CA,EAAS,IAAItB,GAAQlC,UACrBA,EAAYgD,GAAKC,SAASjD,UAASqD,OACnCA,EAASL,GAAKC,SAASI,OAAMC,QAC7BA,EAAUN,GAAKC,SAASK,QAAO5Q,KAC/BA,GACE,IAKFf,KAAKuR,OAASA,EAKdvR,KAAKwR,MAAQA,EAKbxR,KAAKyR,cAAgBA,EAKrBzR,KAAK6R,OAA2B,iBAAXA,EAAsBtB,GAAOG,WAAWmB,GAAUA,EAKvE7R,KAAKqO,UAAYtN,EAAOsN,EAAYD,GAAsBC,GAK1DrO,KAAK0R,OAASA,EAKd1R,KAAK2R,QAAUA,EAKf3R,KAAKe,KAAOA,CACd,EGxFF,MAAM2R,GAaJ,mBAAWpB,GACT,MAAO,CACLC,OAAQ,GACRC,MAAO,UACPC,eAAe,EACfpD,UAAW,OACXqD,OAAQ,EACRiB,OAAQ,GACR/E,OAAQ,EAEZ,CAyEA,cAAO+D,EAAQgB,OAAEA,EAASD,GAAKpB,SAASqB,OAAMC,UAAEA,EAAYC,KAAKC,OAAU,CAAA,GACzE,OAAOpR,KAAKqL,MAAM6F,EAAY,IAAOD,EACvC,CAQAhB,OAAAA,EAAQiB,UAAEA,EAAYC,KAAKC,OAAU,CAAA,GACnC,OAAOJ,GAAKf,QAAQ,CAClBgB,OAAQ3S,KAAK2S,OACbC,aAEJ,CASA,gBAAOG,EAAUJ,OAAEA,EAASD,GAAKpB,SAASqB,OAAMC,UAAEA,EAAYC,KAAKC,OAAU,CAAA,GAC3E,OAAgB,IAATH,EAAiBC,GAAsB,IAATD,EACvC,CAQAI,SAAAA,EAAUH,UAAEA,EAAYC,KAAKC,OAAU,CAAA,GACrC,OAAOJ,GAAKK,UAAU,CACpBJ,OAAQ3S,KAAK2S,OACbC,aAEJ,CAaA,eAAOhB,EAASC,OAAEA,EAAMxD,UAAEA,EAASqD,OAAEA,EAAMiB,OAAEA,EAASD,GAAKpB,SAASqB,OAAMC,UAAEA,EAAYC,KAAKC,MAAK/R,KAAEA,IAClG,OAAOsQ,GAAKO,SAAS,CACnBC,SACAxD,YACAqD,SACAC,QAASe,GAAKf,QAAQ,CAAEgB,SAAQC,cAChC7R,QAEJ,CAQA6Q,QAAAA,EAASgB,UAAEA,EAAYC,KAAKC,OAAU,CAAA,GACpC,OAAOJ,GAAKd,SAAS,CACnBC,OAAQ7R,KAAK6R,OACbxD,UAAWrO,KAAKqO,UAChBqD,OAAQ1R,KAAK0R,OACbiB,OAAQ3S,KAAK2S,OACbC,YACA7R,KAAMf,KAAKe,MAEf,CAeA,eAAOmR,EAASC,MACdA,EAAKN,OACLA,EAAMxD,UACNA,EAASqD,OACTA,EAAMiB,OACNA,EAASD,GAAKpB,SAASqB,OAAMC,UAC7BA,EAAYC,KAAKC,MAAKlF,OACtBA,EAAM7M,KACNA,IAEA,OAAOsQ,GAAKa,SAAS,CACnBC,QACAN,SACAxD,YACAqD,SACAC,QAASe,GAAKf,QAAQ,CAAEgB,SAAQC,cAChChF,SACA7M,QAEJ,CAUAmR,QAAAA,EAASC,MAAEA,EAAKS,UAAEA,EAAShF,OAAEA,IAC3B,OAAO8E,GAAKR,SAAS,CACnBC,QACAN,OAAQ7R,KAAK6R,OACbxD,UAAWrO,KAAKqO,UAChBqD,OAAQ1R,KAAK0R,OACbiB,OAAQ3S,KAAK2S,OACbC,YACAhF,SACA7M,KAAMf,KAAKe,MAEf,CAMA0O,QAAAA;AACE,MAAM+C,EAAIC,mBACV,MACE,mBAEEzS,KAAKuR,OAAOjV,OAAS,EACjB0D,KAAKyR,cACH,GAAGe,EAAExS,KAAKuR,WAAWiB,EAAExS,KAAKwR,iBAAiBgB,EAAExS,KAAKuR,WACpD,GAAGiB,EAAExS,KAAKwR,iBAAiBgB,EAAExS,KAAKuR,WACpC,GAAGiB,EAAExS,KAAKwR,WAEhB,UAAUgB,EAAExS,KAAK6R,OAAOb,WACxB,aAAawB,EAAExS,KAAKqO,cACpB,UAAUmE,EAAExS,KAAK0R,WACjB,UAAUc,EAAExS,KAAK2S,SAErB,CArNA,WAAA/V,EAAY2U,OACVA,EAASmB,GAAKpB,SAASC,OAAMC,MAC7BA,EAAQkB,GAAKpB,SAASE,MAAKC,cAC3BA,EAAgBiB,GAAKpB,SAASG,cAAaI,OAC3CA,EAAS,IAAItB,GAAQlC,UACrBA,EAAYqE,GAAKpB,SAASjD,UAASqD,OACnCA,EAASgB,GAAKpB,SAASI,OAAMiB,OAC7BA,EAASD,GAAKpB,SAASqB,OAAM5R,KAC7BA,GACE,IAKFf,KAAKuR,OAASA,EAKdvR,KAAKwR,MAAQA,EAKbxR,KAAKyR,cAAgBA,EAKrBzR,KAAK6R,OAA2B,iBAAXA,EAAsBtB,GAAOG,WAAWmB,GAAUA,EAKvE7R,KAAKqO,UAAYtN,EAAOsN,EAAYD,GAAsBC,GAK1DrO,KAAK0R,OAASA,EAKd1R,KAAK2S,OAASA,EAKd3S,KAAKe,KAAOA,CACd,ECxFF,MAAMiS,GAAe,mFAMfC,GAAe,iBAMfC,GAAkB,sDAMlBC,GAAyB,iCAMzBC,GAAgB,aAMhBC,GAAyB,gBAM/B,MAAMC,GAQJ,YAAOC,CAAMC,GAAKzS,KAAEA,GAAS,CAAA,GAC3B,IAAI0S,EAEJ,IACEA,EAAYD,EAAIE,MAAMV,GAExB,CAAE,MAAOW,GAET,CAEA,IAAKC,MAAMC,QAAQJ,GACjB,MAAM,IAAIK,SAAS,sBAIrB,MAAMC,EAAUN,EAAU,GAAGO,cACvBC,EAAWR,EAAU,GAAGvP,MAAM,mBAAoB,GAAG2C,IAAIqN,oBAEzDC,EAAYV,EAAU,GAAGvP,MAAM,KAAKkQ,OAAO,CAACrC,EAAKsC,KACrD,MAAMC,EAAUD,EAAInQ,MAAM,QAAS,GAAG2C,IAAIqN,oBACpCK,EAAUD,EAAQ,GAAGN,cACrBQ,EAAUF,EAAQ,GAElBG,EAAU1C,EAGhB,OADA0C,EAAQF,GAAWC,EACZC,GACN,CAAA,GAGH,IAAIC,EACJ,MAAMC,EAAS,CAAA,EAEf,GAAgB,SAAZZ,EAAoB,CAItB,GAHAW,EAAMrD,QAG2B,IAAtB8C,EAAUxC,UAA2ByB,GAAc9E,KAAK6F,EAAUxC,SAG3E,MAAM,IAAIpD,UAAU,0CAFpBoG,EAAOhD,QAAUrC,SAAS6E,EAAUxC,QAAS,GAIjD,KAAO,IAAgB,SAAZoC,EAYT,MAAM,IAAIxF,UAAU,oBARpB,GAHAmG,EAAMhC,QAG0B,IAArByB,EAAUxB,OAAwB,CAC3C,IAAIU,GAAuB/E,KAAK6F,EAAUxB,QAGxC,MAAM,IAAIpE,UAAU,8BAFpBoG,EAAOhC,OAASrD,SAAS6E,EAAUxB,OAAQ,GAI/C,CAGF,CAsBA,QAlBgC,IAArBwB,EAAU5C,SACnBoD,EAAOpD,OAAS4C,EAAU5C,QAEJ,IAApB0C,EAAS3X,QACXqY,EAAOnD,MAAQyC,EAAS,QACK,IAAlBU,EAAOpD,QAA4C,KAAlBoD,EAAOpD,OACjDoD,EAAOpD,OAAS0C,EAAS,GACA,KAAhBA,EAAS,KAClBU,EAAOlD,eAAgB,KAGzBkD,EAAOnD,MAAQyC,EAAS,QACK,IAAlBU,EAAOpD,QAA4C,KAAlBoD,EAAOpD,SACjDoD,EAAOlD,eAAgB,SAKK,IAArB0C,EAAUtC,SAA0BoB,GAAa3E,KAAK6F,EAAUtC,QAGzE,MAAM,IAAItD,UAAU,yCAItB,GANEoG,EAAO9C,OAASsC,EAAUtC;KAMO,IAAxBsC,EAAU9F,UAA2B,CAC9C,KAAKtN,EAAOoS,GAAyBD,IAAiB5E,KAAK6F,EAAU9F,WAGnE,MAAM,IAAIE,UAAU,iCAFpBoG,EAAOtG,UAAY8F,EAAU9F,SAIjC,CAGA,QAAgC,IAArB8F,EAAUzC,OAAwB,CAC3C,IAAI2B,GAAuB/E,KAAK6F,EAAUzC,QAGxC,MAAM,IAAInD,UAAU,8BAFpBoG,EAAOjD,OAASpC,SAAS6E,EAAUzC,OAAQ,GAI/C,CAOA,YAJoB,IAAT3Q,IACT4T,EAAO5T,KAAOA,GAGT,IAAI2T,EAAIC,EACjB,CAOA,gBAAOC,CAAUC,GACf,GAAIA,aAAexD,IAAQwD,aAAenC,GACxC,OAAOmC,EAAIpF,WAGb,MAAM,IAAIlB,UAAU,6BACtB,QCvKIuG,GAAU","x_google_ignoreList":[0,1,2,3,4,5,6]}