{"version":3,"sources":["webpack://OTPAuth/webpack/universalModuleDefinition","webpack://OTPAuth/webpack/bootstrap","webpack://OTPAuth/./src/utils.js","webpack://OTPAuth//tmp/sjcl-127531jqZ7bV4H3b3.js","webpack://OTPAuth/./src/crypto.js","webpack://OTPAuth/./src/secret.js","webpack://OTPAuth/./src/uri.js","webpack://OTPAuth/./src/otp.js","webpack://OTPAuth/./src/version.js","webpack://OTPAuth/./src/main.js"],"names":["Utils","uint","fromBuf","buf","arr","Uint8Array","num","i","length","toBuf","ArrayBuffer","acc","raw","str","String","fromCharCode","charCodeAt","b32","alphabet","bits","value","toUpperCase","replace","index","idx","indexOf","TypeError","hex","toString","j","parseInt","substr","pad","digits","prefix","repeat","InternalUtils","globalThis","_globalThis","Object","defineProperty","prototype","get","configurable","__magicalGlobalThis__","enumerable","console","_console","properties","methods","method","property","isNode","_isNode","call","process","nodeRequire","name","eval","sjcl","cipher","hash","keyexchange","mode","misc","codec","exception","corrupt","message","invalid","bug","notReady","bitArray","bitSlice","a","bstart","bend","_shiftRight","slice","undefined","clamp","extract","blength","x","sh","Math","floor","concat","a1","a2","last","shift","getPartial","bitLength","l","len","ceil","partial","_end","round","equal","b","carry","out","last2","shift2","push","pop","_xor4","y","byteswapM","v","m","globals","DataView","arrayBuffer","fromBits","padding","padding_count","ol","tmp","smallest","setUint32","byteLength","buffer","setUint8","getUint8","toBits","inView","getUint32","hexDumpBuffer","stringBufferView","string","n","width","Array","join","getUint16","log","sha1","_h","_buffer","_length","reset","data","update","finalize","blockSize","_init","utf8String","nl","Uint32Array","c","_block","subarray","splice","h","_key","_f","t","d","_S","words","e","w","sha256","_precompute","prime","factor","isPrime","frac","pow","k","h0","h1","h2","h3","h4","h5","h6","h7","sha512","_initr","_keyr","frac2","wrh","wrl","h0h","h0l","h1h","h1l","h2h","h2l","h3h","h3l","h4h","h4l","h5h","h5l","h6h","h6l","h7h","h7l","ah","al","bh","bl","ch","cl","dh","dl","eh","el","fh","fl","gh","gl","hh","hl","gamma0xh","gamma0xl","gamma0h","gamma0l","gamma1xh","gamma1xl","gamma1h","gamma1l","wr7h","wr7l","wr16h","wr16l","chh","chl","majh","majl","sigma0h","sigma0l","sigma1h","sigma1l","krh","krl","t1l","t1h","t2l","t2h","hmac","key","Hash","_hash","exKey","bs","_baseHash","_resultHash","encrypt","mac","_updated","digest","result","randomBytes","hmacDigest","NodeBuffer","Buffer","NodeCrypto","nodeBufferFromArrayBuffer","from","nodeBuffer","uint8Array","nodeBufferToArrayBuffer","size","bytes","algorithm","createHmac","BrowserCrypto","crypto","msCrypto","getRandomValues","array","warn","random","toLowerCase","Crypto","Secret","writable","OTPURI_PARAMS","OTPURI_REGEX","RegExp","SECRET_REGEX","ALGORITHM_REGEX","INTEGER_REGEX","POSITIVE_INTEGER_REGEX","URI","uri","uriGroups","match","error","isArray","URIError","uriType","uriLabel","split","map","decodeURIComponent","uriParams","reduce","cur","pairArr","pairKey","pairVal","pairAcc","OTP","config","HOTP","counter","test","TOTP","period","label","issuer","secret","otp","legacyIssuer","isHOTP","isTOTP","encodeURIComponent","defaults","window","fromB32","generate","token","validate","stringify","offset","generatedToken","timestamp","Date","now","version"],"mappings":"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","file":"otpauth.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"OTPAuth\"] = factory();\n\telse\n\t\troot[\"OTPAuth\"] = factory();\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","/**\n * An object containing some utilities.\n * @type {Object}\n */\nexport const Utils = {\n\n\t/**\n\t * UInt conversion.\n\t * @type {Object}\n\t */\n\tuint: {\n\n\t\t/**\n\t\t * Converts an ArrayBuffer to an integer.\n\t\t * @param {ArrayBuffer} buf ArrayBuffer.\n\t\t * @returns {number} Integer.\n\t\t */\n\t\tfromBuf: buf => {\n\t\t\tconst arr = new Uint8Array(buf);\n\t\t\tlet num = 0;\n\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tif (arr[i] !== 0) {\n\t\t\t\t\tnum *= 256;\n\t\t\t\t\tnum += arr[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn num;\n\t\t},\n\n\t\t/**\n\t\t * Converts an integer to an ArrayBuffer.\n\t\t * @param {number} num Integer.\n\t\t * @returns {ArrayBuffer} ArrayBuffer.\n\t\t */\n\t\ttoBuf: num => {\n\t\t\tconst buf = new ArrayBuffer(8);\n\t\t\tconst arr = new Uint8Array(buf);\n\t\t\tlet acc = num;\n\n\t\t\tfor (let i = 7; i >= 0; i--) {\n\t\t\t\tif (acc === 0) break;\n\n\t\t\t\tarr[i] = acc & 255;\n\t\t\t\tacc -= arr[i];\n\t\t\t\tacc /= 256;\n\t\t\t}\n\n\t\t\treturn buf;\n\t\t}\n\n\t},\n\n\t/**\n\t * Raw string conversion.\n\t * @type {Object}\n\t */\n\traw: {\n\n\t\t/**\n\t\t * Converts an ArrayBuffer to a string.\n\t\t * @param {ArrayBuffer} buf ArrayBuffer.\n\t\t * @returns {string} String.\n\t\t */\n\t\tfromBuf: buf => {\n\t\t\tconst arr = new Uint8Array(buf);\n\t\t\tlet str = '';\n\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tstr += String.fromCharCode(arr[i]);\n\t\t\t}\n\n\t\t\treturn str;\n\t\t},\n\n\t\t/**\n\t\t * Converts a string to an ArrayBuffer.\n\t\t * @param {string} str String.\n\t\t * @returns {ArrayBuffer} ArrayBuffer.\n\t\t */\n\t\ttoBuf: str => {\n\t\t\tconst buf = new ArrayBuffer(str.length);\n\t\t\tconst arr = new Uint8Array(buf);\n\n\t\t\tfor (let i = 0; i < str.length; i++) {\n\t\t\t\tarr[i] = str.charCodeAt(i);\n\t\t\t}\n\n\t\t\treturn buf;\n\t\t}\n\n\t},\n\n\t/**\n\t * Base32 string conversion.\n\t * @type {Object}\n\t */\n\tb32: {\n\n\t\t/**\n\t\t * RFC 4648 base32 alphabet without pad.\n\t\t * @type {string}\n\t\t */\n\t\talphabet: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ234567',\n\n\t\t/**\n\t\t * Converts an ArrayBuffer to a base32 string (RFC 4648)\n\t\t * (https://github.com/LinusU/base32-encode).\n\t\t * @param {ArrayBuffer} buf ArrayBuffer.\n\t\t * @returns {string} Base32 string.\n\t\t */\n\t\tfromBuf: buf => {\n\t\t\tconst arr = new Uint8Array(buf);\n\n\t\t\tlet bits = 0;\n\t\t\tlet value = 0;\n\t\t\tlet str = '';\n\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tvalue = (value << 8) | arr[i];\n\t\t\t\tbits += 8;\n\n\t\t\t\twhile (bits >= 5) {\n\t\t\t\t\tstr += Utils.b32.alphabet[(value >>> bits - 5) & 31];\n\t\t\t\t\tbits -= 5;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (bits > 0) {\n\t\t\t\tstr += Utils.b32.alphabet[(value << 5 - bits) & 31];\n\t\t\t}\n\n\t\t\treturn str;\n\t\t},\n\n\t\t/**\n\t\t * Converts a base32 string to an ArrayBuffer (RFC 4648)\n\t\t * (https://github.com/LinusU/base32-decode).\n\t\t * @param {string} str Base32 string.\n\t\t * @returns {ArrayBuffer} ArrayBuffer.\n\t\t */\n\t\ttoBuf: str => {\n\t\t\t// Canonicalize to all upper case and remove padding if it exists.\n\t\t\tstr = str.toUpperCase().replace(/=+$/, '');\n\n\t\t\tconst buf = new ArrayBuffer((str.length * 5) / 8 | 0);\n\t\t\tconst arr = new Uint8Array(buf);\n\n\t\t\tlet bits = 0;\n\t\t\tlet value = 0;\n\t\t\tlet index = 0;\n\n\t\t\tfor (let i = 0; i < str.length; i++) {\n\t\t\t\tconst idx = Utils.b32.alphabet.indexOf(str[i]);\n\t\t\t\tif (idx === -1) throw new TypeError(`Invalid character found: ${str[i]}`);\n\n\t\t\t\tvalue = (value << 5) | idx;\n\t\t\t\tbits += 5;\n\n\t\t\t\tif (bits >= 8) {\n\t\t\t\t\tarr[index++] = (value >>> bits - 8) & 255;\n\t\t\t\t\tbits -= 8;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn buf;\n\t\t}\n\n\t},\n\n\t/**\n\t * Hexadecimal string conversion.\n\t * @type {Object}\n\t */\n\thex: {\n\n\t\t/**\n\t\t * Converts an ArrayBuffer to a hexadecimal string.\n\t\t * @param {ArrayBuffer} buf ArrayBuffer.\n\t\t * @returns {string} Hexadecimal string.\n\t\t */\n\t\tfromBuf: buf => {\n\t\t\tconst arr = new Uint8Array(buf);\n\t\t\tlet str = '';\n\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tconst hex = arr[i].toString(16);\n\t\t\t\tstr += hex.length === 2 ? hex : `0${hex}`;\n\t\t\t}\n\n\t\t\treturn str.toUpperCase();\n\t\t},\n\n\t\t/**\n\t\t * Converts a hexadecimal string to an ArrayBuffer.\n\t\t * @param {string} str Hexadecimal string.\n\t\t * @returns {ArrayBuffer} ArrayBuffer.\n\t\t */\n\t\ttoBuf: str => {\n\t\t\tconst buf = new ArrayBuffer(str.length / 2);\n\t\t\tconst arr = new Uint8Array(buf);\n\n\t\t\tfor (let i = 0, j = 0; i < arr.length; i += 1, j += 2) {\n\t\t\t\tarr[i] = parseInt(str.substr(j, 2), 16);\n\t\t\t}\n\n\t\t\treturn buf;\n\t\t}\n\n\t},\n\n\t/**\n\t * Pads a number with leading zeros.\n\t * @param {number|string} num Number.\n\t * @param {number} digits Digits.\n\t * @returns {string} Padded number.\n\t */\n\tpad: (num, digits) => {\n\t\tlet prefix = '';\n\t\tlet repeat = digits - String(num).length;\n\t\twhile (repeat-- > 0) prefix += '0';\n\t\treturn `${prefix}${num}`;\n\t}\n\n};\n\n/**\n * An object containing some utilities (for internal use only).\n * @private\n * @type {Object}\n */\nexport const InternalUtils = {\n\n\t/**\n\t * \"globalThis\" ponyfill\n\t * (https://mathiasbynens.be/notes/globalthis).\n\t * @type {Object}\n\t */\n\tget globalThis() {\n\t\tlet _globalThis;\n\n\t\t/* eslint-disable no-extend-native, no-undef */\n\t\tif (typeof globalThis === 'object') {\n\t\t\t_globalThis = globalThis;\n\t\t} else {\n\t\t\tObject.defineProperty(Object.prototype, '__magicalGlobalThis__', {\n\t\t\t\tget() { return this; },\n\t\t\t\tconfigurable: true\n\t\t\t});\n\t\t\ttry {\n\t\t\t\t_globalThis = __magicalGlobalThis__;\n\t\t\t} finally {\n\t\t\t\tdelete Object.prototype.__magicalGlobalThis__;\n\t\t\t}\n\t\t}\n\t\t/* eslint-enable */\n\n\t\tObject.defineProperty(this, 'globalThis', {\n\t\t\tenumerable: true,\n\t\t\tvalue: _globalThis\n\t\t});\n\n\t\treturn this.globalThis;\n\t},\n\n\t/**\n\t * \"console\" ponyfill.\n\t * @type {Object}\n\t */\n\tget console() {\n\t\tlet _console;\n\n\t\tif (typeof InternalUtils.globalThis.console === 'object') {\n\t\t\t_console = InternalUtils.globalThis.console;\n\t\t} else {\n\t\t\t_console = {};\n\t\t\tconst properties = [\n\t\t\t\t'memory'\n\t\t\t];\n\t\t\tconst methods = [\n\t\t\t\t'assert', 'clear', 'count', 'countReset', 'debug', 'error', 'info', 'log',\n\t\t\t\t'table', 'trace', 'warn', 'dir', 'dirxml', 'group', 'groupCollapsed', 'groupEnd',\n\t\t\t\t'time', 'timeLog', 'timeEnd', 'exception', 'timeStamp', 'profile', 'profileEnd'\n\t\t\t];\n\t\t\tfor (const method of methods) _console[method] = () => {};\n\t\t\tfor (const property of properties) _console[property] = {};\n\t\t}\n\n\t\tObject.defineProperty(this, 'console', {\n\t\t\tenumerable: true,\n\t\t\tvalue: _console\n\t\t});\n\n\t\treturn this.console;\n\t},\n\n\t/**\n\t * Detect if running in \"Node.js\".\n\t * @type {boolean}\n\t */\n\tget isNode() {\n\t\tconst _isNode = Object.prototype.toString.call(InternalUtils.globalThis.process) === '[object process]';\n\n\t\tObject.defineProperty(this, 'isNode', {\n\t\t\tenumerable: true,\n\t\t\tvalue: _isNode\n\t\t});\n\n\t\treturn this.isNode;\n\t},\n\n\t/**\n\t * Dynamically import \"Node.js\" modules.\n\t * (`eval` is used to prevent bundlers from including the module,\n\t * e.g., [webpack/webpack#8826](https://github.com/webpack/webpack/issues/8826))\n\t * @param {string} name Name.\n\t * @returns {Object} Module.\n\t */\n\t// eslint-disable-next-line no-eval\n\tnodeRequire: name => eval('require')(name)\n\n};\n","/** @fileOverview Javascript cryptography implementation.\n *\n * Crush to remove comments, shorten variable names and\n * generally reduce transmission size.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n\"use strict\";\n/*jslint indent: 2, bitwise: false, nomen: false, plusplus: false, white: false, regexp: false */\n/*global document, window, escape, unescape, module, require, Uint32Array */\n\n/**\n * The Stanford Javascript Crypto Library, top-level namespace.\n * @namespace\n */\nvar sjcl = {\n  /**\n   * Symmetric ciphers.\n   * @namespace\n   */\n  cipher: {},\n\n  /**\n   * Hash functions.  Right now only SHA256 is implemented.\n   * @namespace\n   */\n  hash: {},\n\n  /**\n   * Key exchange functions.  Right now only SRP is implemented.\n   * @namespace\n   */\n  keyexchange: {},\n  \n  /**\n   * Cipher modes of operation.\n   * @namespace\n   */\n  mode: {},\n\n  /**\n   * Miscellaneous.  HMAC and PBKDF2.\n   * @namespace\n   */\n  misc: {},\n  \n  /**\n   * Bit array encoders and decoders.\n   * @namespace\n   *\n   * @description\n   * The members of this namespace are functions which translate between\n   * SJCL's bitArrays and other objects (usually strings).  Because it\n   * isn't always clear which direction is encoding and which is decoding,\n   * the method names are \"fromBits\" and \"toBits\".\n   */\n  codec: {},\n  \n  /**\n   * Exceptions.\n   * @namespace\n   */\n  exception: {\n    /**\n     * Ciphertext is corrupt.\n     * @constructor\n     */\n    corrupt: function(message) {\n      this.toString = function() { return \"CORRUPT: \"+this.message; };\n      this.message = message;\n    },\n    \n    /**\n     * Invalid parameter.\n     * @constructor\n     */\n    invalid: function(message) {\n      this.toString = function() { return \"INVALID: \"+this.message; };\n      this.message = message;\n    },\n    \n    /**\n     * Bug or missing feature in SJCL.\n     * @constructor\n     */\n    bug: function(message) {\n      this.toString = function() { return \"BUG: \"+this.message; };\n      this.message = message;\n    },\n\n    /**\n     * Something isn't ready.\n     * @constructor\n     */\n    notReady: function(message) {\n      this.toString = function() { return \"NOT READY: \"+this.message; };\n      this.message = message;\n    }\n  }\n};\n/** @fileOverview Arrays of bits, encoded as arrays of Numbers.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/**\n * Arrays of bits, encoded as arrays of Numbers.\n * @namespace\n * @description\n * <p>\n * These objects are the currency accepted by SJCL's crypto functions.\n * </p>\n *\n * <p>\n * Most of our crypto primitives operate on arrays of 4-byte words internally,\n * but many of them can take arguments that are not a multiple of 4 bytes.\n * This library encodes arrays of bits (whose size need not be a multiple of 8\n * bits) as arrays of 32-bit words.  The bits are packed, big-endian, into an\n * array of words, 32 bits at a time.  Since the words are double-precision\n * floating point numbers, they fit some extra data.  We use this (in a private,\n * possibly-changing manner) to encode the number of bits actually  present\n * in the last word of the array.\n * </p>\n *\n * <p>\n * Because bitwise ops clear this out-of-band data, these arrays can be passed\n * to ciphers like AES which want arrays of words.\n * </p>\n */\nsjcl.bitArray = {\n  /**\n   * Array slices in units of bits.\n   * @param {bitArray} a The array to slice.\n   * @param {Number} bstart The offset to the start of the slice, in bits.\n   * @param {Number} bend The offset to the end of the slice, in bits.  If this is undefined,\n   * slice until the end of the array.\n   * @return {bitArray} The requested slice.\n   */\n  bitSlice: function (a, bstart, bend) {\n    a = sjcl.bitArray._shiftRight(a.slice(bstart/32), 32 - (bstart & 31)).slice(1);\n    return (bend === undefined) ? a : sjcl.bitArray.clamp(a, bend-bstart);\n  },\n\n  /**\n   * Extract a number packed into a bit array.\n   * @param {bitArray} a The array to slice.\n   * @param {Number} bstart The offset to the start of the slice, in bits.\n   * @param {Number} blength The length of the number to extract.\n   * @return {Number} The requested slice.\n   */\n  extract: function(a, bstart, blength) {\n    // FIXME: this Math.floor is not necessary at all, but for some reason\n    // seems to suppress a bug in the Chromium JIT.\n    var x, sh = Math.floor((-bstart-blength) & 31);\n    if ((bstart + blength - 1 ^ bstart) & -32) {\n      // it crosses a boundary\n      x = (a[bstart/32|0] << (32 - sh)) ^ (a[bstart/32+1|0] >>> sh);\n    } else {\n      // within a single word\n      x = a[bstart/32|0] >>> sh;\n    }\n    return x & ((1<<blength) - 1);\n  },\n\n  /**\n   * Concatenate two bit arrays.\n   * @param {bitArray} a1 The first array.\n   * @param {bitArray} a2 The second array.\n   * @return {bitArray} The concatenation of a1 and a2.\n   */\n  concat: function (a1, a2) {\n    if (a1.length === 0 || a2.length === 0) {\n      return a1.concat(a2);\n    }\n    \n    var last = a1[a1.length-1], shift = sjcl.bitArray.getPartial(last);\n    if (shift === 32) {\n      return a1.concat(a2);\n    } else {\n      return sjcl.bitArray._shiftRight(a2, shift, last|0, a1.slice(0,a1.length-1));\n    }\n  },\n\n  /**\n   * Find the length of an array of bits.\n   * @param {bitArray} a The array.\n   * @return {Number} The length of a, in bits.\n   */\n  bitLength: function (a) {\n    var l = a.length, x;\n    if (l === 0) { return 0; }\n    x = a[l - 1];\n    return (l-1) * 32 + sjcl.bitArray.getPartial(x);\n  },\n\n  /**\n   * Truncate an array.\n   * @param {bitArray} a The array.\n   * @param {Number} len The length to truncate to, in bits.\n   * @return {bitArray} A new array, truncated to len bits.\n   */\n  clamp: function (a, len) {\n    if (a.length * 32 < len) { return a; }\n    a = a.slice(0, Math.ceil(len / 32));\n    var l = a.length;\n    len = len & 31;\n    if (l > 0 && len) {\n      a[l-1] = sjcl.bitArray.partial(len, a[l-1] & 0x80000000 >> (len-1), 1);\n    }\n    return a;\n  },\n\n  /**\n   * Make a partial word for a bit array.\n   * @param {Number} len The number of bits in the word.\n   * @param {Number} x The bits.\n   * @param {Number} [_end=0] Pass 1 if x has already been shifted to the high side.\n   * @return {Number} The partial word.\n   */\n  partial: function (len, x, _end) {\n    if (len === 32) { return x; }\n    return (_end ? x|0 : x << (32-len)) + len * 0x10000000000;\n  },\n\n  /**\n   * Get the number of bits used by a partial word.\n   * @param {Number} x The partial word.\n   * @return {Number} The number of bits used by the partial word.\n   */\n  getPartial: function (x) {\n    return Math.round(x/0x10000000000) || 32;\n  },\n\n  /**\n   * Compare two arrays for equality in a predictable amount of time.\n   * @param {bitArray} a The first array.\n   * @param {bitArray} b The second array.\n   * @return {boolean} true if a == b; false otherwise.\n   */\n  equal: function (a, b) {\n    if (sjcl.bitArray.bitLength(a) !== sjcl.bitArray.bitLength(b)) {\n      return false;\n    }\n    var x = 0, i;\n    for (i=0; i<a.length; i++) {\n      x |= a[i]^b[i];\n    }\n    return (x === 0);\n  },\n\n  /** Shift an array right.\n   * @param {bitArray} a The array to shift.\n   * @param {Number} shift The number of bits to shift.\n   * @param {Number} [carry=0] A byte to carry in\n   * @param {bitArray} [out=[]] An array to prepend to the output.\n   * @private\n   */\n  _shiftRight: function (a, shift, carry, out) {\n    var i, last2=0, shift2;\n    if (out === undefined) { out = []; }\n    \n    for (; shift >= 32; shift -= 32) {\n      out.push(carry);\n      carry = 0;\n    }\n    if (shift === 0) {\n      return out.concat(a);\n    }\n    \n    for (i=0; i<a.length; i++) {\n      out.push(carry | a[i]>>>shift);\n      carry = a[i] << (32-shift);\n    }\n    last2 = a.length ? a[a.length-1] : 0;\n    shift2 = sjcl.bitArray.getPartial(last2);\n    out.push(sjcl.bitArray.partial(shift+shift2 & 31, (shift + shift2 > 32) ? carry : out.pop(),1));\n    return out;\n  },\n  \n  /** xor a block of 4 words together.\n   * @private\n   */\n  _xor4: function(x,y) {\n    return [x[0]^y[0],x[1]^y[1],x[2]^y[2],x[3]^y[3]];\n  },\n\n  /** byteswap a word array inplace.\n   * (does not handle partial words)\n   * @param {sjcl.bitArray} a word array\n   * @return {sjcl.bitArray} byteswapped array\n   */\n  byteswapM: function(a) {\n    var i, v, m = 0xff00;\n    for (i = 0; i < a.length; ++i) {\n      v = a[i];\n      a[i] = (v >>> 24) | ((v >>> 8) & m) | ((v & m) << 8) | (v << 24);\n    }\n    return a;\n  }\n};\n/** @fileOverview Bit array codec implementations.\n *\n * @author Marco Munizaga\n */\n\n//patch arraybuffers if they don't exist\nif (typeof(ArrayBuffer) === 'undefined') {\n  (function(globals){\n      \"use strict\";\n      globals.ArrayBuffer = function(){};\n      globals.DataView = function(){};\n  }(this));\n}\n\n/**\n * ArrayBuffer\n * @namespace\n */\nsjcl.codec.arrayBuffer = {\n  /** Convert from a bitArray to an ArrayBuffer. \n   * Will default to 8byte padding if padding is undefined*/\n  fromBits: function (arr, padding, padding_count) {\n    var out, i, ol, tmp, smallest;\n    padding = padding==undefined  ? true : padding;\n    padding_count = padding_count || 8;\n\n    if (arr.length === 0) {\n      return new ArrayBuffer(0);\n    }\n\n    ol = sjcl.bitArray.bitLength(arr)/8;\n\n    //check to make sure the bitLength is divisible by 8, if it isn't \n    //we can't do anything since arraybuffers work with bytes, not bits\n    if ( sjcl.bitArray.bitLength(arr)%8 !== 0 ) {\n      throw new sjcl.exception.invalid(\"Invalid bit size, must be divisble by 8 to fit in an arraybuffer correctly\");\n    }\n\n    if (padding && ol%padding_count !== 0){\n      ol += padding_count - (ol%padding_count);\n    }\n\n\n    //padded temp for easy copying\n    tmp = new DataView(new ArrayBuffer(arr.length*4));\n    for (i=0; i<arr.length; i++) {\n      tmp.setUint32(i*4, (arr[i]<<32)); //get rid of the higher bits\n    }\n\n    //now copy the final message if we are not going to 0 pad\n    out = new DataView(new ArrayBuffer(ol));\n\n    //save a step when the tmp and out bytelength are ===\n    if (out.byteLength === tmp.byteLength){\n      return tmp.buffer;\n    }\n\n    smallest = tmp.byteLength < out.byteLength ? tmp.byteLength : out.byteLength;\n    for(i=0; i<smallest; i++){\n      out.setUint8(i,tmp.getUint8(i));\n    }\n\n\n    return out.buffer;\n  },\n  /** Convert from an ArrayBuffer to a bitArray. */\n  toBits: function (buffer) {\n    var i, out=[], len, inView, tmp;\n\n    if (buffer.byteLength === 0) {\n      return [];\n    }\n\n    inView = new DataView(buffer);\n    len = inView.byteLength - inView.byteLength%4;\n\n    for (var i = 0; i < len; i+=4) {\n      out.push(inView.getUint32(i));\n    }\n\n    if (inView.byteLength%4 != 0) {\n      tmp = new DataView(new ArrayBuffer(4));\n      for (var i = 0, l = inView.byteLength%4; i < l; i++) {\n        //we want the data to the right, because partial slices off the starting bits\n        tmp.setUint8(i+4-l, inView.getUint8(len+i)); // big-endian, \n      }\n      out.push(\n        sjcl.bitArray.partial( (inView.byteLength%4)*8, tmp.getUint32(0) )\n      ); \n    }\n    return out;\n  },\n\n\n\n  /** Prints a hex output of the buffer contents, akin to hexdump **/\n  hexDumpBuffer: function(buffer){\n      var stringBufferView = new DataView(buffer);\n      var string = '';\n      var pad = function (n, width) {\n          n = n + '';\n          return n.length >= width ? n : new Array(width - n.length + 1).join('0') + n;\n      };\n\n      for (var i = 0; i < stringBufferView.byteLength; i+=2) {\n          if (i%16 == 0) string += ('\\n'+(i).toString(16)+'\\t');\n          string += ( pad(stringBufferView.getUint16(i).toString(16),4) + ' ');\n      }\n\n      if ( typeof console === undefined ){\n        console = console || {log:function(){}}; //fix for IE\n      }\n      console.log(string.toUpperCase());\n  }\n};\n\n/** @fileOverview Javascript SHA-1 implementation.\n *\n * Based on the implementation in RFC 3174, method 1, and on the SJCL\n * SHA-256 implementation.\n *\n * @author Quinn Slack\n */\n\n/**\n * Context for a SHA-1 operation in progress.\n * @constructor\n */\nsjcl.hash.sha1 = function (hash) {\n  if (hash) {\n    this._h = hash._h.slice(0);\n    this._buffer = hash._buffer.slice(0);\n    this._length = hash._length;\n  } else {\n    this.reset();\n  }\n};\n\n/**\n * Hash a string or an array of words.\n * @static\n * @param {bitArray|String} data the data to hash.\n * @return {bitArray} The hash value, an array of 5 big-endian words.\n */\nsjcl.hash.sha1.hash = function (data) {\n  return (new sjcl.hash.sha1()).update(data).finalize();\n};\n\nsjcl.hash.sha1.prototype = {\n  /**\n   * The hash's block size, in bits.\n   * @constant\n   */\n  blockSize: 512,\n   \n  /**\n   * Reset the hash state.\n   * @return this\n   */\n  reset:function () {\n    this._h = this._init.slice(0);\n    this._buffer = [];\n    this._length = 0;\n    return this;\n  },\n  \n  /**\n   * Input several words to the hash.\n   * @param {bitArray|String} data the data to hash.\n   * @return this\n   */\n  update: function (data) {\n    if (typeof data === \"string\") {\n      data = sjcl.codec.utf8String.toBits(data);\n    }\n    var i, b = this._buffer = sjcl.bitArray.concat(this._buffer, data),\n        ol = this._length,\n        nl = this._length = ol + sjcl.bitArray.bitLength(data);\n    if (nl > 9007199254740991){\n      throw new sjcl.exception.invalid(\"Cannot hash more than 2^53 - 1 bits\");\n    }\n\n    if (typeof Uint32Array !== 'undefined') {\n\tvar c = new Uint32Array(b);\n    \tvar j = 0;\n    \tfor (i = this.blockSize+ol - ((this.blockSize+ol) & (this.blockSize-1)); i <= nl;\n\t\ti+= this.blockSize) {\n      \t    this._block(c.subarray(16 * j, 16 * (j+1)));\n      \t    j += 1;\n    \t}\n    \tb.splice(0, 16 * j);\n    } else {\n    \tfor (i = this.blockSize+ol - ((this.blockSize+ol) & (this.blockSize-1)); i <= nl;\n             i+= this.blockSize) {\n      \t     this._block(b.splice(0,16));\n      \t}\n    }\n    return this;\n  },\n  \n  /**\n   * Complete hashing and output the hash value.\n   * @return {bitArray} The hash value, an array of 5 big-endian words. TODO\n   */\n  finalize:function () {\n    var i, b = this._buffer, h = this._h;\n\n    // Round out and push the buffer\n    b = sjcl.bitArray.concat(b, [sjcl.bitArray.partial(1,1)]);\n    // Round out the buffer to a multiple of 16 words, less the 2 length words.\n    for (i = b.length + 2; i & 15; i++) {\n      b.push(0);\n    }\n\n    // append the length\n    b.push(Math.floor(this._length / 0x100000000));\n    b.push(this._length | 0);\n\n    while (b.length) {\n      this._block(b.splice(0,16));\n    }\n\n    this.reset();\n    return h;\n  },\n\n  /**\n   * The SHA-1 initialization vector.\n   * @private\n   */\n  _init:[0x67452301, 0xEFCDAB89, 0x98BADCFE, 0x10325476, 0xC3D2E1F0],\n\n  /**\n   * The SHA-1 hash key.\n   * @private\n   */\n  _key:[0x5A827999, 0x6ED9EBA1, 0x8F1BBCDC, 0xCA62C1D6],\n\n  /**\n   * The SHA-1 logical functions f(0), f(1), ..., f(79).\n   * @private\n   */\n  _f:function(t, b, c, d) {\n    if (t <= 19) {\n      return (b & c) | (~b & d);\n    } else if (t <= 39) {\n      return b ^ c ^ d;\n    } else if (t <= 59) {\n      return (b & c) | (b & d) | (c & d);\n    } else if (t <= 79) {\n      return b ^ c ^ d;\n    }\n  },\n\n  /**\n   * Circular left-shift operator.\n   * @private\n   */\n  _S:function(n, x) {\n    return (x << n) | (x >>> 32-n);\n  },\n  \n  /**\n   * Perform one cycle of SHA-1.\n   * @param {Uint32Array|bitArray} words one block of words.\n   * @private\n   */\n  _block:function (words) {\n    var t, tmp, a, b, c, d, e,\n    h = this._h;\n    var w;\n    if (typeof Uint32Array !== 'undefined') {\n        // When words is passed to _block, it has 16 elements. SHA1 _block\n        // function extends words with new elements (at the end there are 80 elements). \n        // The problem is that if we use Uint32Array instead of Array, \n        // the length of Uint32Array cannot be changed. Thus, we replace words with a \n        // normal Array here.\n        w = Array(80); // do not use Uint32Array here as the instantiation is slower\n        for (var j=0; j<16; j++){\n            w[j] = words[j];\n        }\n    } else {\n        w = words;\n    }\n\n    a = h[0]; b = h[1]; c = h[2]; d = h[3]; e = h[4]; \n\n    for (t=0; t<=79; t++) {\n      if (t >= 16) {\n        w[t] = this._S(1, w[t-3] ^ w[t-8] ^ w[t-14] ^ w[t-16]);\n      }\n      tmp = (this._S(5, a) + this._f(t, b, c, d) + e + w[t] +\n             this._key[Math.floor(t/20)]) | 0;\n      e = d;\n      d = c;\n      c = this._S(30, b);\n      b = a;\n      a = tmp;\n   }\n\n   h[0] = (h[0]+a) |0;\n   h[1] = (h[1]+b) |0;\n   h[2] = (h[2]+c) |0;\n   h[3] = (h[3]+d) |0;\n   h[4] = (h[4]+e) |0;\n  }\n};\n/** @fileOverview Javascript SHA-256 implementation.\n *\n * An older version of this implementation is available in the public\n * domain, but this one is (c) Emily Stark, Mike Hamburg, Dan Boneh,\n * Stanford University 2008-2010 and BSD-licensed for liability\n * reasons.\n *\n * Special thanks to Aldo Cortesi for pointing out several bugs in\n * this code.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/**\n * Context for a SHA-256 operation in progress.\n * @constructor\n */\nsjcl.hash.sha256 = function (hash) {\n  if (!this._key[0]) { this._precompute(); }\n  if (hash) {\n    this._h = hash._h.slice(0);\n    this._buffer = hash._buffer.slice(0);\n    this._length = hash._length;\n  } else {\n    this.reset();\n  }\n};\n\n/**\n * Hash a string or an array of words.\n * @static\n * @param {bitArray|String} data the data to hash.\n * @return {bitArray} The hash value, an array of 16 big-endian words.\n */\nsjcl.hash.sha256.hash = function (data) {\n  return (new sjcl.hash.sha256()).update(data).finalize();\n};\n\nsjcl.hash.sha256.prototype = {\n  /**\n   * The hash's block size, in bits.\n   * @constant\n   */\n  blockSize: 512,\n   \n  /**\n   * Reset the hash state.\n   * @return this\n   */\n  reset:function () {\n    this._h = this._init.slice(0);\n    this._buffer = [];\n    this._length = 0;\n    return this;\n  },\n  \n  /**\n   * Input several words to the hash.\n   * @param {bitArray|String} data the data to hash.\n   * @return this\n   */\n  update: function (data) {\n    if (typeof data === \"string\") {\n      data = sjcl.codec.utf8String.toBits(data);\n    }\n    var i, b = this._buffer = sjcl.bitArray.concat(this._buffer, data),\n        ol = this._length,\n        nl = this._length = ol + sjcl.bitArray.bitLength(data);\n    if (nl > 9007199254740991){\n      throw new sjcl.exception.invalid(\"Cannot hash more than 2^53 - 1 bits\");\n    }\n\n    if (typeof Uint32Array !== 'undefined') {\n\tvar c = new Uint32Array(b);\n    \tvar j = 0;\n    \tfor (i = 512+ol - ((512+ol) & 511); i <= nl; i+= 512) {\n      \t    this._block(c.subarray(16 * j, 16 * (j+1)));\n      \t    j += 1;\n    \t}\n    \tb.splice(0, 16 * j);\n    } else {\n\tfor (i = 512+ol - ((512+ol) & 511); i <= nl; i+= 512) {\n      \t    this._block(b.splice(0,16));\n      \t}\n    }\n    return this;\n  },\n  \n  /**\n   * Complete hashing and output the hash value.\n   * @return {bitArray} The hash value, an array of 8 big-endian words.\n   */\n  finalize:function () {\n    var i, b = this._buffer, h = this._h;\n\n    // Round out and push the buffer\n    b = sjcl.bitArray.concat(b, [sjcl.bitArray.partial(1,1)]);\n    \n    // Round out the buffer to a multiple of 16 words, less the 2 length words.\n    for (i = b.length + 2; i & 15; i++) {\n      b.push(0);\n    }\n    \n    // append the length\n    b.push(Math.floor(this._length / 0x100000000));\n    b.push(this._length | 0);\n\n    while (b.length) {\n      this._block(b.splice(0,16));\n    }\n\n    this.reset();\n    return h;\n  },\n\n  /**\n   * The SHA-256 initialization vector, to be precomputed.\n   * @private\n   */\n  _init:[],\n  /*\n  _init:[0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19],\n  */\n  \n  /**\n   * The SHA-256 hash key, to be precomputed.\n   * @private\n   */\n  _key:[],\n  /*\n  _key:\n    [0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5, 0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n     0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3, 0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n     0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc, 0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n     0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7, 0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n     0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13, 0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n     0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3, 0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n     0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5, 0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n     0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208, 0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2],\n  */\n\n\n  /**\n   * Function to precompute _init and _key.\n   * @private\n   */\n  _precompute: function () {\n    var i = 0, prime = 2, factor, isPrime;\n\n    function frac(x) { return (x-Math.floor(x)) * 0x100000000 | 0; }\n\n    for (; i<64; prime++) {\n      isPrime = true;\n      for (factor=2; factor*factor <= prime; factor++) {\n        if (prime % factor === 0) {\n          isPrime = false;\n          break;\n        }\n      }\n      if (isPrime) {\n        if (i<8) {\n          this._init[i] = frac(Math.pow(prime, 1/2));\n        }\n        this._key[i] = frac(Math.pow(prime, 1/3));\n        i++;\n      }\n    }\n  },\n  \n  /**\n   * Perform one cycle of SHA-256.\n   * @param {Uint32Array|bitArray} w one block of words.\n   * @private\n   */\n  _block:function (w) {  \n    var i, tmp, a, b,\n      h = this._h,\n      k = this._key,\n      h0 = h[0], h1 = h[1], h2 = h[2], h3 = h[3],\n      h4 = h[4], h5 = h[5], h6 = h[6], h7 = h[7];\n\n    /* Rationale for placement of |0 :\n     * If a value can overflow is original 32 bits by a factor of more than a few\n     * million (2^23 ish), there is a possibility that it might overflow the\n     * 53-bit mantissa and lose precision.\n     *\n     * To avoid this, we clamp back to 32 bits by |'ing with 0 on any value that\n     * propagates around the loop, and on the hash state h[].  I don't believe\n     * that the clamps on h4 and on h0 are strictly necessary, but it's close\n     * (for h4 anyway), and better safe than sorry.\n     *\n     * The clamps on h[] are necessary for the output to be correct even in the\n     * common case and for short inputs.\n     */\n    for (i=0; i<64; i++) {\n      // load up the input word for this round\n      if (i<16) {\n        tmp = w[i];\n      } else {\n        a   = w[(i+1 ) & 15];\n        b   = w[(i+14) & 15];\n        tmp = w[i&15] = ((a>>>7  ^ a>>>18 ^ a>>>3  ^ a<<25 ^ a<<14) + \n                         (b>>>17 ^ b>>>19 ^ b>>>10 ^ b<<15 ^ b<<13) +\n                         w[i&15] + w[(i+9) & 15]) | 0;\n      }\n      \n      tmp = (tmp + h7 + (h4>>>6 ^ h4>>>11 ^ h4>>>25 ^ h4<<26 ^ h4<<21 ^ h4<<7) +  (h6 ^ h4&(h5^h6)) + k[i]); // | 0;\n      \n      // shift register\n      h7 = h6; h6 = h5; h5 = h4;\n      h4 = h3 + tmp | 0;\n      h3 = h2; h2 = h1; h1 = h0;\n\n      h0 = (tmp +  ((h1&h2) ^ (h3&(h1^h2))) + (h1>>>2 ^ h1>>>13 ^ h1>>>22 ^ h1<<30 ^ h1<<19 ^ h1<<10)) | 0;\n    }\n\n    h[0] = h[0]+h0 | 0;\n    h[1] = h[1]+h1 | 0;\n    h[2] = h[2]+h2 | 0;\n    h[3] = h[3]+h3 | 0;\n    h[4] = h[4]+h4 | 0;\n    h[5] = h[5]+h5 | 0;\n    h[6] = h[6]+h6 | 0;\n    h[7] = h[7]+h7 | 0;\n  }\n};\n\n\n/** @fileOverview Javascript SHA-512 implementation.\n *\n * This implementation was written for CryptoJS by Jeff Mott and adapted for\n * SJCL by Stefan Thomas.\n *\n * CryptoJS (c) 20092012 by Jeff Mott. All rights reserved.\n * Released with New BSD License\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n * @author Jeff Mott\n * @author Stefan Thomas\n */\n\n/**\n * Context for a SHA-512 operation in progress.\n * @constructor\n */\nsjcl.hash.sha512 = function (hash) {\n  if (!this._key[0]) { this._precompute(); }\n  if (hash) {\n    this._h = hash._h.slice(0);\n    this._buffer = hash._buffer.slice(0);\n    this._length = hash._length;\n  } else {\n    this.reset();\n  }\n};\n\n/**\n * Hash a string or an array of words.\n * @static\n * @param {bitArray|String} data the data to hash.\n * @return {bitArray} The hash value, an array of 16 big-endian words.\n */\nsjcl.hash.sha512.hash = function (data) {\n  return (new sjcl.hash.sha512()).update(data).finalize();\n};\n\nsjcl.hash.sha512.prototype = {\n  /**\n   * The hash's block size, in bits.\n   * @constant\n   */\n  blockSize: 1024,\n   \n  /**\n   * Reset the hash state.\n   * @return this\n   */\n  reset:function () {\n    this._h = this._init.slice(0);\n    this._buffer = [];\n    this._length = 0;\n    return this;\n  },\n  \n  /**\n   * Input several words to the hash.\n   * @param {bitArray|String} data the data to hash.\n   * @return this\n   */\n  update: function (data) {\n    if (typeof data === \"string\") {\n      data = sjcl.codec.utf8String.toBits(data);\n    }\n    var i, b = this._buffer = sjcl.bitArray.concat(this._buffer, data),\n        ol = this._length,\n        nl = this._length = ol + sjcl.bitArray.bitLength(data);\n    if (nl > 9007199254740991){\n      throw new sjcl.exception.invalid(\"Cannot hash more than 2^53 - 1 bits\");\n    }\n\n    if (typeof Uint32Array !== 'undefined') {\n        var c = new Uint32Array(b);\n        var j = 0;\n        for (i = 1024+ol - ((1024+ol) & 1023); i <= nl; i+= 1024) {\n            this._block(c.subarray(32 * j, 32 * (j+1)));\n            j += 1;\n        }\n        b.splice(0, 32 * j);\n    } else {\n        for (i = 1024+ol - ((1024+ol) & 1023); i <= nl; i+= 1024) {\n            this._block(b.splice(0,32));\n        }\n    }\n    return this;\n  },\n  \n  /**\n   * Complete hashing and output the hash value.\n   * @return {bitArray} The hash value, an array of 16 big-endian words.\n   */\n  finalize:function () {\n    var i, b = this._buffer, h = this._h;\n\n    // Round out and push the buffer\n    b = sjcl.bitArray.concat(b, [sjcl.bitArray.partial(1,1)]);\n\n    // Round out the buffer to a multiple of 32 words, less the 4 length words.\n    for (i = b.length + 4; i & 31; i++) {\n      b.push(0);\n    }\n\n    // append the length\n    b.push(0);\n    b.push(0);\n    b.push(Math.floor(this._length / 0x100000000));\n    b.push(this._length | 0);\n\n    while (b.length) {\n      this._block(b.splice(0,32));\n    }\n\n    this.reset();\n    return h;\n  },\n\n  /**\n   * The SHA-512 initialization vector, to be precomputed.\n   * @private\n   */\n  _init:[],\n\n  /**\n   * Least significant 24 bits of SHA512 initialization values.\n   *\n   * Javascript only has 53 bits of precision, so we compute the 40 most\n   * significant bits and add the remaining 24 bits as constants.\n   *\n   * @private\n   */\n  _initr: [ 0xbcc908, 0xcaa73b, 0x94f82b, 0x1d36f1, 0xe682d1, 0x3e6c1f, 0x41bd6b, 0x7e2179 ],\n\n  /*\n  _init:\n  [0x6a09e667, 0xf3bcc908, 0xbb67ae85, 0x84caa73b, 0x3c6ef372, 0xfe94f82b, 0xa54ff53a, 0x5f1d36f1,\n   0x510e527f, 0xade682d1, 0x9b05688c, 0x2b3e6c1f, 0x1f83d9ab, 0xfb41bd6b, 0x5be0cd19, 0x137e2179],\n  */\n\n  /**\n   * The SHA-512 hash key, to be precomputed.\n   * @private\n   */\n  _key:[],\n\n  /**\n   * Least significant 24 bits of SHA512 key values.\n   * @private\n   */\n  _keyr:\n  [0x28ae22, 0xef65cd, 0x4d3b2f, 0x89dbbc, 0x48b538, 0x05d019, 0x194f9b, 0x6d8118,\n   0x030242, 0x706fbe, 0xe4b28c, 0xffb4e2, 0x7b896f, 0x1696b1, 0xc71235, 0x692694,\n   0xf14ad2, 0x4f25e3, 0x8cd5b5, 0xac9c65, 0x2b0275, 0xa6e483, 0x41fbd4, 0x1153b5,\n   0x66dfab, 0xb43210, 0xfb213f, 0xef0ee4, 0xa88fc2, 0x0aa725, 0x03826f, 0x0e6e70,\n   0xd22ffc, 0x26c926, 0xc42aed, 0x95b3df, 0xaf63de, 0x77b2a8, 0xedaee6, 0x82353b,\n   0xf10364, 0x423001, 0xf89791, 0x54be30, 0xef5218, 0x65a910, 0x71202a, 0xbbd1b8,\n   0xd2d0c8, 0x41ab53, 0x8eeb99, 0x9b48a8, 0xc95a63, 0x418acb, 0x63e373, 0xb2b8a3,\n   0xefb2fc, 0x172f60, 0xf0ab72, 0x6439ec, 0x631e28, 0x82bde9, 0xc67915, 0x72532b,\n   0x26619c, 0xc0c207, 0xe0eb1e, 0x6ed178, 0x176fba, 0xc898a6, 0xf90dae, 0x1c471b,\n   0x047d84, 0xc72493, 0xc9bebc, 0x100d4c, 0x3e42b6, 0x657e2a, 0xd6faec, 0x475817],\n\n  /*\n  _key:\n  [0x428a2f98, 0xd728ae22, 0x71374491, 0x23ef65cd, 0xb5c0fbcf, 0xec4d3b2f, 0xe9b5dba5, 0x8189dbbc,\n   0x3956c25b, 0xf348b538, 0x59f111f1, 0xb605d019, 0x923f82a4, 0xaf194f9b, 0xab1c5ed5, 0xda6d8118,\n   0xd807aa98, 0xa3030242, 0x12835b01, 0x45706fbe, 0x243185be, 0x4ee4b28c, 0x550c7dc3, 0xd5ffb4e2,\n   0x72be5d74, 0xf27b896f, 0x80deb1fe, 0x3b1696b1, 0x9bdc06a7, 0x25c71235, 0xc19bf174, 0xcf692694,\n   0xe49b69c1, 0x9ef14ad2, 0xefbe4786, 0x384f25e3, 0x0fc19dc6, 0x8b8cd5b5, 0x240ca1cc, 0x77ac9c65,\n   0x2de92c6f, 0x592b0275, 0x4a7484aa, 0x6ea6e483, 0x5cb0a9dc, 0xbd41fbd4, 0x76f988da, 0x831153b5,\n   0x983e5152, 0xee66dfab, 0xa831c66d, 0x2db43210, 0xb00327c8, 0x98fb213f, 0xbf597fc7, 0xbeef0ee4,\n   0xc6e00bf3, 0x3da88fc2, 0xd5a79147, 0x930aa725, 0x06ca6351, 0xe003826f, 0x14292967, 0x0a0e6e70,\n   0x27b70a85, 0x46d22ffc, 0x2e1b2138, 0x5c26c926, 0x4d2c6dfc, 0x5ac42aed, 0x53380d13, 0x9d95b3df,\n   0x650a7354, 0x8baf63de, 0x766a0abb, 0x3c77b2a8, 0x81c2c92e, 0x47edaee6, 0x92722c85, 0x1482353b,\n   0xa2bfe8a1, 0x4cf10364, 0xa81a664b, 0xbc423001, 0xc24b8b70, 0xd0f89791, 0xc76c51a3, 0x0654be30,\n   0xd192e819, 0xd6ef5218, 0xd6990624, 0x5565a910, 0xf40e3585, 0x5771202a, 0x106aa070, 0x32bbd1b8,\n   0x19a4c116, 0xb8d2d0c8, 0x1e376c08, 0x5141ab53, 0x2748774c, 0xdf8eeb99, 0x34b0bcb5, 0xe19b48a8,\n   0x391c0cb3, 0xc5c95a63, 0x4ed8aa4a, 0xe3418acb, 0x5b9cca4f, 0x7763e373, 0x682e6ff3, 0xd6b2b8a3,\n   0x748f82ee, 0x5defb2fc, 0x78a5636f, 0x43172f60, 0x84c87814, 0xa1f0ab72, 0x8cc70208, 0x1a6439ec,\n   0x90befffa, 0x23631e28, 0xa4506ceb, 0xde82bde9, 0xbef9a3f7, 0xb2c67915, 0xc67178f2, 0xe372532b,\n   0xca273ece, 0xea26619c, 0xd186b8c7, 0x21c0c207, 0xeada7dd6, 0xcde0eb1e, 0xf57d4f7f, 0xee6ed178,\n   0x06f067aa, 0x72176fba, 0x0a637dc5, 0xa2c898a6, 0x113f9804, 0xbef90dae, 0x1b710b35, 0x131c471b,\n   0x28db77f5, 0x23047d84, 0x32caab7b, 0x40c72493, 0x3c9ebe0a, 0x15c9bebc, 0x431d67c4, 0x9c100d4c,\n   0x4cc5d4be, 0xcb3e42b6, 0x597f299c, 0xfc657e2a, 0x5fcb6fab, 0x3ad6faec, 0x6c44198c, 0x4a475817],\n  */\n\n  /**\n   * Function to precompute _init and _key.\n   * @private\n   */\n  _precompute: function () {\n    // XXX: This code is for precomputing the SHA256 constants, change for\n    //      SHA512 and re-enable.\n    var i = 0, prime = 2, factor , isPrime;\n\n    function frac(x)  { return (x-Math.floor(x)) * 0x100000000 | 0; }\n    function frac2(x) { return (x-Math.floor(x)) * 0x10000000000 & 0xff; }\n\n    for (; i<80; prime++) {\n      isPrime = true;\n      for (factor=2; factor*factor <= prime; factor++) {\n        if (prime % factor === 0) {\n          isPrime = false;\n          break;\n        }\n      }\n      if (isPrime) {\n        if (i<8) {\n          this._init[i*2] = frac(Math.pow(prime, 1/2));\n          this._init[i*2+1] = (frac2(Math.pow(prime, 1/2)) << 24) | this._initr[i];\n        }\n        this._key[i*2] = frac(Math.pow(prime, 1/3));\n        this._key[i*2+1] = (frac2(Math.pow(prime, 1/3)) << 24) | this._keyr[i];\n        i++;\n      }\n    }\n  },\n\n  /**\n   * Perform one cycle of SHA-512.\n   * @param {Uint32Array|bitArray} words one block of words.\n   * @private\n   */\n  _block:function (words) {\n    var i, wrh, wrl,\n        h = this._h,\n        k = this._key,\n        h0h = h[ 0], h0l = h[ 1], h1h = h[ 2], h1l = h[ 3],\n        h2h = h[ 4], h2l = h[ 5], h3h = h[ 6], h3l = h[ 7],\n        h4h = h[ 8], h4l = h[ 9], h5h = h[10], h5l = h[11],\n        h6h = h[12], h6l = h[13], h7h = h[14], h7l = h[15];\n    var w;\n    if (typeof Uint32Array !== 'undefined') {\n\t// When words is passed to _block, it has 32 elements. SHA512 _block\n\t// function extends words with new elements (at the end there are 160 elements). \n\t// The problem is that if we use Uint32Array instead of Array, \n\t// the length of Uint32Array cannot be changed. Thus, we replace words with a \n\t// normal Array here.\n        w = Array(160); // do not use Uint32Array here as the instantiation is slower\n        for (var j=0; j<32; j++){\n    \t    w[j] = words[j]; \n        }\n    } else {\n\tw = words;\n    } \n\n    // Working variables\n    var ah = h0h, al = h0l, bh = h1h, bl = h1l,\n        ch = h2h, cl = h2l, dh = h3h, dl = h3l,\n        eh = h4h, el = h4l, fh = h5h, fl = h5l,\n        gh = h6h, gl = h6l, hh = h7h, hl = h7l;\n\n    for (i=0; i<80; i++) {\n      // load up the input word for this round\n      if (i<16) {\n        wrh = w[i * 2];\n        wrl = w[i * 2 + 1];\n      } else {\n        // Gamma0\n        var gamma0xh = w[(i-15) * 2];\n        var gamma0xl = w[(i-15) * 2 + 1];\n        var gamma0h =\n          ((gamma0xl << 31) | (gamma0xh >>> 1)) ^\n          ((gamma0xl << 24) | (gamma0xh >>> 8)) ^\n           (gamma0xh >>> 7);\n        var gamma0l =\n          ((gamma0xh << 31) | (gamma0xl >>> 1)) ^\n          ((gamma0xh << 24) | (gamma0xl >>> 8)) ^\n          ((gamma0xh << 25) | (gamma0xl >>> 7));\n\n        // Gamma1\n        var gamma1xh = w[(i-2) * 2];\n        var gamma1xl = w[(i-2) * 2 + 1];\n        var gamma1h =\n          ((gamma1xl << 13) | (gamma1xh >>> 19)) ^\n          ((gamma1xh << 3)  | (gamma1xl >>> 29)) ^\n           (gamma1xh >>> 6);\n        var gamma1l =\n          ((gamma1xh << 13) | (gamma1xl >>> 19)) ^\n          ((gamma1xl << 3)  | (gamma1xh >>> 29)) ^\n          ((gamma1xh << 26) | (gamma1xl >>> 6));\n\n        // Shortcuts\n        var wr7h = w[(i-7) * 2];\n        var wr7l = w[(i-7) * 2 + 1];\n\n        var wr16h = w[(i-16) * 2];\n        var wr16l = w[(i-16) * 2 + 1];\n\n        // W(round) = gamma0 + W(round - 7) + gamma1 + W(round - 16)\n        wrl = gamma0l + wr7l;\n        wrh = gamma0h + wr7h + ((wrl >>> 0) < (gamma0l >>> 0) ? 1 : 0);\n        wrl += gamma1l;\n        wrh += gamma1h + ((wrl >>> 0) < (gamma1l >>> 0) ? 1 : 0);\n        wrl += wr16l;\n        wrh += wr16h + ((wrl >>> 0) < (wr16l >>> 0) ? 1 : 0);\n      }\n\n      w[i*2]     = wrh |= 0;\n      w[i*2 + 1] = wrl |= 0;\n\n      // Ch\n      var chh = (eh & fh) ^ (~eh & gh);\n      var chl = (el & fl) ^ (~el & gl);\n\n      // Maj\n      var majh = (ah & bh) ^ (ah & ch) ^ (bh & ch);\n      var majl = (al & bl) ^ (al & cl) ^ (bl & cl);\n\n      // Sigma0\n      var sigma0h = ((al << 4) | (ah >>> 28)) ^ ((ah << 30) | (al >>> 2)) ^ ((ah << 25) | (al >>> 7));\n      var sigma0l = ((ah << 4) | (al >>> 28)) ^ ((al << 30) | (ah >>> 2)) ^ ((al << 25) | (ah >>> 7));\n\n      // Sigma1\n      var sigma1h = ((el << 18) | (eh >>> 14)) ^ ((el << 14) | (eh >>> 18)) ^ ((eh << 23) | (el >>> 9));\n      var sigma1l = ((eh << 18) | (el >>> 14)) ^ ((eh << 14) | (el >>> 18)) ^ ((el << 23) | (eh >>> 9));\n\n      // K(round)\n      var krh = k[i*2];\n      var krl = k[i*2+1];\n\n      // t1 = h + sigma1 + ch + K(round) + W(round)\n      var t1l = hl + sigma1l;\n      var t1h = hh + sigma1h + ((t1l >>> 0) < (hl >>> 0) ? 1 : 0);\n      t1l += chl;\n      t1h += chh + ((t1l >>> 0) < (chl >>> 0) ? 1 : 0);\n      t1l += krl;\n      t1h += krh + ((t1l >>> 0) < (krl >>> 0) ? 1 : 0);\n      t1l = t1l + wrl|0;   // FF32..FF34 perf issue https://bugzilla.mozilla.org/show_bug.cgi?id=1054972\n      t1h += wrh + ((t1l >>> 0) < (wrl >>> 0) ? 1 : 0);\n\n      // t2 = sigma0 + maj\n      var t2l = sigma0l + majl;\n      var t2h = sigma0h + majh + ((t2l >>> 0) < (sigma0l >>> 0) ? 1 : 0);\n\n      // Update working variables\n      hh = gh;\n      hl = gl;\n      gh = fh;\n      gl = fl;\n      fh = eh;\n      fl = el;\n      el = (dl + t1l) | 0;\n      eh = (dh + t1h + ((el >>> 0) < (dl >>> 0) ? 1 : 0)) | 0;\n      dh = ch;\n      dl = cl;\n      ch = bh;\n      cl = bl;\n      bh = ah;\n      bl = al;\n      al = (t1l + t2l) | 0;\n      ah = (t1h + t2h + ((al >>> 0) < (t1l >>> 0) ? 1 : 0)) | 0;\n    }\n\n    // Intermediate hash\n    h0l = h[1] = (h0l + al) | 0;\n    h[0] = (h0h + ah + ((h0l >>> 0) < (al >>> 0) ? 1 : 0)) | 0;\n    h1l = h[3] = (h1l + bl) | 0;\n    h[2] = (h1h + bh + ((h1l >>> 0) < (bl >>> 0) ? 1 : 0)) | 0;\n    h2l = h[5] = (h2l + cl) | 0;\n    h[4] = (h2h + ch + ((h2l >>> 0) < (cl >>> 0) ? 1 : 0)) | 0;\n    h3l = h[7] = (h3l + dl) | 0;\n    h[6] = (h3h + dh + ((h3l >>> 0) < (dl >>> 0) ? 1 : 0)) | 0;\n    h4l = h[9] = (h4l + el) | 0;\n    h[8] = (h4h + eh + ((h4l >>> 0) < (el >>> 0) ? 1 : 0)) | 0;\n    h5l = h[11] = (h5l + fl) | 0;\n    h[10] = (h5h + fh + ((h5l >>> 0) < (fl >>> 0) ? 1 : 0)) | 0;\n    h6l = h[13] = (h6l + gl) | 0;\n    h[12] = (h6h + gh + ((h6l >>> 0) < (gl >>> 0) ? 1 : 0)) | 0;\n    h7l = h[15] = (h7l + hl) | 0;\n    h[14] = (h7h + hh + ((h7l >>> 0) < (hl >>> 0) ? 1 : 0)) | 0;\n  }\n};\n\n\n/** @fileOverview HMAC implementation.\n *\n * @author Emily Stark\n * @author Mike Hamburg\n * @author Dan Boneh\n */\n\n/** HMAC with the specified hash function.\n * @constructor\n * @param {bitArray} key the key for HMAC.\n * @param {Object} [Hash=sjcl.hash.sha256] The hash function to use.\n */\nsjcl.misc.hmac = function (key, Hash) {\n  this._hash = Hash = Hash || sjcl.hash.sha256;\n  var exKey = [[],[]], i,\n      bs = Hash.prototype.blockSize / 32;\n  this._baseHash = [new Hash(), new Hash()];\n\n  if (key.length > bs) {\n    key = Hash.hash(key);\n  }\n  \n  for (i=0; i<bs; i++) {\n    exKey[0][i] = key[i]^0x36363636;\n    exKey[1][i] = key[i]^0x5C5C5C5C;\n  }\n  \n  this._baseHash[0].update(exKey[0]);\n  this._baseHash[1].update(exKey[1]);\n  this._resultHash = new Hash(this._baseHash[0]);\n};\n\n/** HMAC with the specified hash function.  Also called encrypt since it's a prf.\n * @param {bitArray|String} data The data to mac.\n */\nsjcl.misc.hmac.prototype.encrypt = sjcl.misc.hmac.prototype.mac = function (data) {\n  if (!this._updated) {\n    this.update(data);\n    return this.digest(data);\n  } else {\n    throw new sjcl.exception.invalid(\"encrypt on already updated hmac called!\");\n  }\n};\n\nsjcl.misc.hmac.prototype.reset = function () {\n  this._resultHash = new this._hash(this._baseHash[0]);\n  this._updated = false;\n};\n\nsjcl.misc.hmac.prototype.update = function (data) {\n  this._updated = true;\n  this._resultHash.update(data);\n};\n\nsjcl.misc.hmac.prototype.digest = function () {\n  var w = this._resultHash.finalize(), result = new (this._hash)(this._baseHash[1]).update(w).finalize();\n\n  this.reset();\n\n  return result;\n};\n; export default sjcl;","// eslint-disable-next-line import/no-extraneous-dependencies\nimport sjcl from 'sjcl'; // SJCL is included during compilation.\n\nimport { InternalUtils } from './utils';\n\nlet randomBytes;\nlet hmacDigest;\n\nif (InternalUtils.isNode) {\n\tconst NodeBuffer = InternalUtils.globalThis.Buffer;\n\tconst NodeCrypto = InternalUtils.nodeRequire('crypto');\n\n\tlet nodeBufferFromArrayBuffer;\n\tif (typeof NodeBuffer.from === 'function') {\n\t\tnodeBufferFromArrayBuffer = NodeBuffer.from;\n\t} else {\n\t\t// Node.js < 5.10.0\n\t\tnodeBufferFromArrayBuffer = arrayBuffer => {\n\t\t\tconst nodeBuffer = new NodeBuffer(arrayBuffer.byteLength);\n\t\t\tconst uint8Array = new Uint8Array(arrayBuffer);\n\t\t\tfor (let i = 0; i < uint8Array.length; i++) {\n\t\t\t\tnodeBuffer[i] = uint8Array[i];\n\t\t\t}\n\t\t\treturn nodeBuffer;\n\t\t};\n\t}\n\n\tlet nodeBufferToArrayBuffer;\n\tif (NodeBuffer.prototype instanceof Uint8Array) {\n\t\tnodeBufferToArrayBuffer = nodeBuffer => nodeBuffer.buffer;\n\t} else {\n\t\t// Node.js < 4.0.0\n\t\tnodeBufferToArrayBuffer = nodeBuffer => {\n\t\t\tconst uint8Array = new Uint8Array(nodeBuffer.length);\n\t\t\tfor (let i = 0; i < uint8Array.length; i++) {\n\t\t\t\tuint8Array[i] = nodeBuffer[i];\n\t\t\t}\n\t\t\treturn uint8Array.buffer;\n\t\t};\n\t}\n\n\trandomBytes = size => {\n\t\tconst bytes = NodeCrypto.randomBytes(size);\n\t\treturn nodeBufferToArrayBuffer(bytes);\n\t};\n\n\thmacDigest = (algorithm, key, message) => {\n\t\tconst hmac = NodeCrypto.createHmac(algorithm, nodeBufferFromArrayBuffer(key));\n\t\thmac.update(nodeBufferFromArrayBuffer(message));\n\t\treturn nodeBufferToArrayBuffer(hmac.digest());\n\t};\n} else {\n\tconst BrowserCrypto = InternalUtils.globalThis.crypto || InternalUtils.globalThis.msCrypto;\n\n\tlet getRandomValues;\n\tif (typeof BrowserCrypto !== 'undefined' && typeof BrowserCrypto.getRandomValues === 'function') {\n\t\tgetRandomValues = array => {\n\t\t\tBrowserCrypto.getRandomValues(array);\n\t\t};\n\t} else {\n\t\tInternalUtils.console.warn('Cryptography API not available, falling back to \\'Math.random\\'...');\n\t\tgetRandomValues = array => {\n\t\t\tfor (let i = 0; i < array.length; i++) {\n\t\t\t\tarray[i] = Math.floor(Math.random() * 256);\n\t\t\t}\n\t\t};\n\t}\n\n\trandomBytes = size => {\n\t\tconst bytes = new Uint8Array(size);\n\t\tgetRandomValues(bytes);\n\t\treturn bytes.buffer;\n\t};\n\n\thmacDigest = (algorithm, key, message) => {\n\t\tconst hash = sjcl.hash[algorithm.toLowerCase()];\n\t\tif (typeof hash === 'undefined') {\n\t\t\tthrow new TypeError('Unknown hash function');\n\t\t}\n\t\t// eslint-disable-next-line new-cap\n\t\tconst hmac = new sjcl.misc.hmac(sjcl.codec.arrayBuffer.toBits(key), hash);\n\t\thmac.update(sjcl.codec.arrayBuffer.toBits(message));\n\t\treturn sjcl.codec.arrayBuffer.fromBits(hmac.digest(), false);\n\t};\n}\n\n/**\n * An object containing some cryptography functions with dirty workarounds for Node.js and browsers.\n * @private\n * @type {Object}\n */\nexport const Crypto = {\n\n\t/**\n\t * Returns random bytes.\n\t * @param {number} size Size.\n\t * @returns {ArrayBuffer} Random bytes.\n\t */\n\trandomBytes,\n\n\t/**\n\t * Calculates an HMAC digest.\n\t * In Node.js, the command `openssl list -digest-algorithms` displays the available digest algorithms.\n\t * @param {string} algorithm Algorithm.\n\t * @param {ArrayBuffer} key Key.\n\t * @param {ArrayBuffer} message Message.\n\t * @returns {ArrayBuffer} Digest.\n\t */\n\thmacDigest\n\n};\n","import { Utils } from './utils';\nimport { Crypto } from './crypto';\n\n/**\n * Secret key object.\n * @param {Object} [config] Configuration options.\n * @param {ArrayBuffer} [config.buffer=Crypto.randomBytes] Secret key.\n * @param {number} [config.size=20] Number of random bytes to generate, ignored if 'buffer' is provided.\n */\nexport class Secret {\n\tconstructor({ buffer, size = 20 } = {}) {\n\t\t/**\n\t\t * Secret key.\n\t\t * @type {ArrayBuffer}\n\t\t */\n\t\tthis.buffer = typeof buffer === 'undefined'\n\t\t\t? Crypto.randomBytes(size)\n\t\t\t: buffer;\n\t}\n\n\t/**\n\t * Converts a raw string to a Secret object.\n\t * @param {string} str Raw string.\n\t * @returns {Secret} Secret object.\n\t */\n\tstatic fromRaw(str) {\n\t\treturn new Secret({ buffer: Utils.raw.toBuf(str) });\n\t}\n\n\t/**\n\t * Converts a base32 string to a Secret object.\n\t * @param {string} str Base32 string.\n\t * @returns {Secret} Secret object.\n\t */\n\tstatic fromB32(str) {\n\t\treturn new Secret({ buffer: Utils.b32.toBuf(str) });\n\t}\n\n\t/**\n\t * Converts a hexadecimal string to a Secret object.\n\t * @param {string} str Hexadecimal string.\n\t * @returns {Secret} Secret object.\n\t */\n\tstatic fromHex(str) {\n\t\treturn new Secret({ buffer: Utils.hex.toBuf(str) });\n\t}\n\n\t/**\n\t * String representation of secret key.\n\t * @type {string}\n\t */\n\tget raw() {\n\t\tObject.defineProperty(this, 'raw', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\twritable: true,\n\t\t\tvalue: Utils.raw.fromBuf(this.buffer)\n\t\t});\n\n\t\treturn this.raw;\n\t}\n\n\t/**\n\t * Base32 representation of secret key.\n\t * @type {string}\n\t */\n\tget b32() {\n\t\tObject.defineProperty(this, 'b32', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\twritable: true,\n\t\t\tvalue: Utils.b32.fromBuf(this.buffer)\n\t\t});\n\n\t\treturn this.b32;\n\t}\n\n\t/**\n\t * Hexadecimal representation of secret key.\n\t * @type {string}\n\t */\n\tget hex() {\n\t\tObject.defineProperty(this, 'hex', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\twritable: true,\n\t\t\tvalue: Utils.hex.fromBuf(this.buffer)\n\t\t});\n\n\t\treturn this.hex;\n\t}\n}\n","import { Utils } from './utils';\nimport { Secret } from './secret';\n// eslint-disable-next-line import/no-cycle\nimport { HOTP, TOTP } from './otp';\n\n/**\n * Valid key URI parameters.\n * @private\n * @type {Array}\n */\nconst OTPURI_PARAMS = ['issuer', 'secret', 'algorithm', 'digits', 'counter', 'period'];\n\n/**\n * Key URI regex.\n *   otpauth://TYPE/[ISSUER:]LABEL?PARAMETERS\n * @private\n * @type {RegExp}\n */\nconst OTPURI_REGEX = new RegExp(`^otpauth:\\\\/\\\\/([ht]otp)\\\\/(.+)\\\\?((?:&?(?:${OTPURI_PARAMS.join('|')})=[^&]+)+)$`, 'i');\n\n/**\n * RFC 4648 base32 alphabet with pad.\n * @private\n * @type {string}\n */\nconst SECRET_REGEX = /^[2-7A-Z]+=*$/i;\n\n/**\n * Regex for supported algorithms.\n * @private\n * @type {RegExp}\n */\nconst ALGORITHM_REGEX = /^SHA(?:1|256|512)$/i;\n\n/**\n * Integer regex.\n * @private\n * @type {RegExp}\n */\nconst INTEGER_REGEX = /^[+-]?\\d+$/;\n\n/**\n * Positive integer regex.\n * @private\n * @type {RegExp}\n */\nconst POSITIVE_INTEGER_REGEX = /^\\+?[1-9]\\d*$/;\n\n/**\n * HOTP/TOTP object/string conversion\n * (https://github.com/google/google-authenticator/wiki/Key-Uri-Format).\n */\nexport class URI {\n\t/**\n\t * Parses a Google Authenticator key URI and returns an HOTP/TOTP object.\n\t * @param {string} uri Google Authenticator Key URI.\n\t * @returns {HOTP|TOTP} HOTP/TOTP object.\n\t */\n\tstatic parse(uri) {\n\t\tlet uriGroups;\n\n\t\ttry {\n\t\t\turiGroups = uri.match(OTPURI_REGEX);\n\t\t} catch (error) { /* Handled below */ }\n\n\t\tif (!Array.isArray(uriGroups)) {\n\t\t\tthrow new URIError('Invalid URI format');\n\t\t}\n\n\t\t// Extract URI groups.\n\t\tconst uriType = uriGroups[1].toLowerCase();\n\t\tconst uriLabel = uriGroups[2].split(/:(.+)/, 2).map(decodeURIComponent);\n\t\tconst uriParams = uriGroups[3].split('&').reduce((acc, cur) => {\n\t\t\tconst pairArr = cur.split(/=(.+)/, 2).map(decodeURIComponent);\n\t\t\tconst pairKey = pairArr[0].toLowerCase();\n\t\t\tconst pairVal = pairArr[1];\n\t\t\tconst pairAcc = acc;\n\n\t\t\tpairAcc[pairKey] = pairVal;\n\t\t\treturn pairAcc;\n\t\t}, {});\n\n\t\t// 'OTP' will be instantiated with 'config' argument.\n\t\tlet OTP;\n\t\tconst config = {};\n\n\t\tif (uriType === 'hotp') {\n\t\t\tOTP = HOTP;\n\n\t\t\t// Counter: required\n\t\t\tif (typeof uriParams.counter !== 'undefined' && INTEGER_REGEX.test(uriParams.counter)) {\n\t\t\t\tconfig.counter = parseInt(uriParams.counter, 10);\n\t\t\t} else {\n\t\t\t\tthrow new TypeError('Missing or invalid \\'counter\\' parameter');\n\t\t\t}\n\t\t} else if (uriType === 'totp') {\n\t\t\tOTP = TOTP;\n\n\t\t\t// Period: optional\n\t\t\tif (typeof uriParams.period !== 'undefined') {\n\t\t\t\tif (POSITIVE_INTEGER_REGEX.test(uriParams.period)) {\n\t\t\t\t\tconfig.period = parseInt(uriParams.period, 10);\n\t\t\t\t} else {\n\t\t\t\t\tthrow new TypeError('Invalid \\'period\\' parameter');\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('Unknown OTP type');\n\t\t}\n\n\t\t// Label: required\n\t\t// Issuer: optional\n\t\tif (uriLabel.length === 2) {\n\t\t\tconfig.label = uriLabel[1];\n\t\t\tif (typeof uriParams.issuer === 'undefined') {\n\t\t\t\tconfig.issuer = uriLabel[0];\n\t\t\t} else if (uriParams.issuer === uriLabel[0]) {\n\t\t\t\tconfig.issuer = uriParams.issuer;\n\t\t\t} else {\n\t\t\t\tthrow new TypeError('Invalid \\'issuer\\' parameter');\n\t\t\t}\n\t\t} else {\n\t\t\tconfig.label = uriLabel[0];\n\t\t\tif (typeof uriParams.issuer !== 'undefined') {\n\t\t\t\tconfig.issuer = uriParams.issuer;\n\t\t\t}\n\t\t}\n\n\t\t// Secret: required\n\t\tif (typeof uriParams.secret !== 'undefined' && SECRET_REGEX.test(uriParams.secret)) {\n\t\t\tconfig.secret = new Secret({ buffer: Utils.b32.toBuf(uriParams.secret) });\n\t\t} else {\n\t\t\tthrow new TypeError('Missing or invalid \\'secret\\' parameter');\n\t\t}\n\n\t\t// Algorithm: optional\n\t\tif (typeof uriParams.algorithm !== 'undefined') {\n\t\t\tif (ALGORITHM_REGEX.test(uriParams.algorithm)) {\n\t\t\t\tconfig.algorithm = uriParams.algorithm;\n\t\t\t} else {\n\t\t\t\tthrow new TypeError('Invalid \\'algorithm\\' parameter');\n\t\t\t}\n\t\t}\n\n\t\t// Digits: optional\n\t\tif (typeof uriParams.digits !== 'undefined') {\n\t\t\tif (POSITIVE_INTEGER_REGEX.test(uriParams.digits)) {\n\t\t\t\tconfig.digits = parseInt(uriParams.digits, 10);\n\t\t\t} else {\n\t\t\t\tthrow new TypeError('Invalid \\'digits\\' parameter');\n\t\t\t}\n\t\t}\n\n\t\treturn new OTP(config);\n\t}\n\n\t/**\n\t * Converts an HOTP/TOTP object to a Google Authenticator key URI.\n\t * @param {HOTP|TOTP} otp HOTP/TOTP object.\n\t * @param {Object} [config] Configuration options.\n\t * @param {boolean} [config.legacyIssuer=true] Set issuer label prefix.\n\t * @returns {string} Google Authenticator Key URI.\n\t */\n\tstatic stringify(otp, { legacyIssuer = true } = {}) {\n\t\tconst isHOTP = otp instanceof HOTP;\n\t\tconst isTOTP = otp instanceof TOTP;\n\n\t\tif (!isHOTP && !isTOTP) {\n\t\t\tthrow new TypeError('Invalid \\'HOTP/TOTP\\' object');\n\t\t}\n\n\t\t// Key URI format:\n\t\t//   otpauth://TYPE/[ISSUER:]LABEL?PARAMETERS\n\t\tlet uri = 'otpauth://';\n\n\t\t// Type.\n\t\turi += `${isTOTP ? 'totp' : 'hotp'}/`;\n\n\t\t// Label and optional issuer.\n\t\tif (otp.issuer.length > 0) {\n\t\t\t// Legacy label prefix.\n\t\t\tif (legacyIssuer) uri += `${encodeURIComponent(otp.issuer)}:`;\n\t\t\t// Label.\n\t\t\turi += `${encodeURIComponent(otp.label)}?`;\n\t\t\t// Issuer.\n\t\t\turi += `issuer=${encodeURIComponent(otp.issuer)}&`;\n\t\t} else {\n\t\t\t// Label.\n\t\t\turi += `${encodeURIComponent(otp.label)}?`;\n\t\t}\n\n\t\t// Generic parameters.\n\t\turi += `secret=${encodeURIComponent(otp.secret.b32)}`\n\t\t\t+ `&algorithm=${encodeURIComponent(otp.algorithm)}`\n\t\t\t+ `&digits=${encodeURIComponent(otp.digits)}`;\n\n\t\t// Extra parameters.\n\t\tif (isTOTP) {\n\t\t\t// TOTP parameters.\n\t\t\turi += `&period=${encodeURIComponent(otp.period)}`;\n\t\t} else {\n\t\t\t// HOTP parameters.\n\t\t\turi += `&counter=${encodeURIComponent(otp.counter)}`;\n\t\t}\n\n\t\treturn uri;\n\t}\n}\n","import { Utils } from './utils';\nimport { Crypto } from './crypto';\nimport { Secret } from './secret';\n// eslint-disable-next-line import/no-cycle\nimport { URI } from './uri';\n\n/**\n * Default configuration.\n * @private\n * @type {Object}\n */\nconst defaults = {\n\tissuer: '',\n\tlabel: 'OTPAuth',\n\talgorithm: 'SHA1',\n\tdigits: 6,\n\tcounter: 0,\n\tperiod: 30,\n\twindow: 1\n};\n\n/**\n * HOTP: An HMAC-based One-time Password Algorithm (RFC 4226)\n * (https://tools.ietf.org/html/rfc4226).\n * @param {Object} [config] Configuration options.\n * @param {string} [config.issuer=''] Account provider.\n * @param {string} [config.label='OTPAuth'] Account label.\n * @param {Secret|string} [config.secret=Secret] Secret key.\n * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n * @param {number} [config.digits=6] Token length.\n * @param {number} [config.counter=0] Initial counter value.\n */\nexport class HOTP {\n\tconstructor({\n\t\tissuer = defaults.issuer,\n\t\tlabel = defaults.label,\n\t\tsecret = new Secret(),\n\t\talgorithm = defaults.algorithm,\n\t\tdigits = defaults.digits,\n\t\tcounter = defaults.counter\n\t} = {}) {\n\t\t/**\n\t\t * Account provider.\n\t\t * @type {string}\n\t\t */\n\t\tthis.issuer = issuer;\n\t\t/**\n\t\t * Account label.\n\t\t * @type {string}\n\t\t */\n\t\tthis.label = label;\n\t\t/**\n\t\t * Secret key.\n\t\t * @type {Secret}\n\t\t */\n\t\tthis.secret = typeof secret === 'string'\n\t\t\t? Secret.fromB32(secret)\n\t\t\t: secret;\n\t\t/**\n\t\t * HMAC hashing algorithm.\n\t\t * @type {string}\n\t\t */\n\t\tthis.algorithm = algorithm;\n\t\t/**\n\t\t * Token length.\n\t\t * @type {number}\n\t\t */\n\t\tthis.digits = digits;\n\t\t/**\n\t\t * Initial counter value.\n\t\t * @type {number}\n\t\t */\n\t\tthis.counter = counter;\n\t}\n\n\t/**\n\t * Generates an HOTP token.\n\t * @param {Object} config Configuration options.\n\t * @param {Secret} config.secret Secret key.\n\t * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n\t * @param {number} [config.digits=6] Token length.\n\t * @param {number} [config.counter=0] Counter value.\n\t * @returns {string} Token.\n\t */\n\tstatic generate({\n\t\tsecret,\n\t\talgorithm = defaults.algorithm,\n\t\tdigits = defaults.digits,\n\t\tcounter = defaults.counter\n\t}) {\n\t\tconst digest = new Uint8Array(Crypto.hmacDigest(algorithm, secret.buffer, Utils.uint.toBuf(counter)));\n\t\tconst offset = digest[digest.byteLength - 1] & 15;\n\t\tconst otp = (\n\t\t\t((digest[offset] & 127) << 24)\n\t\t\t| ((digest[offset + 1] & 255) << 16)\n\t\t\t| ((digest[offset + 2] & 255) << 8)\n\t\t\t| (digest[offset + 3] & 255)\n\t\t) % (10 ** digits);\n\n\t\treturn Utils.pad(otp, digits);\n\t}\n\n\t/**\n\t * Generates an HOTP token.\n\t * @param {Object} [config] Configuration options.\n\t * @param {number} [config.counter=this.counter++] Counter value.\n\t * @returns {string} Token.\n\t */\n\tgenerate({\n\t\tcounter = this.counter++\n\t} = {}) {\n\t\treturn HOTP.generate({\n\t\t\tsecret: this.secret,\n\t\t\talgorithm: this.algorithm,\n\t\t\tdigits: this.digits,\n\t\t\tcounter\n\t\t});\n\t}\n\n\t/**\n\t * Validates an HOTP token.\n\t * @param {Object} config Configuration options.\n\t * @param {string} config.token Token value.\n\t * @param {Secret} config.secret Secret key.\n\t * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n\t * @param {number} [config.counter=0] Counter value.\n\t * @param {number} [config.window=1] Window of counter values to test.\n\t * @returns {number|null} Token delta, or null if the token is not found.\n\t */\n\tstatic validate({\n\t\ttoken,\n\t\tsecret,\n\t\talgorithm,\n\t\tcounter = defaults.counter,\n\t\twindow = defaults.window\n\t}) {\n\t\tfor (let i = counter - window; i <= counter + window; ++i) {\n\t\t\tconst generatedToken = HOTP.generate({\n\t\t\t\tsecret,\n\t\t\t\talgorithm,\n\t\t\t\tdigits: token.length,\n\t\t\t\tcounter: i\n\t\t\t});\n\n\t\t\tif (token === generatedToken) {\n\t\t\t\treturn i - counter;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\t/**\n\t * Validates an HOTP token.\n\t * @param {Object} config Configuration options.\n\t * @param {string} config.token Token value.\n\t * @param {number} [config.counter=this.counter] Counter value.\n\t * @param {number} [config.window=1] Window of counter values to test.\n\t * @returns {number|null} Token delta, or null if the token is not found.\n\t */\n\tvalidate({\n\t\ttoken,\n\t\tcounter = this.counter,\n\t\twindow\n\t}) {\n\t\treturn HOTP.validate({\n\t\t\ttoken: Utils.pad(token, this.digits),\n\t\t\tsecret: this.secret,\n\t\t\talgorithm: this.algorithm,\n\t\t\tcounter,\n\t\t\twindow\n\t\t});\n\t}\n\n\t/**\n\t * Returns a Google Authenticator key URI.\n\t * @returns {string} URI.\n\t */\n\ttoString() {\n\t\treturn URI.stringify(this);\n\t}\n}\n\n/**\n * TOTP: Time-Based One-Time Password Algorithm (RFC 6238)\n * (https://tools.ietf.org/html/rfc6238).\n * @param {Object} [config] Configuration options.\n * @param {string} [config.issuer=''] Account provider.\n * @param {string} [config.label='OTPAuth'] Account label.\n * @param {Secret|string} [config.secret=Secret] Secret key.\n * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n * @param {number} [config.digits=6] Token length.\n * @param {number} [config.period=30] Token time-step duration.\n */\nexport class TOTP {\n\tconstructor({\n\t\tissuer = defaults.issuer,\n\t\tlabel = defaults.label,\n\t\tsecret = new Secret(),\n\t\talgorithm = defaults.algorithm,\n\t\tdigits = defaults.digits,\n\t\tperiod = defaults.period\n\t} = {}) {\n\t\t/**\n\t\t * Account provider.\n\t\t * @type {string}\n\t\t */\n\t\tthis.issuer = issuer;\n\t\t/**\n\t\t * Account label.\n\t\t * @type {string}\n\t\t */\n\t\tthis.label = label;\n\t\t/**\n\t\t * Secret key.\n\t\t * @type {Secret}\n\t\t */\n\t\tthis.secret = typeof secret === 'string'\n\t\t\t? Secret.fromB32(secret)\n\t\t\t: secret;\n\t\t/**\n\t\t * HMAC hashing algorithm.\n\t\t * @type {string}\n\t\t */\n\t\tthis.algorithm = algorithm;\n\t\t/**\n\t\t * Token length.\n\t\t * @type {number}\n\t\t */\n\t\tthis.digits = digits;\n\t\t/**\n\t\t * Token time-step duration.\n\t\t * @type {number}\n\t\t */\n\t\tthis.period = period;\n\t}\n\n\t/**\n\t * Generates a TOTP token.\n\t * @param {Object} config Configuration options.\n\t * @param {Secret} config.secret Secret key.\n\t * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n\t * @param {number} [config.digits=6] Token length.\n\t * @param {number} [config.period=30] Token time-step duration.\n\t * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n\t * @returns {string} Token.\n\t */\n\tstatic generate({\n\t\tsecret,\n\t\talgorithm,\n\t\tdigits,\n\t\tperiod = defaults.period,\n\t\ttimestamp = Date.now()\n\t}) {\n\t\treturn HOTP.generate({\n\t\t\tsecret,\n\t\t\talgorithm,\n\t\t\tdigits,\n\t\t\tcounter: Math.floor(timestamp / 1000 / period)\n\t\t});\n\t}\n\n\t/**\n\t * Generates a TOTP token.\n\t * @param {Object} [config] Configuration options.\n\t * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n\t * @returns {string} Token.\n\t */\n\tgenerate({\n\t\ttimestamp = Date.now()\n\t} = {}) {\n\t\treturn TOTP.generate({\n\t\t\tsecret: this.secret,\n\t\t\talgorithm: this.algorithm,\n\t\t\tdigits: this.digits,\n\t\t\tperiod: this.period,\n\t\t\ttimestamp\n\t\t});\n\t}\n\n\t/**\n\t * Validates a TOTP token.\n\t * @param {Object} config Configuration options.\n\t * @param {string} config.token Token value.\n\t * @param {Secret} config.secret Secret key.\n\t * @param {string} [config.algorithm='SHA1'] HMAC hashing algorithm.\n\t * @param {number} [config.period=30] Token time-step duration.\n\t * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n\t * @param {number} [config.window=1] Window of counter values to test.\n\t * @returns {number|null} Token delta, or null if the token is not found.\n\t */\n\tstatic validate({\n\t\ttoken,\n\t\tsecret,\n\t\talgorithm,\n\t\tperiod = defaults.period,\n\t\ttimestamp = Date.now(),\n\t\twindow\n\t}) {\n\t\treturn HOTP.validate({\n\t\t\ttoken,\n\t\t\tsecret,\n\t\t\talgorithm,\n\t\t\tcounter: Math.floor(timestamp / 1000 / period),\n\t\t\twindow\n\t\t});\n\t}\n\n\t/**\n\t * Validates a TOTP token.\n\t * @param {Object} config Configuration options.\n\t * @param {string} config.token Token value.\n\t * @param {number} [config.timestamp=Date.now] Timestamp value in milliseconds.\n\t * @param {number} [config.window=1] Window of counter values to test.\n\t * @returns {number|null} Token delta, or null if the token is not found.\n\t */\n\tvalidate({\n\t\ttoken,\n\t\ttimestamp,\n\t\twindow\n\t}) {\n\t\treturn TOTP.validate({\n\t\t\ttoken: Utils.pad(token, this.digits),\n\t\t\tsecret: this.secret,\n\t\t\talgorithm: this.algorithm,\n\t\t\tperiod: this.period,\n\t\t\ttimestamp,\n\t\t\twindow\n\t\t});\n\t}\n\n\t/**\n\t * Returns a Google Authenticator key URI.\n\t * @returns {string} URI.\n\t */\n\ttoString() {\n\t\treturn URI.stringify(this);\n\t}\n}\n","/**\n * Library version.\n * @type {string}\n */\nexport const version = process.env.VERSION;\n","/**\n * One Time Password (HOTP/TOTP) library for Node.js and browser.\n * @module OTPAuth\n * @author Hctor Molinero Fernndez <hector@molinero.dev>\n */\nimport { HOTP, TOTP } from './otp';\nimport { URI } from './uri';\nimport { Secret } from './secret';\nimport { Utils } from './utils';\nimport { version } from './version';\n\nexport default { HOTP, TOTP, URI, Secret, Utils, version };\nexport { HOTP, TOTP, URI, Secret, Utils, version };\n"],"sourceRoot":""}